jQuery("html").addClass("js");jQuery(document).ready(function(e){e("#dissect-video, #pref-video").colorbox({iframe:true,innerWidth:980,innerHeight:550});var t={init:function(){var n=e("#tvr-manage, #tvr-preferences");e("span.help-trigger").click(function(n){t.load_docs(e(n.target))});n.click(function(n){var r=e(n.target);try{i=r.attr("class");if(!i){var i="tvr-undefined"}}catch(s){}if(i.indexOf("reveal-add-micro")>=0){t.reveal_add_micro(r,n)}else if(i.indexOf("reveal-upload-micro")>=0){t.reveal_upload_micro(r,n)}else if(i.indexOf("delete-micro")>=0){t.delete_micro(r,n)}else if(i.indexOf("reveal-edit-meta")>=0){t.reveal_edit_meta(r,n)}else if(i.indexOf("reveal-edit-readme")>=0){t.reveal_edit_readme(r,n)}else if(i.indexOf("resize-image")>=0){t.resize_image(r,n)}else if(i.indexOf("export-zip-button")>=0){t.export_zip_button(r,n)}else if(i.indexOf("delete-file")>=0){t.delete_file(r,n)}else if(i.indexOf("reveal-unlock")>=0){e("#tvr_validate_form").addClass("show")}});e("a[rel='bg-image']",n).colorbox()},load_docs:function(t){e.colorbox({href:t.attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:true,iframe:true,open:true})},reveal_add_micro:function(t,n){n.preventDefault();e("#add-micro").slideToggle("slow",function(){if(t.text()=="Create New Settings Pack"){t.text("Cancel")}else{t.text("Create New Settings Pack")}})},reveal_upload_micro:function(t,n){n.preventDefault();e("#upload-micro").slideToggle("slow",function(){if(t.text()=="+ Install New Settings Pack"){t.text("Cancel")}else{t.text("+ Install New Settings Pack")}})},delete_micro:function(e,t){var n=confirm("Are you sure you want to delete this theme?");if(!n){t.preventDefault()}},reveal_edit_meta:function(t,n){n.preventDefault();e("#edit-meta").slideToggle("slow",function(){if(t.text()=="Edit Meta Info"){t.text("Cancel")}else{t.text("Edit Meta Info")}})},reveal_edit_readme:function(t,n){n.preventDefault();e("#edit-readme").slideToggle("slow",function(){if(t.text()=="Edit readme.txt"){t.text("Cancel")}else{t.text("Edit readme.txt")}})},resize_image:function(t,n){e("#resize-dimensions").toggle("slow")},export_zip_button:function(t,n){if(e("span#external-notice").text()=="warn"){var r=confirm("Warning: this theme links to external images. If someone else installs your zipped theme the background images won't show.");if(!r){n.preventDefault()}}},delete_file:function(e,t){var n=confirm("Are you sure you want to delete this file?");if(!n){t.preventDefault()}}};t.init();var n={init:function(){var t=e("#tvr-preferences");e("#mq-list").sortable();t.click(function(t){var r=e(t.target);try{i=r.attr("class");if(!i){var i="tvr-undefined"}}catch(s){}if(i.indexOf("add-m-query")>=0){n.add_m_query(r)}else if(i.indexOf("del-m-query")>=0){n.del_m_query(r)}});e("#tvr-preferences").submit(function(){var t=false;e("#mq-list").find("input.m-label, input.m-code").each(function(){if(e(this).val().length==0){e(this).focus();t=true;return false}});if(t){alert("Please complete all media query fields or delete empty ones.");return false}})},add_m_query:function(t){var n=t.attr("rel");var r=e("#unq-base").attr("rel");t.attr("rel",++n);var i=e("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+n);i.find("input").each(function(t){e(this).attr("name",e(this).attr("name").replace("key",r+n))});e("#mq-list").append(i).hide().fadeIn("fast").end().sortable("refresh")},del_m_query:function(e){e.parents("li.mq-row").remove()}};n.init()})