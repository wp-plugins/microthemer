jQuery("html").addClass("js");jQuery(document).ready(function(c){c("#dissect-video, #pref-video").colorbox({iframe:true,innerWidth:980,innerHeight:550});var b={init:function(){var d=c("#tvr-manage");d.click(function(i){var f=c(i.target);try{h=f.attr("class");if(!h){var h="tvr-undefined"}}catch(g){}if(h.indexOf("reveal-add-micro")>=0){b.reveal_add_micro(f,i)}else{if(h.indexOf("reveal-upload-micro")>=0){b.reveal_upload_micro(f,i)}else{if(h.indexOf("delete-micro")>=0){b.delete_micro(f,i)}else{if(h.indexOf("reveal-edit-meta")>=0){b.reveal_edit_meta(f,i)}else{if(h.indexOf("reveal-edit-readme")>=0){b.reveal_edit_readme(f,i)}else{if(h.indexOf("resize-image")>=0){b.resize_image(f,i)}else{if(h.indexOf("export-zip-button")>=0){b.export_zip_button(f,i)}else{if(h.indexOf("delete-file")>=0){b.delete_file(f,i)}}}}}}}}});c("a[rel='bg-image']",d).colorbox()},reveal_add_micro:function(d,f){f.preventDefault();c("#add-micro").slideToggle("slow",function(){if(d.text()=="Create New Settings Pack"){d.text("Cancel")}else{d.text("Create New Settings Pack")}})},reveal_upload_micro:function(d,f){f.preventDefault();c("#upload-micro").slideToggle("slow",function(){if(d.text()=="+ Install New Settings Pack"){d.text("Cancel")}else{d.text("+ Install New Settings Pack")}})},delete_micro:function(d,g){var f=confirm("Are you sure you want to delete this theme?");if(!f){g.preventDefault()}},reveal_edit_meta:function(d,f){f.preventDefault();c("#edit-meta").slideToggle("slow",function(){if(d.text()=="Edit Meta Info"){d.text("Cancel")}else{d.text("Edit Meta Info")}})},reveal_edit_readme:function(d,f){f.preventDefault();c("#edit-readme").slideToggle("slow",function(){if(d.text()=="Edit readme.txt"){d.text("Cancel")}else{d.text("Edit readme.txt")}})},resize_image:function(d,f){c("#resize-dimensions").toggle("slow")},export_zip_button:function(d,g){if(c("span#external-notice").text()=="warn"){var f=confirm("Warning: this theme links to external images. If someone else installs your zipped theme the background images won't show.");if(!f){g.preventDefault()}}},delete_file:function(d,g){var f=confirm("Are you sure you want to delete this file?");if(!f){g.preventDefault()}}};b.init();var a={init:function(){var d=c("#tvr-preferences");c("#mq-list").sortable();d.click(function(i){var f=c(i.target);try{h=f.attr("class");if(!h){var h="tvr-undefined"}}catch(g){}if(h.indexOf("add-m-query")>=0){a.add_m_query(f)}else{if(h.indexOf("del-m-query")>=0){a.del_m_query(f)}}});c("#tvr-preferences").submit(function(){var e=false;c("#mq-list").find("input.m-label, input.m-code").each(function(){if(c(this).val().length==0){c(this).focus();e=true;return false}});if(e){alert("Please complete all media query fields or delete empty ones.");return false}})},add_m_query:function(d){var g=d.attr("rel");var e=c("#unq-base").attr("rel");d.attr("rel",++g);var f=c("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+g);f.find("input").each(function(h){c(this).attr("name",c(this).attr("name").replace("key",e+g))});c("#mq-list").append(f).hide().fadeIn("fast").end().sortable("refresh")},del_m_query:function(d){d.parents("li.mq-row").remove()}};a.init()});