// GruntPackage - v1.0.0 (2015-05-09)
jQuery(document).ready(function($){window.TvrSharedVars={},window.TvrSharedVars.adminUrl=$("#admin-url").attr("rel"),window.TvrSharedVars.totalSecs=parseInt($("#total-sec-count").text()),window.TvrSharedVars.TvrSugCSS={},window.TvrSharedVars.highlightEnabled=!1,window.TvrSharedVars.tmpHighlighting=!1,window.TvrSharedVars.tmpHideHighlighting=!1,window.TvrSharedVars.progCount=0,window.TvrSharedVars.intelli=!1,window.TvrSharedVars.awaitingIFrame=!0,window.TvrSharedVars.cssProps=TvrCSSProps,window.TvrSharedVars.compProps={},window.TvrSharedVars.intelliCompProps={},window.TvrSharedVars.mixedElKey=0,window.TvrSharedVars.g_url="",TvrEditors={};var TvrCom={sT:function(a){a||(a="function"),TvrUi.profiler[a]=[],TvrUi.profiler[a].sT=(new Date).getTime()},eT:function(a,b){a||(a="function"),TvrUi.profiler[a].tE=(new Date).getTime()-TvrUi.profiler[a].sT,b&&TvrCom.elT(a)},elT:function(a){var b="";if(a){var c=TvrUi.profiler[a].tE.toFixed(2);b+=a+" took "+(c/1e3).toFixed(2)+" seconds ("+c+" ms)"}else for(var a in TvrUi.profiler){var c=TvrUi.profiler[a].tE.toFixed(2);b+=a+" took "+c/1e3+" seconds ("+c+" ms)\n"}window.console&&window.console.log&&console.log(b)},hasValue:function(a){return a?!0:!1},isDefined:function(a){return""!==a&&"undefined"!==a&&void 0!==a&&null!==a?!0:!1},isDomEl:function(a){return TvrCom.hasValue(a)&&a.prop("tagName")?!0:!1},ucwords:function(a){return(a+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},readable_name:function(a){return TvrCom.ucwords((a+"").replace(/[_-]/g," "))},pipes_to_array:function(a){var b,c=new Array,d=a.attr("rel").split("|");for(b=0;b<d.length;++b){var e=d[b].split(",");c[e[0]]=parseInt(e[1])}return c},print_r:function(a,b){var c=b||"",d="[object Array]"===Object.prototype.toString.call(a),e=d?"Array\n"+c+"[\n":"Object\n"+c+"{\n";for(var f in a)if(a.hasOwnProperty(f)){var g=a[f],h="",i=Object.prototype.toString.call(g);switch(i){case"[object Array]":case"[object Object]":h=TvrCom.print_r(g,c+"	");break;case"[object String]":h="'"+g+"'";break;default:h=g}e+=c+"	"+f+" => "+h+",\n"}return e=e.substring(0,e.length-2)+"\n"+c,d?e+"]":e+"}"},extract_str:function(a,b){if("gradient"==a){var c=b.split("linear-");if(c[0].indexOf("gradient")>=0)var d=c[0];else if(c[1]&&c[1].indexOf("gradient")>=0)var d=c[1];else var d=""}if("bg-image"==a){var c=b.split("linear-");d=c[0].indexOf("url")<0?"none":TvrCom.basename(c[0]).replace(/\)?"/,"")}return d},basename:function(a){return TvrCom.hasValue(a)?a.split(/[\\/]/).pop().replace(")",""):a},root_rel:function(a){return a.replace(TvrUi.siteUrl,"")},bind_input_labels:function(a){a.each(function(){var a=$(this);this.value=a.attr("data-ph-title"),a.addClass("text-label"),a.bind("focus",function(){this.value==a.attr("data-ph-title")&&(this.value="",a.removeClass("text-label"))}),a.bind("blur",function(){""==this.value&&(this.value=a.attr("data-ph-title"),a.addClass("text-label"))})})},new_name_checks:function(a,b){if("folder"==b)var c=$("#tvr-menu"),d=".section-name";else var c=TvrUi.meta.sectionM,d=".selector-name";if(TvrCom.duplicates(a,c,d))return alert("A "+b+" with that name already exists. Please enter a unique name."),!1;if(""==a||"folder"==b&&"New Folder..."==a)return alert("Please enter a value for the "+b+" name"),!1;var e=[];return e.newNameHuman=a,e.newName=TvrCom.convert_to_param(a),e},duplicates:function(a,b,c,d){var e=!1;return b.find(c).find(".name-text").each(function(){return d&&$(this).closest(".selector-tag").attr("id")==d?!0:void(TvrCom.convert_to_param($(this).text())==TvrCom.convert_to_param(a)&&(e=!0))}),e},resolve_unique_name:function(a,b,c,d,e){if(TvrCom.duplicates(a,b,c,e)){var f=1;do{if(a.match(d)){1==f&&(f=2);var g=a.replace(/Copy \d+/,d+" "+f)}else var g=a+" "+d+" "+f;++f}while(TvrCom.duplicates(g,b,c,e));return g}return a},convert_to_param:function(a){return a=a.replace(/[^a-zA-Z0-9 ]+/g,"").replace("/ {2,}/"," "),a=a.replace(/ /g,"_").toLowerCase()},refresh_sortable:function(){$("#tvr-menu").sortable({cursor:"move",handle:".folder-icon.sortable-icon",update:function(a,b){var c=TvrUi.get_meta(b.item,"section"),d=c.sectionM.prev().attr("id");TvrCom.hasValue(d)?c.section.detach().insertAfter("#"+d.replace("strk","opts")):c.section.detach().prependTo("#tvr-options"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}}).find("ul.selector-sub").sortable({connectWith:"ul.selector-sub",cursor:"move",handle:".selector-icon.sortable-icon",refresh:"",receive:function(a,b){TvrCom.selector_received(a,b)},stop:function(a,b){var c=TvrUi.get_meta(b.item,"selector"),d=c.selectorM.prev().attr("id");TvrCom.hasValue(d)?c.selector.detach().insertAfter("#"+d.replace("strk","opts")):c.selector.detach().prependTo(c.section.find("ul.opts-selectors-sub")),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}})},selector_received:function(a,b){var c=TvrUi.get_meta(b.item,"selector");if(!TvrUi.load_selector(c,"load selector after moving")){var d=TvrUi.get_meta(b.item.closest(".section-tag"),"section");TvrUi.update_count(c.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),TvrUi.update_count(d.sectionM.find(".selector-count-state"),"add",1,"selector","");var e=TvrCom.resolve_unique_name(c.selectorH,d.sectionM,".selector-name","Moved",c.selectorMID);TvrUi.dom_replacements("selector",c.selector.add(c.selectorM),c.sectionSlug,d.sectionSlug,d.sectionH,c.selectorSlug,TvrCom.convert_to_param(e),e,c.selectorM.find(".selector-css-textarea").val()),TvrUi.selInFocusID==c.selectorID&&TvrUi.update_global_vars(TvrUi.get_meta(c.selectorM,"selector"))}},custom_escape_quotes:function(a){var b=a.replace(/"/g,"cus-quot;").replace(/'/g,"cus-#039;");return b},escapeHTML:function(a){return TvrCom.hasValue()?a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},custom_to_non_escaped:function(a){var b=a.replace(/cus-quot;/g,'"').replace(/cus-#039;/g,"'");return b},regular_escape_quotes:function(a){var b=a.replace(/"/g,"&quot;").replace(/'/g,"&#039;");return b},regular_escaped_to_non_escaped:function(a){var b=a.replace(/&quot;/g,'"').replace(/&#039;/g,"'");return b},jquery_escape_quotes:function(a){var b=a.replace(/"/g,'\\"').replace(/'/g,"\\'");return b},jquery_escaped_to_non_escaped:function(a){var b=a.replace(/\\"/g,'"').replace(/\\'/g,"'");return b},custom_to_regular_escape:function(a){var b=a.replace(/cus-/g,"&");return b},sane_decimal:function(a){if(TvrCom.hasValue(a)&&("string"==typeof a||a instanceof String)&&-1!=a.indexOf("px")&&-1!=a.indexOf(".")){var b=a.split("px");return parseFloat(b[0]).toFixed(0)+"px"}return a},isNumber:function(a){return a==parseFloat(a)},isOdd:function(a){return TvrCom.isNumber(a)&&Math.abs(a)%2==1},check_fake:function(a,b){if(!b)var b=a.prev();a.hasClass("fake-radio")&&a.closest(".fake-radio-parent").find('input[type="radio"]').prop("checked",!1).end().find(".fake-radio").removeClass("on"),b.prop("checked",!0),a.addClass("on")},uncheck_fake:function(a,b){if(!b)var b=a.prev();if(a.hasClass("fake-radio"))return!1;if(!b)var b=a.prev();b.prop("checked",!1),a.removeClass("on")},toggle_radio_checkbox:function(a){if(a.hasClass("toggle-checked-folders"))TvrUi.toggle_multi_checkboxes(a);else{var b=a.prev();b.is(":checked")?TvrCom.uncheck_fake(a,b):TvrCom.check_fake(a,b)}}},TvrUi={meta:{},profiler:[],debugCount:0,wasOpen:!1,leftMenu:$("#v-left-controls").hasClass("show")?!0:!1,placeholderFrame:!0,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:$("#ajaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,fullWidth:$("body").width(),iframe_slider_set:!1,mqMin:TvrCom.pipes_to_array($("#tvr-min-store")),mqMax:TvrCom.pipes_to_array($("#tvr-max-store")),allDevicesWidth:TvrCom.hasValue($("#all_devices_default_width").attr("rel"))?$("#all_devices_default_width").attr("rel").replace("px",""):$("body").width(),totalSels:parseInt($("#total-sel-count").text()),trial:"1"==$("#plugin-trial").attr("rel")?!1:!0,trialNotice:"Please validate your purchase to unlock the full program! \nWith the free trial you are limited to editing or creating 9 Selectors.",gFontTarget:Object(),selsToLoad:0,totalToLoad:0,typingTimer:0,doneTypingInterval:700,saveInProgress:!1,reSave:!1,siteUrl:$("#site-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:$("#tooltip_delay").attr("rel").toLowerCase(),edgeMode:$("#edge-mode").attr("rel"),expanded:function(a){if("main_menu"==a)var b=$("#tvr-main-menu");else if("quick_section"==a)var b=$("#sec-in-focus");else if("quick_selector"==a)var b=$("#sel-in-focus");else if("mq"==a){var c=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(c))return!1;var b=c.find("span.add-mq")}return b.hasClass("on")?!0:!1},init:function(){$("#code-editors-wrap").find(".css-code-wrap").resizable({start:function(){},resize:function(a,b){var c=b.size.height-b.originalSize.height;$("#v-frontend-wrap").css("height",TvrUi.frameHeight-c)},stop:function(){TvrUi.toolbar_adjusted()}}),"native"!=TvrUi.tooltipDelay&&($("body").click(function(a){var b=$(a.target);(b.hasClass("ui-tooltip")||b.hasClass("ui-tooltip-content"))&&TvrUi.clean_tooltips()}),$(document).tooltip({position:{my:"center top",at:"center bottom+6",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:TvrUi.tooltipDelay},open:function(a,b){var c=b.tooltip,d=$(a.originalEvent.target||a.originalEvent.srcElement).closest($(this).tooltip("option","items"));c.append('<span class="tp-pointer"></span>');var e=c.find(".tp-pointer");TvrCom.isDomEl(d)?e.position({my:"center center",at:"center bottom+8",of:d}):e.hide()}}),$("#v-left-controls").find(".v-left-button").not(".reset-tools").tooltip({position:{my:"left center",at:"left+48 center"},hide:!1,tooltipClass:"left-toolbar",show:{effect:"none",duration:0,delay:TvrUi.tooltipDelay},open:function(a,b){var c=b.tooltip;c.append('<span class="tp-pointer"></span>');var d=c.find(".tp-pointer"),e=$(a.originalEvent.target||a.originalEvent.srcElement).closest($(this).tooltip("option","items"));d.position({my:"left center",at:"left+45 center",of:e})}}));$.ui.autocomplete.prototype._renderMenu;$.ui.autocomplete.prototype._renderMenu=function(a,b){var c=this;$.each(b,function(b,d){c._renderItemData(a,d)}),$(a).find("li").each(function(){var a=$(this);TvrCom.isDomEl(a.find("a"))||a.addClass("empty ui-menu-item")})},$("input.combobox").live("focus",function(){var a=$(this),b=TvrCombo[a.attr("rel")];b||(b=[]),a.autocomplete({source:b,delay:0,minLength:0,appendTo:a.closest(".input-wrap"),open:function(){if(TvrUi.clean_tooltips(),a.removeAttr("aria-describedby"),a.next(".combo-arrow").addClass("on"),a.hasClass("property-input")){var b=TvrUi.get_meta(a,"property");b.property.find(".comp-mixed-table").addClass("manual-menu-showing")}},select:function(b,c){if(a.val(c.item.value),a.parent(".input-wrap").addClass("manual-val").find(".comp-style").addClass("hidden").end().find(".combo-arrow").removeClass("on"),a.hasClass("property-input"))if(a.hasClass("tvr-font-select")){var d=a.closest(".field-wrap").siblings(".tvr-font-custom");TvrUi.gFontTarget=d.find(".property-input"),"Google Font..."==c.item.value?TvrUi.show_google_fonts(d):TvrUi.hide_google_fonts(a,d)}else a.hasClass("img_display")&&(TvrCom.hasValue(c.item.value)?"none"==c.item.value&&TvrUi.update_bg_image(a,c.item.value):TvrUi.clear_bg_image(a)),TvrUi.ajax_save_settings("save");a.blur()},search:function(){a.addClass("adjusted-corner-radius")},close:function(){if(a.removeClass("adjusted-corner-radius").next(".combo-arrow").removeClass("on"),a.hasClass("property-input")){var b=TvrUi.get_meta(a,"property");b.property.find(".comp-mixed-table").removeClass("manual-menu-showing")}}})}),$("span.combo-arrow").live("mousedown",function(){$(this).siblings(".ui-menu").is(":visible")&&(TvrUi.wasOpen=!0)}),$("span.combo-arrow").live("click",function(){var a=$(this),b=a.prev();if("input"==b.prop("tagName").toLowerCase())var c=b;else var c=b.find("input");return TvrUi.wasOpen?(a.removeClass("on"),void(TvrUi.wasOpen=!1)):(a.addClass("on"),void c.focus().autocomplete("search",""))}),TvrUi.reset_global_vars(),$(window).keypress(function(a){return 115==a.which&&a.ctrlKey||19==a.which?(a.preventDefault(),!1):!0}),$(document).keydown(function(a){return 83==a.which&&1==a.ctrlKey?(TvrUi.ajax_save_settings("save"),a.preventDefault(),!1):TvrCom.hasValue($(a.target))&&$(a.target).attr("class")&&$(a.target).attr("class").indexOf("strictly-dropdown")>-1?(a.preventDefault(),!1):void 0}),TvrCom.bind_input_labels($("#add-new-section").find("input").add($("#wizard_folder"))),TvrCom.refresh_sortable(),$(".scrollable-area").mCustomScrollbar({theme:"dark-3",live:!0,scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}});var a=$("#tvr-ui");a.dblclick(function(a){var b=$(a.target);if(b.hasClass("autofillable")){var c=b.val(),d=b.attr("data-autofill"),e=TvrUi.get_meta(b,"group");e.group.find('input[data-autofill="'+d+'"]').each(function(){var a=$(this);a.attr("value",c),a.hasClass("color"),TvrUi.adjust_comp_span(a,"after")}),TvrUi.ajax_save_settings("save")}}),a.delegate("input.color","change",function(){TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span($(this),"after")}),a.delegate("input.property-input","keyup",function(a){$(a.target).attr("class").indexOf("img_display")<0&&(TvrUi.typingTimer&&clearTimeout(TvrUi.typingTimer),TvrUi.typingTimer=setTimeout(TvrUi.done_typing,TvrUi.doneTypingInterval)),TvrUi.adjust_comp_span($(this),"after")}),a.delegate("select.tvr-font-select","change",function(){var a=$(this),b=a.parent(".field-wrap").siblings(".tvr-font-custom");TvrUi.gFontTarget=a.parent("div.field-wrap").siblings(".tvr-font-custom").find(".property-input"),"Google Font..."==a.val()?(b.show("fast"),$.colorbox({href:$("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),TvrUi.font_changed(TvrUi.gFontTarget)):(TvrUi.gFontTarget.val("").prop("val",""),b.hide(),TvrUi.font_changed(a))}),$("body").delegate(".property-input, tr.mixed-val, .sug-sel, .ui-tooltip","mouseenter",function(){var a=$(this);if(a.hasClass("ui-tooltip")&&TvrUi.clean_tooltips(),a.hasClass("property-input"))TvrUi.adjust_comp_span(a,"hover");else if(a.hasClass("mixed-val")||a.hasClass("sug-sel")&&!a.parent().hasClass("in-focus")){if(a.hasClass("mixed-val")){window.TvrSharedVars.mixedElKey=a.attr("rel");var b="mixed-hover";window.TvrSharedVars.highlightEnabled||(window.TvrSharedVars.tmpHighlighting=!0,TvrUi.toggle_highlighting())}else{window.TvrSharedVars.intelli_css=a.text(),$("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere");var b="intelli"}TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight(b)}}),a.delegate(".property-input, tr.mixed-val, .sug-sel","mouseleave",function(){var a=$(this);if(a.hasClass("property-input"))TvrUi.adjust_comp_span(a,"after");else if(a.hasClass("mixed-val"))TvrUi.return_normal_highlighting("reg");else if(a.hasClass("sug-sel")){var b=$("#code-suggestions").find("li.in-focus");b.removeClass("hover-elsewhere"),window.TvrSharedVars.intelli_css=b.find("textarea").text(),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("intelli")}}),$("#mq-list").sortable(),$("#edit-media-queries-form").submit(function(){var a=!1;return $("#mq-list").find("input.m-label, input.m-code").each(function(){return 0==$(this).val().length?($(this).focus(),a=!0,!1):void 0}),a?(alert("Please complete all media query fields or delete empty ones."),!1):void 0}),TvrUi.load_visual_view($("#load-visual")),$visCon=$("#tvr"),$visCon.click(function(a){var b=$(a.target);try{if(c=b.attr("class"),!c)var c="tvr-undefined"}catch(d){}if(TvrUi.close_all_expanded(b,c),c.indexOf("fake-checkbox")>=0||c.indexOf("fake-radio")>=0)TvrCom.toggle_radio_checkbox(b);else if("email-error"==b.attr("id"))TvrUi.email_error_report();else if(c.indexOf("property-input")>=0)TvrUi.clean_tooltips();else if(c.indexOf("main-menu-tip-trigger")>=0){var e=$("#tvr-main-menu");e.hasClass("on")?TvrUi.hide_main_menu():TvrUi.show_main_menu(e)}else if(c.indexOf("sec-in-focus")>=0||c.indexOf("sel-in-focus")>=0)TvrUi.quick_edit(b);else if(c.indexOf("sec-in-focus-arrow")>=0||c.indexOf("sel-in-focus-arrow")>=0);else if(c.indexOf("edit-css-code")>=0)TvrUi.toggle_hand_css(b);else if("toggle-left-menu"==b.attr("id"))TvrUi.toggle_left_menu();else if(c.indexOf("m-logo")>=0)window.open(b.attr("rel"),"_blank");else if(c.indexOf("save-interface")>=0)TvrUi.ajax_save_settings("save");else if(c.indexOf("show-dialog")>=0)TvrUi.show_dialog(b);else if(c.indexOf("close-dialog")>=0||c.indexOf("tvr-dialog")>=0)TvrUi.close_dialog(b);else if(c.indexOf("back-to-wordpress")>=0);else if(c.indexOf("add-m-query")>=0)TvrUi.add_m_query(b);else if(c.indexOf("del-m-query")>=0)TvrUi.del_m_query(b);else if(c.indexOf("reveal-hidden-form-opts")>=0)TvrUi.reveal_form_opts(b);else if("ui-reset"==b.attr("id"))TvrUi.ui_reset(b);else if("clear-styles"==b.attr("id"))TvrUi.clear_styles(b);else if(c.indexOf("export-dialog-button")>=0)TvrUi.export_settings();else if(c.indexOf("ui-import")>=0)TvrUi.import_settings();else if(c.indexOf("reveal-unlock")>=0)$("#tvr_validate_form").addClass("show"),b.parent("p").hide();else if(c.indexOf("explain-link")>=0)TvrUi.toggle_help_info(b);else if(c.indexOf("restore-link")>=0)TvrUi.restore_rev(b);else if(c.indexOf("folder-menu-arrow")>-1||c.indexOf("selector-count-state")>-1||c.indexOf("folder-count-wrap")>-1||c.indexOf("folder-state-count")>-1)TvrUi.toggle_folder(b);else if(c.indexOf("new-section-input")>=0);else if(c.indexOf("new-section-add")>=0)TvrUi.add_section(b);else if(c.indexOf("toggle-rename-section")>=0)TvrUi.toggle_rename_section(b);else if(c.indexOf("cancel-rename-section")>=0)TvrUi.toggle_rename_section(b);else if(c.indexOf("rename-button")>=0)TvrUi.action_rename_section(b);else if(c.indexOf("copy-section")>=0)TvrUi.copy_section(b);else if(c.indexOf("delete-section")>=0)TvrUi.delete_section(b);else if(c.indexOf("reveal-add-selector")>=0)TvrUi.toggle_add_selector(b);else if(c.indexOf("cancel-add-selector")>=0)TvrUi.toggle_add_selector(b);else if(c.indexOf("add-selector")>=0)TvrUi.add_selector(b);else if(c.indexOf("toggle-modify-selector")>=0||c.indexOf("cancel-edit-selector")>=0)TvrUi.toggle_modify_selector(b);else if(c.indexOf("edit-selector")>=0)TvrUi.action_modify_selector(b);else if(c.indexOf("copy-selector")>=0)TvrUi.copy_selector(b);else if(c.indexOf("delete-selector")>=0)TvrUi.delete_selector(b);else if(c.indexOf("change-selector")>=0)TvrUi.tvr_iterate_selectors_v(b);else if(c.indexOf("scroll-buttons")>=0)TvrUi.quick_nav(b);else if(c.indexOf("cancel-wizard")>=0)TvrUi.hide_wizard();else if(c.indexOf("adv-main-label")>=0)TvrUi.toggle_adv_wizard();else if(c.indexOf("refine-button")>=0&&c.indexOf("disabled")<0)TvrUi.switch_html_element(b);else if(c.indexOf("wizard-add")>=0)TvrUi.wizard_new_selector(b);else if("toggle-highlighting"==b.attr("id"))TvrUi.toggle_highlighting();else if(c.indexOf("pg-icon")>=0)TvrUi.pg_icon_pressed(b);else if(c.indexOf("css-tab")>=0&&c.indexOf("active")<0)TvrUi.css_tab_pressed(b);else if(c.indexOf("adv-tab")>=0&&c.indexOf("active")<0)TvrUi.adv_tab_pressed(b);else if(c.indexOf("mq-tab")>=0&&c.indexOf("css-tab")<0&&c.indexOf("adv-tab")<0&&c.indexOf("active")<0)TvrUi.mq_tab_pressed(b);else if(c.indexOf("add-mq-icon")>=0)TvrUi.show_add_mq(b);else if(c.indexOf("mq-add")>=0&&!b.closest(".mq-button").hasClass("on"))TvrUi.add_property_group(b);else if(c.indexOf("mq-clear")>=0)TvrUi.clear_pg_fields(b);else if(c.indexOf("mq-remove")>=0&&b.closest(".mq-button").hasClass("on"))TvrUi.remove_property_group(b);else if(c.indexOf("mq-remove-all")>=0)TvrUi.remove_property_group(b,"delete-all");else if(c.indexOf("tvr-image-upload")>=0)TvrUi.launch_img_uploader(b);else if(c.indexOf("clear-bg-image")>=0)TvrUi.clear_bg_image(b);else if(c.indexOf("combobox")>=0)TvrUi.combobox_clicked(b);else if(c.indexOf("g-font")>=0){var f=b.closest(".field-wrap");TvrUi.gFontTarget=f.find(".property-input"),TvrUi.show_google_fonts(f)}else c.indexOf("v-mq-button")>=0&&c.indexOf("active")<0?TvrUi.update_mq_button(b):c.indexOf("css-info")>=0?TvrUi.load_css_ref(b):c.indexOf("input-icon-toggle")>=0?TvrUi.input_icon_toggle(b):c.indexOf("css-group-heading")>=0||c.indexOf("accordion-menu-arrow")>=0||c.indexOf("text-for-group")>=0?(b=b.closest(".css-group-heading"),TvrUi.update_accordion(b,$("#html-computed-css"))):c.indexOf("sug-sel")>=0&&TvrUi.sug_css_clicked(b)})},show_main_menu:function(a){return TvrUi.itemAlreadyExpanded?!1:void a.addClass("on expanded")},hide_main_menu:function(){TvrUi.clean_tooltips(),$("#tvr-main-menu").removeClass("on expanded")},quick_edit:function(a){if(TvrUi.itemAlreadyExpanded)return!1;var b=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");$("#main-menu-popdown").addClass("bye-for-now"),b.sectionM.addClass("hello-me");var c=b.sectionM.find(".menu-arrow"),d=b.selectorM.find(".edit-selector-form");if(c.hasClass("on")||TvrUi.toggle_folder(c),a.hasClass("sec-in-focus")){var e=b.sectionM;d.hasClass("show")&&TvrUi.toggle_modify_selector(d),b.sectionM.find(".folder-icon").removeClass("sortable-icon")}else{var e=b.selectorM;d.hasClass("show")||TvrUi.toggle_modify_selector(d),b.sectionM.addClass("goodbye-section"),b.selectorM.addClass("hello-me"),b.selectorM.find(".selector-icon").removeClass("sortable-icon")}e.addClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar({theme:"dark-3",scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}).append('<div class="hide-top-shadow"></div>'),a.addClass("on")},close_quick_edit:function(){TvrUi.clean_tooltips();var a=$("#main-menu-popdown"),b=a.find(".quick-edit-mode");if(b.hasClass("section-tag"))var c="folder",d=TvrUi.get_meta(b,"section"),e=d.sectionM;else{var c="selector",d=TvrUi.get_meta(b,"selector"),f=d.selectorM.find(".edit-selector-form");f.hasClass("show")&&f.removeClass("show");var e=d.sectionM.add(d.selectorM)}b.find("."+c+"-icon").addClass("sortable-icon"),b.removeClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar("destroy");var g=d.sectionM.find(".menu-arrow");g.hasClass("on")&&TvrUi.toggle_folder(g),$("#current-selector").find(".on").removeClass("on"),e.removeClass("hello-me goodbye-section"),a.removeClass("bye-for-now")},close_all_expanded:function(a){return TvrUi.itemAlreadyExpanded=a.hasClass("on")?!0:!1,!TvrCom.isDomEl(a.parents(".expanded"))||a.hasClass("add-mq-icon")||a.hasClass("change-selector")?void(TvrUi.expanded("main_menu")?TvrUi.hide_main_menu():TvrUi.expanded("quick_section")||TvrUi.expanded("quick_selector")?TvrUi.close_quick_edit():TvrUi.expanded("mq")&&TvrUi.hide_add_mq()):!1},clean_tooltips:function(){if("native"==TvrUi.tooltipDelay)return!1;if("native"!=TvrUi.tooltipDelay){var a=$(document).data("ui-tooltip");if(TvrCom.hasValue(a))for(var b in a.tooltips)$("#"+b).remove()}},reset_global_vars:function(){TvrUi.selInFocusID="",window.TvrSharedVars.curSelCSS="#no-element",window.TvrSharedVars.intelli_css="#no-element",window.TvrSharedVars.pgInFocus="",window.TvrSharedVars.compPgInFocus=""},update_global_vars:function(a){TvrUi.selInFocusID=a.selectorID,window.TvrSharedVars.curSelCSS=TvrCom.custom_escape_quotes(a.selectorM.find(".selector-css-textarea").val()),$("#last-edited-selector").val(TvrUi.selInFocusID),$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&last_viewed_selector="+TvrUi.selInFocusID,function(){});$("#current-selector");if($("#sec-in-focus").hasClass("on"))var b="on";else var b="";if($("#sel-in-focus").hasClass("on"))var c="on";else var c="";$("#current-selector").html('<span class="breadcrumb-arrow first-breadcrumb sec-in-focus-arrow">&raquo;</span><span id="sec-in-focus" class="sec-in-focus '+b+'" title="Quick Edit - Current Folder">'+a.sectionH+'</span> <span class="breadcrumb-arrow  sel-in-focus-arrow">&raquo;</span> <span id="sel-in-focus" class="sel-in-focus '+c+'" title="Quick Edit - Current Selector">'+a.selectorH+"</span>")},menu_object:function(a){return $("#"+a.replace("opts","strk"))},section_slug:function(a){var b=TvrUi.get_meta($("#"+a),"selector");return b.sectionSlug},allowed_action:function(a,b){var c=!1;if(!TvrUi.trial)return!0;if("Edit Sel"==b&&TvrCom.isDomEl(a.closest(".trial-disabled")))var c=!0;if("Add Sel"==b&&TvrUi.totalSels>=9)var c=!0;return c?(alert(TvrUi.trialNotice),!1):!0},load_css_ref:function(a){TvrUi.show_dialog(a)},font_changed:function(a){TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span(a,"after")},show_google_fonts:function(a){a.show("fast"),$.colorbox({href:$("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),TvrUi.font_changed(TvrUi.gFontTarget)},hide_google_fonts:function(a,b){TvrUi.gFontTarget.val("").prop("val",""),b.hide(),TvrUi.font_changed(a)},insert_google_font:function(a){$.colorbox.close(),TvrUi.gFontTarget.val(a).focus(),TvrUi.font_changed(TvrUi.gFontTarget)},launch_img_uploader:function(a){return wp.media.editor.send.attachment=function(b,c){TvrUi.update_bg_image(a,c.url)},wp.media.editor.open(a),!1},update_bg_image:function(a,b){var c=TvrUi.get_meta(a,"property");c.property.find(".image-url-store").val(b),c.property.find(".img_display").val(TvrCom.basename(b)),TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span(c.property.find(".img_display"),"after")},clear_bg_image:function(a){TvrUi.update_bg_image(a,"")},toggle_hand_css:function(a){a.hasClass("on")?TvrUi.hide_hand_css(a):TvrUi.show_hand_css(a),TvrUi.toolbar_adjusted()},show_hand_css:function(a){var b=$("#visual-view");b.hasClass("show-wizard")&&TvrUi.hide_wizard(),b.addClass("show-code-editor"),a.addClass("on"),!TvrEditors.setUp},hide_hand_css:function(a){$("#visual-view").removeClass("show-code-editor"),a.removeClass("on")},set_up_editors:function(){var a=$("#editors-list").attr("rel").split("|");for(var b in a)alert(a[b]),TvrEditors[a[b]]=ace.edit("custom-css-"+a[b]),TvrEditors[a[b]].setTheme("ace/theme/chrome"),TvrEditors[a[b]].getSession().setMode("ace/mode/css"),TvrEditors[a[b]].setShowPrintMargin(!1),TvrEditors[a[b]].getSession().on("change",function(){$("#custom-css-"+a[b]).addClass("changed")})},input_icon_toggle:function(a){var b=a.attr("data-input-type");if("important"==b){var c=TvrUi.get_meta(a,"property"),d=c.property.find(".property-input").attr("name");if(a.hasClass("imp-mq"))var e=d.replace("[non_section]","[non_section][important]").replace("[styles]","");else var e=d.replace("tvr_mcth","tvr_mcth[non_section][important]").replace("[styles]","")}else if("pie"==b||"boxsizing"==b)var c=TvrUi.get_meta(a,"selector"),e=c.selectorM.find("input.register-selector").attr("name")+"["+b+"]";if("off"==a.attr("rel")){var f='<input class="'+b+'-tracker" type="hidden" name="'+e+'" value="1" />';a.attr("rel","on").addClass("active").before(f)}else"on"==a.attr("rel")&&a.attr("rel","off").removeClass("active").prev("."+b+"-tracker").remove();TvrUi.ajax_save_settings("save")},get_meta:function(a,b){TvrUi.meta={};var c=["stub","section","selector","group","property"];for(var d in c)if(c[d]==b){if(a.attr("class")&&a.attr("class").indexOf(b+"-tag")>=0)var e=a;else var e=a.closest("."+b+"-tag");var f=e.attr("id"),g=f.split("-")}var h="";for(var i in g)if(0!=i&&5!=i)if(b=c[i],h+="-"+g[i],"property"==b&&(h+="-"+g[5],"all"==g[5]&&(h+="-devices")),TvrUi.meta[b]=$("#opts"+h),TvrUi.meta[b+"M"]=$("#strk"+h),TvrUi.meta[b+"Slug"]=g[i],"section"==b)TvrUi.meta[b+"T"]=$(TvrUi.meta[b+"M"]).find("input.section-tracker"),TvrUi.meta[b+"H"]=$(TvrUi.meta.sectionM).find(".section-display-name").val(),TvrUi.meta[b+"ID"]="opts-"+TvrUi.meta.sectionSlug,TvrUi.meta[b+"MID"]="strk-"+TvrUi.meta.sectionSlug;else if("selector"==b){var j=$(TvrUi.meta.selectorM).find(".selector-label").val().split("|");TvrUi.meta[b+"T"]=$(TvrUi.meta[b+"M"]).find("input.selector-tracker"),TvrUi.meta[b+"H"]=j[0],TvrUi.meta[b+"ID"]="opts-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug,TvrUi.meta[b+"MID"]="strk-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug}else"group"==b&&(TvrUi.meta[b+"H"]=TvrCom.ucwords(TvrUi.meta[b+"Slug"]),TvrUi.meta[b+"ID"]="opts-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug+"-"+TvrUi.meta.groupSlug,TvrUi.meta[b+"MID"]="strk-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug+"-"+TvrUi.meta.groupSlug);return TvrUi.meta},jscolor_bind:function($obj){for(var matchClass=new RegExp("(^|\\s)("+mcthmr_jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=$obj.find("input.color"),i=0;i<e.length;i+=1){var m;if((!e[i].color||"ffffff"==e[i].color)&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3])try{eval("prop="+m[3])}catch(eInvalidProp){}e[i].color=new mcthmr_jscolor.color(e[i],prop)}}},update_count:function(a,b,c,d,e){TvrCom.hasValue(e)||(e=0);var f=parseInt(a.attr("rel"));if("add"==b)var g=f+parseInt(c);else if("subtract"==b)var g=f-parseInt(c);if(a.attr("rel",g),"section"!=d){if(0==f){a.after(' <span class="count-wrap">(<span class="state-count"></span>)</span>')}if(0==g){a.next("span").remove()}else a.next("span").find(".state-count").text(parseInt(g))}if("section"==d){var h=$("#total-sec-count"),i=parseInt(h.text());g>f?(window.TvrSharedVars.totalSecs=parseInt(i+c),h.text(window.TvrSharedVars.totalSecs),TvrUi.totalSels=TvrUi.totalSels+parseInt(e),$("#total-sel-count").text(parseInt(TvrUi.totalSels))):(window.TvrSharedVars.totalSecs=parseInt(i-c),h.text(window.TvrSharedVars.totalSecs),TvrUi.totalSels=TvrUi.totalSels-parseInt(e),$("#total-sel-count").text(parseInt(TvrUi.totalSels)))}else if("selector"==d){var j=$("#total-sel-count"),k=parseInt(j.text());g>f?(TvrUi.totalSels=parseInt(k+c),j.text(TvrUi.totalSels)):(TvrUi.totalSels=parseInt(k-c),j.text(TvrUi.totalSels))}TvrUi.toggle_enabled_buttons()},com_data_loading:function(a,b){a.find("."+b+"-row").append($("#loading-gif-template").clone().removeAttr("id")),TvrUi.update_prog_indicator("plus","Loading Style Options...")},com_data_finished_loading:function(a,b){a.find("img.ajax-loader").remove(),TvrUi.update_prog_indicator("minus",b)},ajax_load_ui_data:function(a,b,c,d,e,f,g,h){TvrUi.dataLoading=!0,TvrUi.log_action(b,"data-load");var i=$("#ui-nonce").text(),j="admin.php?page=tvr-microthemer.php",k="action=tvr_microthemer_ui_load_styles&tvr_load_section="+d;k+="&tvr_load_type="+f,k+="&_wpnonce="+i;k+="&tvr_load_selector="+e,$.ajax({type:"GET",url:j,async:!0,data:k,timeout:2e4,error:function(a,c){TvrUi.com_data_finished_loading(b,["Options failed to load","<p>"+TvrUi.handle_ajax_error(a,c)+'</p><p>The styling options failed to load into the interface. This sometimes happens if WordPress silently logs you out or because your "nonce" expires as a result of inactivity. Please refresh the page and try to log back in if necessary.</p>'])},success:function(d){var e=$(d).find("#tmp-wrap").html();if(a.append(e),TvrUi.jscolor_bind(a),c.val(2),3!=g){if(TvrUi.unlog_action(b,"data-load"),TvrUi.com_data_finished_loading(b),"load selector before modifying"==h&&TvrUi.toggle_modify_selector(b.find(".edit-icon")),"load selector before iterating"==h&&TvrUi.tvr_iterate_selectors_v(b),"load selector before copying"==h&&TvrUi.copy_selector(b),"load selector after moving"==h){var f={item:b};TvrCom.selector_received({},f)}}else--TvrUi.selsToLoad,0==TvrUi.selsToLoad&&(TvrUi.unlog_action(b,"all-sels-loading"),"sec rename, load styles discretely"==h&&TvrUi.toggle_rename_section(b.find(".edit-icon")),"sec copy, load styles discretely"==h&&TvrUi.copy_section(b.find(".copy-icon")),TvrUi.com_data_finished_loading(b))},complete:function(){TvrUi.unlog_action(b,"data-load"),TvrUi.dataLoading=!1}})},ajax_load_revisions_table:function(){TvrUi.update_prog_indicator("plus","Loading Revisions Table...");var a=$("#revisions-url").attr("rel");$.ajax({type:"GET",url:a,async:!0,timeout:2e4,error:function(a,b){TvrUi.update_prog_indicator("minus",["Revisions failed to load","<p>"+TvrUi.handle_ajax_error(a,b)+"</p>"])},success:function(a){var b=$(a).find("#tmp-wrap").html();$("#revision-area").html(b),TvrUi.update_prog_indicator("minus")},complete:function(){}})},ajax_load_css:function(){TvrUi.update_prog_indicator("plus","Retrieving CSS...");

var a=$("#active-styles-url").attr("rel")+"?nocache="+(new Date).getTime();$.ajax({type:"GET",url:a,async:!0,timeout:2e4,error:function(a,b){TvrUi.update_prog_indicator("minus",["CSS failed to load","<p>"+TvrUi.handle_ajax_error(a,b)+"</p>"])},success:function(a){$("#generated-css").html(a),TvrUi.update_prog_indicator("minus")},complete:function(){}})},ajax_load_external_js:function(a,b){TvrUi.update_prog_indicator("plus","Loading Javascript...");var c=$("#plugin-url").attr("rel")+"js/"+a;$.getScript(c).done(function(){"ACE code editor script"==b&&TvrUi.show_hand_css($("#edit-css-code")),TvrUi.update_prog_indicator("minus")}).fail(function(a,c){TvrUi.update_prog_indicator("minus",["Script failed to load","<p>The "+b+" failed to load.</p><p>"+TvrUi.handle_ajax_error(a,c)+"</p>"])})},ui_reset:function(){var a=confirm("Are you sure you want to reset all settings?");if(!a)return!1;var b,c,d,e,f;b="reset",c=$("#ui-url").attr("rel"),d=["Resetting empty folders..."],e="GET",f=$("#resetUrl").attr("rel"),TvrUi.general_ajax_submission(b,c,d,e,f)},clear_styles:function(){var a=confirm("Are you sure you want to clear all styles? Note: The page will reload, so please save any unsaved folders/selectors first (Use Control+S keyboard shortcut to save).");if(!a)return!1;var b,c,d,e,f;b="clear",c=$("#ui-url").attr("rel"),d=["Clearing styles..."],e="GET",f=$("#clearUrl").attr("rel"),TvrUi.general_ajax_submission(b,c,d,e,f)},restore_rev:function(a){var b=confirm("Are you sure you want to restore previous settings?");if(!b)return!1;var c,d,e,f,g;c="restore",d=$("#ui-url").attr("rel"),e=["Restoring settings..."],f="GET",g=a.attr("rel"),TvrUi.general_ajax_submission(c,d,e,f,g)},update_code_editor_textareas:function(){$("#code-editors-wrap").find("pre.changed").each(function(){var a=$(this),b=a.attr("rel"),c=TvrEditors[b].getValue();a.prev("textarea").val(c)})},ajax_save_settings:function(a){if(TvrUi.saveInProgress)return TvrUi.reSave=!0,!1;TvrUi.saveInProgress=!0;var b=$("#ui-url").attr("rel");TvrUi.update_prog_indicator("plus","Saving Settings..."),TvrUi.update_code_editor_textareas();$("#tvr_microthemer_ui_serialised");$("#tvr-serialised-data").val($("#tvr_microthemer_ui_save, #microthemer_ui_settings_export").serialize()),$.ajax({type:"POST",url:b,data:$("#tvr_microthemer_ui_serialised").serialize(),timeout:2e4,error:function(a,b){TvrUi.reSave=!1,TvrUi.update_prog_indicator("minus",["Save error","<p>"+TvrUi.handle_ajax_error(a,b)+"</p>"])},success:function(b){TvrUi.reSave&&(TvrUi.reSave=!1,TvrUi.saveInProgress=!1,TvrUi.ajax_save_settings("save"));var c=$(b);TvrUi.update_prog_indicator("minus"),TvrUi.update_prog_indicator("plus","Refreshing Frontend Styles..."),window.TvrSharedVars.g_url=c.find("#google-url-to-refresh").text(),TvrUi.iframe_functions_loaded()?window.frames.viframe.TvrExportVars.refreshCSS():window.TvrSharedVars.awaitingIframeReloadAfterSave=!0;var d=c.find("#microthemer-notice").html();if(null==d){var e,f=$("#log-item-template").clone().removeAttr("id");jQuery.each(jQuery.browser,function(a,b){e+=a+" : "+b+"\n"}),$("#error-report-form").find('textarea[name="tvr_php_error"]').val(b).end().find('textarea[name="tvr_serialised_data"]').val($("#tvr-serialised-data").val()).end().find('textarea[name="tvr_browser_info"]').val(e)}else{var f=$(d).find("li.tvr-message"),g=c.find(".script-feedback");$("#script-feedback").html(g)}if($("#full-logs").find(".logs").html(f),TvrUi.update_short_status(),"view-css"==a&&TvrUi.ajax_load_css(),"export"==a){var h=$("#sanit-export-name").text();h&&(TvrUi.update_packs_obj(TvrCom.readable_name(h)),$("#sanit-export-name").text("")),TvrUi.reload_iframe("manage-design-packs",!1),TvrUi.close_dialog()}},complete:function(){TvrUi.saveInProgress=!1}})},update_packs_obj:function(a){TvrCombo.directories[TvrCombo.directories.length]=a},handle_ajax_error:function(a,b){return 0==a.status?"Connection Error. Request Failed. Please Try again.":404==a.status?"Requested URL not found.":500==a.status?"Internel Server Error.":"parsererror"==b?"Error.\nParsing JSON Request failed.":"timeout"==b?"Request Timed out.":"Unknow Error.\n"+a.responseText},email_error_report:function(){TvrUi.update_prog_indicator("plus","Sending error report...");var a=$("#ui-nonce").text(),b=$("#ui-url").attr("rel");b+="&action=tvr_error_email&_wpnonce="+a;var c=$("#error-report-form").serialize();$.ajax({type:"POST",url:b,data:c,timeout:2e4,error:function(a,b){TvrUi.update_prog_indicator("minus",["Error sending failed","<p>"+TvrUi.handle_ajax_error(a,b)+"</p>"])},success:function(a){TvrUi.update_prog_indicator("minus");var b=$(a),c=b.find("#microthemer-notice").html();if(c)var d=$(c).find("li.tvr-message");$("#full-logs").find(".logs").html(d),TvrUi.update_short_status()}})},show_dialog:function(a){TvrUi.close_dialog();var b=a.attr("rel");if("not-yet"==b)return!1;if($("#"+b+"-dialog").addClass("show"),"import-from-pack"==b&&TvrCom.hasValue(a.attr("data-pack-name"))&&$("#import_from_pack_name").val(a.attr("data-pack-name")),"export-to-pack"==b){var c="";$("#tvr-menu").find(".section-tag").each(function(){var a=TvrUi.get_meta($(this),"section"),b=parseInt(a.sectionM.find(".selector-count-state").attr("rel")),d="",e="";b>0&&(d='checked="checked"',e="on"),c+='<li><input type="checkbox" name="export_sections['+a.sectionSlug+']" '+d+' /> <span class="fake-checkbox '+e+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+a.sectionH+"</span></li>"}),$("#available-folders").html(c),TvrUi.update_code_editor_textareas();var d=$("#custom-css");$("#hand-css-area").find("textarea.hand-css-textarea").each(function(){var a=$(this),b=d.find(".custom-"+a.attr("id"));TvrCom.hasValue(a.val())?TvrCom.check_fake(b):TvrCom.uncheck_fake(b)}),$("#export_to_pack").val(1),$("#export_pack_name").val("")}"display-css-code"==b&&TvrUi.ajax_save_settings("view-css"),"display-revisions"==b&&TvrUi.ajax_load_revisions_table(),("manage-design-packs"==b||"program-docs"==b)&&TvrUi.reload_iframe(b,a)},close_dialog:function(){$("#tvr").find("div.tvr-dialog").removeClass("show"),$("#export_to_pack, #new_pack").val(0)},reload_iframe:function(a,b){if("manage-design-packs"==a)var c="manage_iframe";else if("program-docs"==a)var c="docs_iframe";var d=$("#"+c),e=d.attr("rel");if(b&&TvrCom.hasValue(b.attr("data-prop"))){e="http://themeover.com/"+b.attr("data-prop")+"/";var f=!0}(1!=d.attr("data-frame-loaded")||f||TvrCom.isDomEl(b.closest(".dialog-footer")))&&(window.frames[c].location=e,d.attr("data-frame-loaded",1))},toggle_help_info:function(a){a.next().slideToggle("fast",function(){})},scroll_to_bottom:function(a){a.scrollTop(a.scrollHeight)},toggle_multi_checkboxes:function(a){var b=$("#available-folders, #custom-css");a.hasClass("on")?b.find("input").prop("checked",!1).end().find(".fake-checkbox").add(a).removeClass("on"):b.find("input").prop("checked",!0).end().find(".fake-checkbox").add(a).addClass("on")},import_settings:function(){if(""==$("#import_from_pack_name").val())return alert("Please select a design pack from the list"),!1;if(!$("#ui-import-overwrite").is(":checked")&&!$("#ui-import-merge").is(":checked"))return alert("Please choose an import method (overwrite or merge with your current settings)"),!1;if($("#ui-import-overwrite").is(":checked"))var a="overwrite";else var a="merge";var b,c,d,e,f;b="import",c=$("#ui-url").attr("rel"),d=["Importing Settings ("+a+")..."],e="POST",f=$("#microthemer_ui_settings_import").serialize(),TvrUi.general_ajax_submission(b,c,d,e,f)},general_ajax_submission:function(a,b,c,d,e){var f=-1;TvrUi.update_prog_indicator("plus",c[f++]),$.ajax({type:d,url:b,data:e,timeout:2e4,error:function(b,c){TvrUi.update_prog_indicator("minus",[TvrCom.ucwords(a)+" error","<p>"+TvrUi.handle_ajax_error(b,c)+"</p>"]),TvrUi.close_dialog()},success:function(){window.location=b}})},export_settings:function(){if(!$("#export_pack_name").val())return alert("Please select an existing settings pack or name a new one to export to"),!1;var a=$("#export_pack_name").val().toLowerCase(),b=!1;for(var c in TvrCombo.directories)if(TvrCombo.directories[c].toLowerCase()==a){b=!0;break}b||$("#new_pack").val(1),TvrUi.ajax_save_settings("export")},add_m_query:function(a){var b=a.attr("rel"),c=$("#unq-base").attr("rel");a.attr("rel",++b);var d=$("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+b);d.find("input").each(function(){$(this).attr("name",$(this).attr("name").replace("key",c+b))}),$("#mq-list").append(d).find("li").filter(":last").hide().fadeIn("fast").end().sortable("refresh")},del_m_query:function(a){a.parents("li.mq-row").fadeOut("slow",function(){$(this).remove()})},reveal_form_opts:function(a){var b=a.attr("rel");a.closest("li").siblings(".hidden."+b).addClass("show")},toggle_folder:function(a){var b=TvrUi.get_meta(a,"section"),c=b.sectionM.find("ul.selector-sub"),d=b.sectionM.find(".menu-arrow");d.hasClass("on")?(d.removeClass("on"),c.hide()):(d.addClass("on"),c.show())},dom_replacements:function(a,b,c,d,e,f,g,h,i,j){return"section"==a&&(b.find("input, select").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth["+c+"]","tvr_mcth["+d+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+d+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+d+"]"))}),b.find(".section-name .name-text").text(e),b.find(".section-display-name").val(e),b.find(".rename-input").val(e),b.find(".selector-tag, .group-tag, .property-tag").add(b).each(function(){$(this).attr("id",$(this).attr("id").replace(c,d))})),"selector"==a&&(b.find(".selector-name").attr("title",TvrCom.regular_escape_quotes(i)),b.find(".selector-name .name-text").text(h),b.find(".selector-label").val(h+"|"+i),b.find(".selector-name-input").val(h),b.find(".selector-css-textarea").val(i)),"group"==a&&(b.removeAttr("id"),b.attr("class",b.attr("class").replace("property-fields-all-devices","property-fields-"+j)),"all-devices"!=j&&b.find(".property-input").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+j+"]"))}).end().find(".important-toggle").each(function(){$(this).removeClass("imp-reg").addClass("imp-mq")}).end().find(".property-tag").each(function(){$(this).attr("id",$(this).attr("id").replace("-all-devices","-"+j))})),("selector"==a||"group"==a)&&(b.find("input, select").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth["+c+"]["+f+"]","tvr_mcth["+d+"]["+g+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+d+"]["+g+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+d+"]["+g+"]"))}),b.find(".selector-tag, .group-tag, .property-tag").add(b).each(function(){try{$(this).attr("id",$(this).attr("id").replace(c+"-"+f,d+"-"+g))}catch(a){}})),b},add_section:function(a){var b=TvrCom.ucwords(a.siblings(".new-section-input").val()),c=TvrCom.new_name_checks(b,"folder");if(!c)return!1;var d=TvrUi.dom_replacements("section",$("#strk-selector_section").add($("#opts-selector_section")).clone(),"selector_section",c.newName,c.newNameHuman);$("#tvr-options").append(d[1]),$("#tvr-menu").append(d[0]).find("li").filter(":last").hide().fadeIn("fast",function(){$("#add-new-section").find("input.new-section-input").val("");var a=$("#section-count-state");TvrUi.update_count(a,"add",1,"section")}),TvrCom.refresh_sortable(),$("#main-menu-scroll").mCustomScrollbar("scrollTo","bottom")},load_section_selectors:function(a,b){var c=a.sectionM.find('input.selector-tracker[value="0"]');return TvrUi.selsToLoad=c.length,TvrUi.totalToLoad=TvrUi.selsToLoad,TvrUi.selsToLoad>0?TvrUi.action_in_prog(a.sectionM,"all-sels-loading")?!0:(TvrUi.log_action(a.sectionM,"all-sels-loading"),TvrUi.com_data_loading(a.sectionM,"sec"),c.each(function(){a=TvrUi.get_meta($(this),"selector"),TvrUi.ajax_load_ui_data(a.selector,a.sectionM,a.selectorT,a.sectionSlug,a.selectorSlug,"selector",3,b)}),!0):!1},toggle_rename_section:function(a){var b=TvrUi.get_meta(a,"section");if(!TvrUi.action_in_prog(b.sectionM,"rename")&&!TvrUi.action_in_prog(b.sectionM,"data-load")&&!TvrUi.load_section_selectors(b,"sec rename, load styles discretely")){TvrUi.log_action(b.sectionM,"rename");var b=TvrUi.get_meta(a,"section");$form=b.sectionM.find(".edit-section-form"),$name=b.sectionM.find(".section-name"),$form.hasClass("show")?($name.show(),$form.removeClass("show")):($name.hide(),$form.addClass("show")),TvrUi.unlog_action(b.sectionM,"rename")}},action_rename_section:function(a){var b=TvrUi.get_meta(a,"section"),c=TvrCom.ucwords(b.sectionM.find(".rename-input").val());if(TvrCom.convert_to_param(c)==b.sectionSlug){var d=[];d.newName=b.sectionSlug,d.newNameHuman=c}else{var d=TvrCom.new_name_checks(c,"folder");if(!d)return!1}var e=d.newName,f=d.newNameHuman,g=b.sectionSlug,h=b.sectionM.add(b.section);TvrUi.dom_replacements("section",h,g,e,f),b=TvrUi.get_meta($("#strk-"+e),"section"),TvrUi.toggle_rename_section(b.sectionM),TvrUi.selInFocusID.indexOf("opts-"+g)>=0&&TvrUi.update_global_vars(TvrUi.get_meta(b.section.find("li.in-focus"),"selector"))},copy_section:function(a){var b=TvrUi.get_meta(a,"section");if(!TvrUi.action_in_prog(b.sectionM,"copy")&&!TvrUi.load_section_selectors(b,"sec copy, load styles discretely")){TvrUi.log_action(b.sectionM,"copy");var c=TvrCom.resolve_unique_name(b.sectionH,$("#tvr-menu"),".section-name","Copy"),d=TvrUi.dom_replacements("section",TvrUi.proper_clone(b.section.add(b.sectionM)),b.sectionSlug,TvrCom.convert_to_param(c),c);d.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),d.find("img.ajax-loader").remove(),b.sectionM.after(d[0]),b.section.after(d[1]);var e=$("#section-count-state"),f=b.sectionM.find("span.selector-count-state").attr("rel");TvrUi.update_count(e,"add",1,"section",f),TvrUi.unlog_action(b.sectionM,"copy"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}},action_in_prog:function(a,b){return TvrCom.hasValue(a.attr(b+"-in-prog"))?!0:!1},log_action:function(a,b){a.attr(b+"-in-prog",1)},unlog_action:function(a,b){a.removeAttr(b+"-in-prog")},delete_section:function(a){var b=TvrUi.get_meta(a,"section");return TvrUi.action_in_prog(b.sectionM,"delete")||TvrUi.action_in_prog(b.sectionM,"all-sels-loading")?!1:(TvrUi.log_action(b.sectionM,"delete"),void b.sectionM.fadeOut("fast",function(){var a=b.sectionM.find("span.selector-count-state").attr("rel");if(TvrUi.update_count($("#section-count-state"),"subtract",1,"section",a),TvrCom.hasValue(TvrUi.selInFocusID)&&b.sectionSlug==TvrUi.section_slug(TvrUi.selInFocusID)){TvrUi.expanded("quick_section")&&TvrUi.close_quick_edit();var c=TvrUi.selectorTrackerScan(b.sectionM,"next");if(TvrCom.isDomEl(c)||(c=TvrUi.selectorTrackerScan(b.sectionM,"prev")),TvrCom.isDomEl(c)){var d=TvrUi.get_meta(c,"selector");TvrUi.tvr_iterate_selectors_v(d.selectorT)}else;}b.section.remove(),b.sectionM.remove()}))},toggle_add_selector:function(a){var b=TvrUi.get_meta(a,"section"),c=b.sectionM.find(".add-selector-form");c.hasClass("show")?TvrUi.close_add_selector(c):TvrUi.reveal_add_selector(c)},reveal_add_selector:function(a){var b=TvrUi.get_meta(a,"section");a.addClass("show"),b.sectionM.find(".menu-arrow").hasClass("on")||TvrUi.toggle_folder(b.sectionM)},close_add_selector:function(a){a.removeClass("show"),a.find("textarea.selector-css-textarea, input.selector-name-input").val("")},selector_checks_values:function(a,b,c){var d=TvrCom.ucwords(a.val());if(""==d)return alert("Please enter a value for the Selector name"),!1;if(TvrCom.convert_to_param(d)==c){var e=[];e.newName=c,e.newNameHuman=d}else{var e=TvrCom.new_name_checks(d,"selector");if(!e)return!1}return b?(e.code=b,e):(alert("Please enter some CSS selector code e.g. #header"),!1)},show_hide_sel_custom:function(a,b){var c=TvrUi.analyse_sel_code(a);c.custom_styles?b.addClass("custom-styles"):b.removeClass("custom-styles")},analyse_sel_code:function(a){var b=[];if(a.indexOf("{")>=0){b.custom_styles=!0;var c=a.split("{");b.code=c[0]}else b.custom_styles=!1,b.code=a;return b},add_selector:function(a){if(!TvrUi.allowed_action(a,"Add Sel"))return!1;var b=TvrUi.get_meta(a,"section"),c=TvrUi.selector_checks_values(b.sectionM.find(".add-selector-form .selector-name-input"),b.sectionM.find(".add-selector-form .selector-css-textarea").val(),!1);if(!c)return!1;var d=TvrUi.dom_replacements("selector",$("#strk-selector_section-selector_css").add($("#opts-selector_section-selector_css")).clone(),"selector_section",b.sectionSlug,b.sectionM.find(".name-text").text(),"selector_css",c.newName,c.newNameHuman,c.code);d.find(".view-state-input").val(1),b.sectionM.find(".selector-sub").append(d[0]),b.section.find(".opts-selectors-sub").append(d[1]),TvrUi.update_count(b.sectionM.find(".selector-count-state"),"add",1,"selector",""),b=TvrUi.get_meta(b.section.find(".selector-tag").last(),"selector"),TvrUi.tvr_iterate_selectors_v(b.selectorT),TvrUi.pg_icon_pressed(b.selector.find(".pg-icon-font")),TvrCom.refresh_sortable(),TvrUi.show_hide_sel_custom(c.code,b.selectorM.find(".selector-name")),TvrUi.close_add_selector(b.sectionM.find(".add-selector-form")),TvrUi.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),window.TvrSharedVars.intelli&&TvrUi.hide_wizard()},load_selector:function(a,b){return 0!=a.selectorT.val()||TvrUi.action_in_prog(a.selectorM,"data-load")?!1:(TvrUi.com_data_loading(a.selectorM,"sel"),TvrUi.ajax_load_ui_data(a.selector,a.selectorM,a.selectorT,a.sectionSlug,a.selectorSlug,"selector",1,b),!0)},toggle_modify_selector:function(a){var b=TvrUi.get_meta(a,"selector");if(!TvrUi.action_in_prog(b.selectorM,"rename")&&!TvrUi.action_in_prog(b.selectorM,"data-load")&&!TvrUi.load_selector(b,"load selector before modifying")){TvrUi.log_action(b.selectorM,"rename");var c=b.selectorM.find(".edit-selector-form");c.hasClass("show")?(c.removeClass("show"),TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit()):c.addClass("show"),TvrUi.unlog_action(b.selectorM,"rename")}},action_modify_selector:function(a){var b=TvrUi.get_meta(a,"selector"),c=TvrUi.selector_checks_values(b.selectorM.find(".selector-name-input"),b.selectorM.find(".selector-css-textarea").val(),b.selectorSlug);if(!c)return!1;var d=c.newName,e=c.newNameHuman,f=b.sectionSlug,g=b.selectorM.add(b.selector);TvrUi.dom_replacements("selector",g,f,f,b.sectionH,b.selectorSlug,d,e,c.code),TvrUi.selInFocusID==b.selectorID&&TvrUi.update_global_vars(TvrUi.get_meta(b.section.find("li.in-focus"),"selector")),TvrUi.show_hide_sel_custom(c.code,b.selectorM.find(".selector-name")),window.TvrSharedVars.curSelCSS=TvrCom.custom_escape_quotes(c.code),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("reg"),TvrUi.ajax_save_settings("save"),TvrUi.toggle_modify_selector(b.selectorM),TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit()},proper_clone:function(a){var b=a.clone();return a.find("select.property-input").each(function(a){b.find("select.property-input").eq(a).val($(this).val())}),TvrUi.jscolor_bind(b),b},copy_selector:function(a){if(!TvrUi.allowed_action(a,"Add Sel"))return!1;var b=TvrUi.get_meta(a,"selector");if(!TvrUi.action_in_prog(b.selectorM,"copy")&&!TvrUi.action_in_prog(b.selectorM,"data-load")&&!TvrUi.load_selector(b,"load selector before copying")){TvrUi.log_action(b.selectorM,"copy");var c=TvrCom.resolve_unique_name(b.selectorH,b.sectionM,".selector-name","Copy"),d=TvrUi.dom_replacements("selector",TvrUi.proper_clone(b.selector.add(b.selectorM)),b.sectionSlug,b.sectionSlug,b.sectionH,b.selectorSlug,TvrCom.convert_to_param(c),c,b.selectorM.find(".selector-css-textarea").val());d.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),b.selectorM.after(d[0]),b.selector.after(d[1]),TvrUi.update_count(b.sectionM.find(".selector-count-state"),"add",1,"selector",""),TvrUi.unlog_action(b.selectorM,"copy"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}},delete_selector:function(a){var b=TvrUi.get_meta(a,"selector");return TvrUi.action_in_prog(b.selectorM,"delete")||TvrUi.action_in_prog(b.selectorM,"data-load")?!1:(TvrUi.log_action(b.selectorM,"delete"),void b.selectorM.fadeOut("fast",function(){if(TvrUi.update_count(b.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),b.selectorID==TvrUi.selInFocusID){TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit();var a=TvrUi.selectorTrackerScan(b.sectionM,"next","selector",b.selectorM);if(TvrCom.isDomEl(a)||(a=TvrUi.selectorTrackerScan(b.sectionM,"prev","selector",b.selectorM)),TvrCom.isDomEl(a)){var c=!0,d=TvrUi.get_meta(a,"selector");TvrUi.tvr_iterate_selectors_v(d.selectorT)}else var c=!1}b.selector.remove(),b.selectorM.remove(),c||TvrUi.update_visual_controls(!1)}))},add_property_group:function(a){var b=TvrUi.get_meta(a,"group"),c=a.attr("rel").split("|"),d=c[0],e=(c[1],b.group.find(".mq-button.on").length),f=TvrUi.dom_replacements("group",$("#option-group-template-"+b.groupSlug).clone(),"selector_section",b.sectionSlug,b.sectionM.find(".name-text").text(),"selector_css",b.selectorSlug,b.selectorH,"",d);TvrUi.jscolor_bind(f),b.group.append(f);var g=b.group.find(".mq-tab-"+d);g.addClass("show"),TvrUi.mq_tab_pressed(g),0==e&&(b.selector.find(".pg-icon-"+b.groupSlug).addClass("on").find(".main-checkbox").prop("checked",!0),TvrUi.update_count(b.selector.find(".style-count-state"),"add",1,"style")),b.group.find(".mqb-"+d).addClass("on").find(".style-config").prop("checked",!0),TvrUi.update_mq_button($("#mq-button-"+d))},remove_property_group:function(a,b){var c=TvrUi.get_meta(a,"group");if("delete-all"==b)var d=c.group.find(".property-fields"),e=c.group.find(".mq-button"),f=c.group.find("span.mq-tab"),g=c.group.find(".style-config");else{var h=a.attr("rel").split("|"),i=h[0],d=c.group.find(".property-fields-"+i),e=a.parent(".mq-button"),f=c.group.find("span.mq-tab-"+i),g=c.group.find(".mqb-"+i).find(".style-config"),j=!1;f.hasClass("active")&&(j=!0)}d.remove(),e.removeClass("on"),f.removeClass("show active"),g.prop("checked",!1);var k=c.group.find(".mq-button.on").length;0==k&&(c.selector.find(".pg-icon-"+c.groupSlug).removeClass("on").find(".main-checkbox").prop("checked",!1),TvrUi.update_count(c.selector.find(".style-count-state"),"subtract",1,"style"),c.selector.find(".pg-focus").val("")),k>0&&j&&TvrUi.mq_tab_pressed(c.group.find("span.mq-tab.show:eq(0)")),TvrUi.ajax_save_settings("save")},update_accordion:function(a,b){var c=b.find("li.accordion-item"),d=a.parent();if(d.hasClass("show-content"))var e=!0;return b.find(".accordion-menu-arrow.on").removeClass("on"),c.slideUp(function(){b.find(".show-content").removeClass("show-content")}),e?!1:(d.find(".accordion-menu-arrow").addClass("on"),a.siblings("li.accordion-item").slideDown(function(){d.addClass("show-content")}),!1)},pg_icon_pressed:function(a){if(!TvrUi.allowed_action(a,"Edit Sel"))return!1;var b=a.attr("rel");window.TvrSharedVars.pgInFocus=b;var c=TvrUi.get_meta(a,"selector");c=TvrUi.get_meta($("#opts-"+c.sectionSlug+"-"+c.selectorSlug+"-"+b),"group"),a.hasClass("on")||TvrUi.add_property_group(c.group.find(".mqb-all-devices").find(".mq-add"));var d=c.selector.find(".styling-options"),e=".group-tag",f=c.selector.find(".styling-option-icons"),g=".pg-icon",h=".pg-focus";TvrUi.update_tab(d,e,f,b,g,h),TvrUi.update_mq_button($("#mq-button-"+c.group.find(".device-focus").val())),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str"),TvrUi.refresh_comp_css(),TvrUi.toolbar_adjusted()},show_add_mq:function(a){return TvrUi.itemAlreadyExpanded?!1:void a.addClass("on").parent().addClass("expanded on")},hide_add_mq:function(){var a=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(a))return!1;TvrUi.clean_tooltips();var b=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");b.selector.find("span.add-mq").removeClass("expanded on").find(".add-mq-icon").removeClass("on")},clear_pg_fields:function(a){var b=TvrUi.get_meta(a,"group");b.group.find(".property-input").each(function(){var a=$(this);a.val(""),a.hasClass("color")&&a.removeAttr("style"),TvrUi.adjust_comp_span(a,"after")}),TvrUi.ajax_save_settings("save")},update_tab:function(a,b,c,d,e,f){c.find(e).removeClass("active").end().find(e+"-"+d).addClass("active").end().find(f).val(d),a.find(b+".show").removeClass("show").end().find(b+"-"+d).addClass("show"),".mq-tab"==e&&TvrUi.update_mq_button($("#mq-button-"+d)),".adv-tab"==e&&$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&adv_wizard_tab="+d,function(){})},mq_tab_pressed:function(a){var b=TvrUi.get_meta(a,"group"),c=b.group,d=".property-fields",e=b.group.find(".query-tabs"),f=a.attr("rel"),g=".mq-tab",h=".device-focus";TvrUi.update_tab(c,d,e,f,g,h)},css_tab_pressed:function(a){var b=$("#hand-css-area"),c=".css-code-wrap",d=b.find(".css-code-tabs"),e=a.attr("rel"),f=".css-tab",g=".css-focus";TvrUi.update_tab(b,c,d,e,f,g)},adv_tab_pressed:function(a){var b=$("#advanced-wizard"),c=".adv-area",d=b.find(".adv-tabs"),e=a.attr("rel"),f=".adv-tab",g=".adv-wizard-focus";TvrUi.update_tab(b,c,d,e,f,g),a.hasClass("adv-tab-html-inspector")&&TvrUi.adjust_wiz_comp_height()},combobox_clicked:function(a){a.autocomplete("search","").next(".combo-arrow").addClass("on")},sug_css_clicked:function(a){a.closest("li").hasClass("in-focus")||($("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),a.closest("li").addClass("in-focus"))},autoScroll:function(a){var b=$("#advanced-wizard").find(".scrollable-refined"),c=136;if("focus"==a)var d=$("#code-suggestions").find("li").first();else var d=$("#code-suggestion-"+a);var e=d.position().top;(13>e||e>c-13)&&b.animate({scrollTop:e},"500")},fix_ff_mq_bug:function(a,b){return b&&$.browser&&$.browser.mozilla?a-.3:a},update_iframe_slider:function(a,b){var c=!1;if(a&&!b)var d=a;else if(b){var d=b;c=!0}else var d=TvrUi.frameWidth;if($("#v-frontend").width(TvrUi.fix_ff_mq_bug(d,c)),$("#iframe-pixel-width").text(d+"px"),a){$("#iframe-min-width").text("min: "+a+"px");var e=a}else{$("#iframe-min-width").text("");var e=0}if(b){$("#iframe-max-width").text("max: "+b+"px");var f=b}else{$("#iframe-max-width").text("");var f=TvrUi.fullWidth}$("#v-mq-slider").slider({min:e,max:f,value:d,start:function(){window.TvrSharedVars.highlightEnabled&&(TvrUi.hide_highlighting(),window.TvrSharedVars.tmpHideHighlighting=!0)},slide:function(){var a=$("#v-mq-slider").slider("option","value");a==b&&(c=!0),$("#v-frontend").width(TvrUi.fix_ff_mq_bug(a,c)),$("#iframe-pixel-width").text(a+"px")},change:function(){if($("#visual-view").hasClass("show-wizard")){var a="intelli";window.frames.viframe.TvrExportVars.get_computed_styles({},"obj",!0),TvrUi.refresh_wizard_comp_css()}else var a="reg";window.TvrSharedVars.tmpHideHighlighting&&TvrUi.show_highlighting(),TvrUi.screen_width_adjusted(a)}}),TvrUi.iframe_slider_set=!0},update_mq_button:function(a){var b=a.attr("rel");$("#v-mq-buttons").find("span.active").removeClass("active"),a.addClass("active"),TvrUi.update_iframe_slider(TvrUi.mqMin[b],TvrUi.mqMax[b])},screen_width_adjusted:function(a){TvrUi.iframe_functions_loaded()&&(window.frames.viframe.TvrExportVars.switch_highlight(a),window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str")),TvrUi.refresh_comp_css()},map_formatted_comp:function(a,b,c,d,e,f,g,h,i){if(i)var j=window.TvrSharedVars.intelliCompProps;else var j=window.TvrSharedVars.compProps;if("straight"==c&&("var"==b?j[a[d]]=f:(0==e&&(j[a[d]]=[]),j[a[d]][e]=[],j[a[d]][e].val=f,j[a[d]][e].htmlString=g)),"array"==c){var k=-1,l=a[d];for(var m in l)"var"==b?j[l[m]]=h[++k]:(0==e&&(j[l[m]]=[]),j[l[m]][e]=[],j[l[m]][e].val=h[++k],j[l[m]][e].htmlString=g)}i?window.TvrSharedVars.intelliCompProps=j:window.TvrSharedVars.compProps=j},format_exceptions:function(a,b,c,d,e,f){if("var"==e)var g=c;else var g=c[d].val,h=c[d].htmlString;if(!TvrCom.hasValue(g))return!1;if("font-family"==b||"list-style-type"==b||"border-top-left-radius"==b||"border-top-right-radius"==b||"border-bottom-right-radius"==b||"border-bottom-left-radius"==b)TvrUi.map_formatted_comp(a,e,"straight",b,d,g,h,[],f);else if("text-shadow"==b||"box-shadow"==b){var i=g.split(" ");i.length<2&&(i[1]=i[2]=i[3]=0),TvrUi.map_formatted_comp(a,e,"array",b,d,g,h,i,f)}else if("list-style-image"==b)TvrUi.map_formatted_comp(a,e,"straight",b,d,TvrCom.basename(g),h,[],f);else if("background-img-full"==b){var j=[];j[0]=TvrCom.extract_str("bg-image",g);var k=TvrCom.extract_str("gradient",g);if(k){var l=/gradient\((.+)\)/.exec(k);if(l){var m=l[1].split(", ");if(g.indexOf("webkit")>=0)var n="webkit-",o=" (webkit standard)";else var n="",o="";if(m[0].indexOf("deg")>-1)var p=a.keys[n+"gradient-angle"][m[0]],q=!0,r=1;else var p="top to bottom",q=!1,r=0;if(j[1]=p?p:m[0]+o,j[2]=m[r],q&&m.length>3||!q&&m.length>2){var s=m[++r].split(" ");j[3]=s[0],j[4]=s[1],j[5]=m[++r]}else j[3]="none",j[4]="0",j[5]=m[++r]}else k.indexOf("svg")>-1&&(j[1]="IE9 can't report",j[2]="IE9 can't report",j[3]="IE9 can't report",j[4]="IE9 can't report",j[5]="IE9 can't report")}else j[1]="none",j[2]="none",j[3]="0",j[4]="none",j[5]="none";TvrUi.map_formatted_comp(a,e,"array",b,d,g,h,j,f)}else if("background-position"==b){var t=g.split(", "),u=t[0].split(" "),v=a.keys["background-position-x"][u[0]],w=a.keys["background-position-y"][u[1]],x=v?v:u[0],y=w?w:u[1],z=x+" "+y,A=[x,y];TvrUi.map_formatted_comp(a,e,"straight",b,d,z,h,[],f),TvrUi.map_formatted_comp(a,e,"array","background-position-custom",d,g,h,A,f)}else if("background-repeat"==b||"background-attachment"==b||"background-size"==b||"background-clip"==b){var t=g.split(", ");TvrUi.map_formatted_comp(a,e,"straight",b,d,t[0],h,[],f)}},filter_css_exceptions:function(a){if(a)var b=window.TvrSharedVars.intelliCompProps;else var b=window.TvrSharedVars.compProps;var c=TvrPropExceptions,d=0;for(var e in b){++d;var f=b[e];if(f===Object(f))for(var g in f)TvrUi.format_exceptions(c,e,f,g,"obj",a);else TvrUi.format_exceptions(c,e,f,"","var",a)}return d},refresh_comp_css:function(){if(!TvrUi.iframe_functions_loaded())return!1;var a=TvrUi.filter_css_exceptions(!1),b=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(b))return!1;if(1>a){var c=" (this selector does not target anything on the page)";return b.find(".option-label").each(function(){var a=$(this);a.attr("title",a.attr("data-simple-tt")+c)}),void b.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text("")}if(""!=window.parent.TvrSharedVars.pgInFocus)var d=b.find("li.group-tag-"+window.parent.TvrSharedVars.pgInFocus).find("div.field-wrap");else var d=b.find("div.field-wrap");d.each(function(){var a=$(this);if(!a.hasClass("group-label")&&!a.hasClass("sub-label")){var b=a.find(".option-label"),c=b.attr("data-simple-tt"),d=a.find("span.comp-style"),e=a.find(".property-input"),f=d.attr("class").split(" "),g=f[1].replace("cprop-",""),h=window.TvrSharedVars.compProps[g],i=0;if(TvrCom.isDefined(h))if(h===Object(h)){a.addClass("mixed-cp"),d.text("[mix]");var j=": value varies across multiple elements on the page",k="";for(var l in h)if(TvrCom.isDefined(h[l].val)){var m=h[l].htmlString.replace("&#60;","<").replace("&#62;",">");k+='<tr class="mixed-val" rel="'+i+'"><td>'+ ++i+"</td><td title='"+m+"'>"+TvrUi.colorize_hash(h[l].val,a,"obj")+"</td></tr>"}a.find("span.comp-mixed-table").find("tbody").html(k)}else{var j=": "+h;a.removeClass("mixed-cp"),h=TvrUi.truncate_displayed_comp_css(e,h),d.html(TvrUi.colorize_hash(h,a,"val"))}else{var j=": style not applicable";d.text("")}b.attr("title",c+j)}})},truncate_displayed_comp_css:function(a,b){var c=a.width(),d=b.length,e=c/6;return d>e&&(b=b.substring(0,e)+"..."),b},colorize_hash:function(a,b,c){if(!a||a.indexOf("#")<0)return"obj"!=c&&b.removeClass("colorize-hash"),a;"obj"!=c&&b.addClass("colorize-hash");var d=a;return a.replace("#",'<span class="colored-hash" style="background:'+d+'">#</span>');

},update_prog_indicator:function(a,b){if(window.TvrSharedVars.progCount<0)return window.TvrSharedVars.progCount=0,!1;var c=$("#m-logo"),d=$("#status-short"),e=$("#dialogs").find(".tvr-dialog").find(".dialog-icon");"plus"==a?(++window.TvrSharedVars.progCount,d.removeClass(),c.add(d).add(e).addClass("active"),d.text(b)):(--window.TvrSharedVars.progCount,window.TvrSharedVars.progCount<=0&&(c.add(d).add(e).removeClass("active"),TvrUi.update_full_logs(b)))},update_full_logs:function(a){var b=$("#full-logs").find(".logs");if(a){var c=a[0],d=a[1];if(a[2])var e=a[2];else var e="error";var f=$("#log-item-template").clone().removeAttr("id");f.attr("class",f.attr("class").replace("tvr-error","tvr-"+e)).find(".short").text(c).end().find(".long").html(d),b.html(f)}TvrUi.update_short_status()},update_short_status:function(){var a=$("#full-logs").find(".logs li").first();if(a)var b=a.find(".short").text(),c=a.attr("class");else var b,c="";$("#status-short").addClass(c).text(b)},default_to_first_sel:function(){var a=$("#last-viewed-selector").val(),b=$("#last-edited-selector").val();if(TvrCom.hasValue(a)&&TvrCom.isDomEl($("#"+a)))var c=$("#"+a);else if(TvrCom.hasValue(b)&&TvrCom.isDomEl($("#"+b)))var c=$("#"+b);else var c=$("#tvr-menu").find("li.selector-tag:eq(0)");return c&&TvrCom.hasValue(c.attr("id"))?void TvrUi.tvr_iterate_selectors_v(c):!1},adjust_comp_span:function(a,b){"after"==b?(a.val()?(a.closest(".property-tag").addClass("manual-val"),a.siblings("span.comp-style").addClass("hidden")):(a.closest(".property-tag").removeClass("manual-val"),a.siblings("span.comp-style").removeClass("hidden")),TvrUi.signal_if_pg_has_values(a)):"hover"==b&&a.siblings("span.comp-style").addClass("hidden")},signal_if_pg_has_values:function(a){var b=TvrUi.get_meta(a,"group"),c=!0;b.group.find("input.property-input").each(function(){return $(this).val()?void(c=!1):void 0});var d=b.selector.find("li.pg-icon-"+b.groupSlug);c?d.removeClass("hasValues"):d.addClass("hasValues")},done_typing:function(){TvrUi.ajax_save_settings("save")},toggle_left_menu:function(){$("#v-left-controls").slideToggle("fast",function(){TvrUi.leftMenu?($("#toggle-left-menu").removeClass("showing"),TvrUi.leftMenu=!1,$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&left_menu_down=0",function(){})):($("#toggle-left-menu").addClass("showing"),TvrUi.leftMenu=!0,$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&left_menu_down=1",function(){}))})},get_folders:function(){var a=[];return $("#tvr-menu").find(".section-tag").each(function(b){var c=TvrUi.get_meta($(this),"section");a[b]=c.sectionH}),a},show_wizard:function(){if(window.TvrSharedVars.intelli=!0,$("#visual-view").addClass("show-wizard"),TvrUi.show_mq_slider(),$("#always-adv-checkbox").is(":checked")&&TvrUi.show_adv_wizard(),TvrCombo.cur_folders=TvrUi.get_folders(),TvrCom.hasValue(TvrUi.selInFocusID)){var a=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");$("#wizard_folder").val(a.sectionH).removeClass("text-label")}TvrUi.update_selector_wizard()},hide_wizard:function(){$("#visual-view").removeClass("show-wizard"),TvrUi.hide_adv_wizard(),TvrUi.return_normal_highlighting("reg"),$("#wizard-name").val(""),window.TvrSharedVars.intelli=!1,TvrUi.toolbar_adjusted()},toggle_adv_wizard:function(){$("#visual-view").hasClass("show-advanced")?(TvrUi.hide_adv_wizard(),TvrUi.remember_adv_wizard(0)):(TvrUi.show_adv_wizard(),TvrUi.remember_adv_wizard(1)),TvrUi.toolbar_adjusted()},show_adv_wizard:function(){$("#visual-view").addClass("show-advanced");var a=$("#v-frontend-wrap"),b=a.height()-40;a.find(".wizard-panes").height(b),TvrUi.screen_width_adjusted("intelli")},hide_adv_wizard:function(){$("#visual-view").removeClass("show-advanced"),TvrUi.screen_width_adjusted("intelli")},remember_adv_wizard:function(a){a?$("#always-adv-checkbox").prop("checked",!0):$("#always-adv-checkbox").prop("checked",!1),$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&show_adv_wizard="+a,function(){})},switch_html_element:function(a){var b=a.attr("class"),c=window.TvrSharedVars.TvrSugCSS;if(b.indexOf("tvr-parent")>=0)var d=c.Intelli.parent;else if(b.indexOf("tvr-child")>=0)var d=c.Intelli.child;else if(b.indexOf("tvr-prev-sibling")>=0)var d=c.Intelli.prev;else if(b.indexOf("tvr-next-sibling")>=0)var d=c.Intelli.next;TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.build_selector_suggestions(d)},update_selector_wizard:function(){var a=$("#advanced-wizard"),b=window.TvrSharedVars.TvrSugCSS,c="",d=0,e=1,f=1,g=0;for(var h in b){if("Intelli"==h)break;if(++d,d==b.Intelli.ogCount)var i=" (highest specificity)";else var i="";c+='<li class="selector-category">'+h+i+"</li>";for(var j in b[h])if("each"!=j){if(window.TvrSharedVars.intelli_css==j)var k='in-focus"';else var k="";var l="",m='title="'+TvrCom.escapeHTML(b[h][j])+'"';c+='<li id="code-suggestion-'+f+'" class="code-suggestion '+k+'"             ><textarea class="sug-sel" '+l+">"+j+'</textarea><span class="tvr-icon info-icon" '+m+"></span></li>",f+=e,++g}}$("#code-suggestions").html($(c).get().reverse()),a.find("div.refine-target-controls span").addClass("disabled"),a.find("div.refine-target-controls span").each(function(){var a=$(this),c=a.attr("class");c.indexOf("tvr-parent")>=0&&b.Intelli.parent?a.removeClass("disabled"):c.indexOf("tvr-child")>=0&&b.Intelli.child?a.removeClass("disabled"):c.indexOf("tvr-prev-sibling")>=0&&b.Intelli.prev?a.removeClass("disabled"):c.indexOf("tvr-next-sibling")>=0&&b.Intelli.next&&a.removeClass("disabled")}),a.find("div.refine-target-html span").html(b.Intelli.htmlString),TvrUi.adjust_wiz_comp_height(),TvrUi.refresh_wizard_comp_css()},adjust_wiz_comp_height:function(){var a=$("#advanced-wizard").find(".wizard-panes").height()-$("#refine-target").height()-36;$("#html-computed-css").add($("#html-computed-css").find(".scrollable-area")).css("max-height",a)},refresh_wizard_comp_css:function(){TvrUi.filter_css_exceptions("intelli");var a=window.TvrSharedVars.intelliCompProps=TvrUi.un_flatten_css(window.TvrSharedVars.intelliCompProps),b=$("#html-computed-css");b.find("li.property-item").remove();for(var c in a){var d="",e=1;for(var f in a[c]){if(TvrCom.isOdd(e))var g="row-odd";else var g="row-even";var h=f.replace(/-/g," ");d+='<li class="property-item accordion-item '+g+'">',d+='<span class="comp-prop-label">'+h+":</span> ",d+='<span class="comp-prop-value">'+a[c][f]+"</span>",d+="</li>",++e}d+='<li class="property-item accordion-item bottom-gap"></li>',$("#comp-"+c).append(d)}},un_flatten_css:function(a){var b=[];for(var c in window.parent.TvrSharedVars.cssProps){b[c]=[];for(var d in window.parent.TvrSharedVars.cssProps[c]){var e=window.parent.TvrSharedVars.cssProps[c][d];"background-img-full"==e||"extracted-gradient"==e||"google-font"==e||"text-shadow"==e||"box-shadow"==e||"background-image"==e&&"gradient"==c||(b[c][e]=a[e])}}return b},wizard_new_selector:function(){var a=$("#wizard_folder").val();if(!TvrCom.hasValue(a)||"Enter new or select a folder..."==a)return alert("Please select an existing folder or enter a new folder name"),!1;var b=TvrCom.convert_to_param(a),c=$("#wizard-name").val(),d=$("#code-suggestions").find("li.in-focus textarea").val();if(!TvrCom.isDomEl($("#strk-"+b))){var e=$("#add-new-section").find(".new-section-input");e.val(a),TvrUi.add_section(e.siblings(".new-section-add"))}var f=TvrUi.get_meta($("#strk-"+b),"section");f.sectionM.find(".add-selector-form").find(".selector-name-input").val(c),f.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(d),TvrUi.add_selector(f.sectionM)},load_visual_view:function(){var a=$("body"),b=a.height();a.addClass("tvr-visual"),TvrUi.default_to_first_sel(),TvrUi.toolbarHeight=$("#v-top-controls").height(),TvrUi.frameHeight=b-TvrUi.toolbarHeight,TvrUi.toggle_enabled_buttons(),TvrUi.placeholderFrame&&(TvrUi.update_prog_indicator("plus","Loading WordPress Site..."),$("#viframe").contents().find("body").css("height",TvrUi.frameHeight+"px"),window.frames.viframe.location=$("#viframe").attr("rel"),TvrUi.placeholderFrame=!1),$("#v-frontend-wrap").css("height",TvrUi.frameHeight),TvrUi.frameWidth=TvrUi.allDevicesWidth,TvrUi.iframe_slider_set||TvrUi.update_iframe_slider(0,0)},show_mq_slider:function(){$("#v-mq-controls").addClass("show")},hide_mq_slider:function(){$("#v-mq-controls").removeClass("show")},toolbar_adjusted:function(){TvrUi.toolbarHeight=$("#v-top-controls").height(),TvrUi.frameHeight=$("body").height()-TvrUi.toolbarHeight,TvrUi.toolbarHeight>40?TvrUi.show_mq_slider():TvrUi.hide_mq_slider(),$("#v-frontend-wrap").css("height",TvrUi.frameHeight)},toggle_enabled_buttons:function(){TvrUi.totalSels<1&&(TvrUi.reset_global_vars(),$("#starter-message").removeClass("hidden"),$("#quick-nav").addClass("hidden"),TvrUi.expanded("quick_section")&&TvrUi.close_quick_edit(),$("#current-selector").text("")),TvrUi.totalSels>0&&($("#starter-message").addClass("hidden"),$("#quick-nav").removeClass("hidden"))},remember_page_viewed:function(){var a=$("#previewurl").val(),b=TvrUi.siteUrl,c=$("#viframe").contents().find("#iframe-url").attr("content"),d=decodeURIComponent(c);TvrCom.hasValue(d)&&0===d.indexOf(b)&&d!=a&&!TvrUi.placeholderFrame&&($.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&tvr_microthemer_ui_preview_url="+c,function(){$("#previewStatus").text("iframe-success")}),$("#previewurl").val(d))},update_visual_controls:function(a){if(!TvrCom.isDomEl(a))return $("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var b=TvrUi.get_meta(a,"selector"),c=TvrUi.selectorTrackerScan(b.sectionM,"prev","selector",b.selectorM),d=TvrUi.selectorTrackerScan(b.sectionM,"next","selector",b.selectorM);c?$("#vb-focus-prev").removeClass("disabled"):$("#vb-focus-prev").addClass("disabled"),d?$("#vb-focus-next").removeClass("disabled"):$("#vb-focus-next").addClass("disabled"),TvrUi.get_meta(a,"selector")},selectorTrackerScan:function(a,b,c,d){if("prev"==b){if("selector"==c){var e=d.prev("li.strk-sel");return TvrCom.hasValue(e.attr("id"))?e:TvrUi.selectorTrackerScan(a,b)}var f=a.prev("li.strk-sec");if(TvrCom.hasValue(f.attr("id"))){var g=f.find(".strk-sel").last();return TvrCom.hasValue(g.attr("id"))?g:TvrUi.selectorTrackerScan(f,b)}return!1}if("next"==b){if("selector"==c){var h=d.next("li.strk-sel");return TvrCom.hasValue(h.attr("id"))?h:TvrUi.selectorTrackerScan(a,b)}var i=a.next("li.strk-sec");if(TvrCom.hasValue(i.attr("id"))){var j=i.find(".strk-sel").first();return TvrCom.hasValue(j.attr("id"))?j:TvrUi.selectorTrackerScan(i,b)}return!1}},toggle_highlighting:function(){window.TvrSharedVars.highlightEnabled?TvrUi.hide_highlighting():TvrUi.show_highlighting()},show_highlighting:function(){window.TvrSharedVars.highlightEnabled=!0,$("#toggle-highlighting").addClass("on"),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.showOverlays()},hide_highlighting:function(){window.TvrSharedVars.highlightEnabled=!1,$("#toggle-highlighting").removeClass("on"),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.hideOverlays()},return_normal_highlighting:function(a){window.TvrSharedVars.highlightEnabled&&window.TvrSharedVars.tmpHighlighting&&(window.TvrSharedVars.tmpHighlighting=!1,TvrUi.toggle_highlighting()),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight(a)},tvr_iterate_selectors_v:function(a){var b=TvrUi.get_meta(a,"selector");TvrUi.load_selector(b,"load selector before iterating")||($("#tvr-options").find("li.in-focus").removeClass("in-focus"),b.selector.addClass("in-focus"),TvrUi.update_global_vars(b),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("reg"),TvrUi.update_visual_controls(a),TvrUi.refresh_comp_css(),TvrUi.default_to_prev_edited_pg_group(b.selector),TvrUi.toolbar_adjusted())},iframe_functions_loaded:function(){return window.frames.viframe&&window.frames.viframe.TvrExportVars&&window.frames.viframe.TvrExportVars.switch_highlight&&window.frames.viframe.TvrExportVars.get_computed_styles&&window.frames.viframe.TvrExportVars.iframe_window_fully_loaded?(window.TvrSharedVars.awaitingIFrame=!1,!0):(window.TvrSharedVars.awaitingIFrame=!0,!1)},default_to_prev_edited_pg_group:function(a){var b=TvrUi.get_meta(a,"selector"),c=b.selector.find(".pg-focus").val();c&&TvrUi.pg_icon_pressed(b.selector.find(".pg-icon-"+c))},quick_nav:function(a){if(a.hasClass("disabled"))return!1;var b=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");if("vb-focus-prev"==a.attr("id"))var c="prev";else var c="next";TvrUi.tvr_iterate_selectors_v(TvrUi.selectorTrackerScan(b.sectionM,c,"selector",b.selectorM))}};TvrUi.init(),window.TvrSharedVars.print_r=TvrCom.print_r,window.TvrSharedVars.extract_str=TvrCom.extract_str,window.TvrSharedVars.custom_to_non_escaped=TvrCom.custom_to_non_escaped,window.TvrSharedVars.jquery_escape_quotes=TvrCom.jquery_escape_quotes,window.TvrSharedVars.hasValue=TvrCom.hasValue,window.TvrSharedVars.sane_decimal=TvrCom.sane_decimal,window.TvrSharedVars.isDomEl=TvrCom.isDomEl,window.TvrSharedVars.analyse_sel_code=TvrUi.analyse_sel_code,window.TvrSharedVars.update_prog_indicator=TvrUi.update_prog_indicator,window.TvrSharedVars.show_wizard=TvrUi.show_wizard,window.TvrSharedVars.hide_wizard=TvrUi.hide_wizard,window.TvrSharedVars.update_selector_wizard=TvrUi.update_selector_wizard,window.TvrSharedVars.toggle_highlighting=TvrUi.toggle_highlighting,window.TvrSharedVars.insert_google_font=TvrUi.insert_google_font,window.TvrSharedVars.ajax_save_settings=TvrUi.ajax_save_settings,window.TvrSharedVars.remember_page_viewed=TvrUi.remember_page_viewed,window.TvrSharedVars.refresh_comp_css=TvrUi.refresh_comp_css,window.TvrSharedVars.close_all_expanded=TvrUi.close_all_expanded,window.TvrSharedVars.show_dialog=TvrUi.show_dialog,window.TvrSharedVars.update_packs_obj=TvrUi.update_packs_obj,window.TvrSharedVars.update_full_logs=TvrUi.update_full_logs});