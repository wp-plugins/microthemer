// Microthemer - v3.7.5 (2015-07-28)
!function(a){a.fn.ruler=function(b){var c={vRuleSize:18,hRuleSize:18,showCrosshair:!1,showMousePos:!1},d=a.extend({},c,b),e='<div class="ruler ruler-stuff hRule"></div>',f='<div class="ruler ruler-stuff vRule"></div>',g='<div class="ruler ruler-stuff corner"></div>';return a(window).resize(function(){var b=a(".hRule"),c=a(".vRule");b.empty(),c.empty().height(0).outerHeight(c.parent().outerHeight());for(var e=d.vRuleSize,f="";e<=b.width();)(e-d.vRuleSize)%50==0?(f="<div class='tickLabel'>"+(e-d.vRuleSize)+"</div>",a(f).css("left",e+"px").appendTo(b)):(e-d.vRuleSize)%10==0?(f="<div class='tickMajor'></div>",a(f).css("left",e+"px").appendTo(b)):(e-d.vRuleSize)%5==0&&(f="<div class='tickMinor'></div>",a(f).css("left",e+"px").appendTo(b)),e+=5;for(e=d.hRuleSize,f="";e<=c.height();)(e-d.hRuleSize)%50==0?(f="<div class='tickLabel'><span>"+(e-d.hRuleSize)+"</span></div>",a(f).css("top",e+"px").appendTo(c)):(e-d.hRuleSize)%10==0?(f="<div class='tickMajor'></div>",a(f).css("top",e+"px").appendTo(c)):(e-d.hRuleSize)%5==0&&(f="<div class='tickMinor'></div>",a(f).css("top",e+"px").appendTo(c)),e+=5}),this.each(function(){var b=a(this);if(d.hRuleSize>0&&a(e).height(d.hRuleSize).prependTo(b),d.vRuleSize>0){var c=b.outerWidth();b.outerWidth(c),a(f).width(d.vRuleSize).height(b.outerHeight()).prependTo(b)}d.vRuleSize>0&&d.hRuleSize>0&&a(g).css({width:d.vRuleSize,height:d.hRuleSize}).prependTo(b);for(var h=b.children(".hRule"),i=b.children(".vRule"),j=d.vRuleSize,k="";j<=h.width();)(j-d.vRuleSize)%50==0?(k="<div class='tickLabel'>"+(j-d.vRuleSize)+"</div>",a(k).css("left",j+"px").appendTo(h)):(j-d.vRuleSize)%10==0?(k="<div class='tickMajor'></div>",a(k).css("left",j+"px").appendTo(h)):(j-d.vRuleSize)%5==0&&(k="<div class='tickMinor'></div>",a(k).css("left",j+"px").appendTo(h)),j+=5;for(j=d.hRuleSize,k="";j<=i.height();)(j-d.hRuleSize)%50==0?(k="<div class='tickLabel'><span>"+(j-d.hRuleSize)+"</span></div>",a(k).css("top",j+"px").appendTo(i)):(j-d.hRuleSize)%10==0?(k="<div class='tickMajor'></div>",a(k).css("top",j+"px").appendTo(i)):(j-d.hRuleSize)%5==0&&(k="<div class='tickMinor'></div>",a(k).css("top",j+"px").appendTo(i)),j+=5})}}(jQuery),jQuery(document).ready(function(a){window.TvrSharedVars={},window.TvrSharedVars.adminUrl=a("#admin-url").attr("rel"),window.TvrSharedVars.totalSecs=parseInt(a("#total-sec-count").text()),window.TvrSharedVars.TvrSugCSS={},window.TvrSharedVars.highlightEnabled=!1,window.TvrSharedVars.tmpHighlighting=!1,window.TvrSharedVars.tmpHideHighlighting=!1,window.TvrSharedVars.colorPickerDragging=!1,window.TvrSharedVars.progCount=0,window.TvrSharedVars.intelli=!1,window.TvrSharedVars.awaitingIFrame=!0,window.TvrSharedVars.show_interface=TvrPref.show_interface,window.TvrSharedVars.cssProps=TvrCSSProps,window.TvrSharedVars.compProps={},window.TvrSharedVars.intelliCompProps={},window.TvrSharedVars.mixedElKey=0,window.TvrSharedVars.g_url="",TvrEditors={};var b={startT:function(a){TVR_DEV_MODE&&(a||(a="function"),b.isDefined(c.profiler[a])||(c.profiler[a]={sT:[],eT:[],elT:[],calls:0,total_time:0}),c.profiler[a].sT[++c.profiler[a].calls]=(new Date).getTime())},endT:function(a,d){if(TVR_DEV_MODE){a||(a="function");var e=c.profiler[a].calls;c.profiler[a].eT[e]=(new Date).getTime();var f=c.profiler[a].eT[e]-c.profiler[a].sT[e];c.profiler[a].elT[e]=f,c.profiler[a].total_time=c.profiler[a].total_time+f,b.showT(a)}},showT:function(a){if(TVR_DEV_MODE){var d="";if("all"!=a)d=b.msgT(a);else for(var a in c.profiler)d+=b.msgT(a);window.console&&window.console.log&&console.log(d)}},msgT:function(a){var d=c.profiler[a].calls;b.isDefined(c.profiler[a].eT[d])||b.endT(a);var e=c.profiler[a].total_time.toFixed(2),f=c.profiler[a].calls;return f+" calls	 "+(e/1e3).toFixed(2)+" seconds	 "+e+" ms	 "+a+"\n"},hasValue:function(a){return a?!0:!1},isDefined:function(a){return""!==a&&"undefined"!==a&&void 0!==a&&null!==a?!0:!1},isDomEl:function(a){return b.hasValue(a)&&a.prop&&a.prop("tagName")?!0:!1},ucwords:function(a){return(a+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},readable_name:function(a){return b.ucwords((a+"").replace(/[_-]/g," "))},adjust_mqs_for_unit:function(a){var b=["min","max"];for(var d in a)for(var e=0;e<b.length;++e){var f=b[e];a[d][f]=parseFloat(a[d][f]),a[d][f+"_unit"]&&"px"!=a[d][f+"_unit"]&&(a[d][f]=parseFloat(a[d][f])*c.baseFontSize)}return a},pipes_to_array:function(a){for(var b=[],c=a.attr("rel").split("|"),d=c.length,e=0;d>e;++e){var f=c[e].split(",");b[f[0]]=parseInt(f[1])}return b},print_r:function(a,c){var d=c||"",e="[object Array]"===Object.prototype.toString.call(a),f=e?"Array\n"+d+"[\n":"Object\n"+d+"{\n";for(var g in a)if(a.hasOwnProperty(g)){var h=a[g],i="",j=Object.prototype.toString.call(h);switch(j){case"[object Array]":case"[object Object]":i=b.print_r(h,d+"	");break;case"[object String]":i="'"+h+"'";break;default:i=h}f+=d+"	"+g+" => "+i+",\n"}return f=f.substring(0,f.length-2)+"\n"+d,e?f+"]":f+"}"},extract_str:function(a,c){if("gradient"==a){var d=c.split("linear-");if(d[0].indexOf("gradient")>=0)var e=d[0];else if(d[1]&&d[1].indexOf("gradient")>=0)var e=d[1];else var e=""}if("bg-image"==a){var d=c.split("linear-");e=d[0].indexOf("url")<0?"none":b.basename(d[0]).replace(/\)?"/,"")}return e},get_all_matches:function(a,b,c,d){c||(c=0);for(var e,f=[];e=b.exec(a);)f.push(e[c]);return f},replace_all_matches:function(b,c,d){if(a.isArray(c)&&a.isArray(d))for(var e in c)b=b.replace(c[e],d[e]);else if(a.isArray(c)&&!a.isArray(d))for(var e in c)b=b.replace(c[e],d);else if(!a.isArray(c)&&a.isArray(d))for(var e in d)b=b.replace(c,d[e]);else b=b.replace(/current/g,d);return b},basename:function(a){return b.hasValue(a)?a.split(/[\\/]/).pop().replace(")",""):a},root_rel:function(a){return a.replace(c.siteUrl,"")},bind_input_labels:function(b){b.each(function(){var b=a(this);this.value=b.attr("data-ph-title"),b.addClass("text-label"),b.bind("focus",function(){this.value==b.attr("data-ph-title")&&(this.value="",b.removeClass("text-label"))}),b.bind("blur",function(){""==this.value&&(this.value=b.attr("data-ph-title"),b.addClass("text-label"))})})},new_name_checks:function(d,e){if("folder"==e)var f=a("#tvr-menu"),g=".section-name";else var f=c.meta.sectionM,g=".selector-name";if(b.duplicates(d,f,g)){switch(e){case"folder":alert(js_i18n_main.already_exists_folder);break;case"selector":alert(js_i18n_main.already_exists_selector);break;default:alert(sprintf(js_i18n_main.already_exists_misc,e))}return!1}if(""==d||"folder"==e&&d==js_i18n_main.new_folder){switch(e){case"folder":alert(js_i18n_main.enter_name_folder);break;case"selector":alert(js_i18n_main.enter_name_selector);break;default:alert(sprintf(js_i18n_main.enter_name_misc,e))}return!1}var h=[];return h.newNameHuman=d,h.newName=b.convert_to_param(d),h},duplicates:function(c,d,e,f){var g=!1;return d.find(e).find(".name-text").each(function(){return f&&a(this).closest(".selector-tag").attr("id")==f?!0:void(b.convert_to_param(a(this).text())==b.convert_to_param(c)&&(g=!0))}),g},resolve_unique_name:function(a,c,d,e,f){if(b.duplicates(a,c,d,f)){var g=1;do{if(a.match(e)){1==g&&(g=2);var h=a.replace(/Copy \d+/,e+" "+g)}else var h=a+" "+e+" "+g;++g}while(b.duplicates(h,c,d,f));return h}return a},convert_to_param:function(a){return a=a.replace(/[^a-zA-Z0-9 ]+/g,"").replace("/ {2,}/"," "),a=a.replace(/ /g,"_").toLowerCase()},refresh_sortable:function(){b.startT("bind sortable menu"),a("#tvr-menu").sortable({cursor:"move",handle:".folder-icon.sortable-icon",update:function(d,e){var f=c.get_meta(e.item,"section"),g=f.sectionM.prev().attr("id");b.hasValue(g)?f.section.detach().insertAfter("#"+g.replace("strk","opts")):f.section.detach().prependTo("#tvr-options"),b.hasValue(c.selInFocusID)&&c.update_visual_controls(a("#"+c.selInFocusID)),c.ajax_save_settings("save")}}).find("ul.selector-sub").sortable({connectWith:"ul.selector-sub",cursor:"move",handle:".selector-icon.sortable-icon",refresh:"",receive:function(a,c){b.selector_received(a,c)},stop:function(d,e){var f=c.get_meta(e.item,"selector"),g=f.selectorM.prev().attr("id");b.hasValue(g)?f.selector.detach().insertAfter("#"+g.replace("strk","opts")):f.selector.detach().prependTo(f.section.find("ul.opts-selectors-sub")),b.hasValue(c.selInFocusID)&&c.update_visual_controls(a("#"+c.selInFocusID)),c.ajax_save_settings("save")}}),b.endT("bind sortable menu")},selector_received:function(a,d){var e=c.get_meta(d.item,"selector");if(!c.load_selector(e,js_i18n_main.load_after_moving)){var f=c.get_meta(d.item.closest(".section-tag"),"section");c.update_count(e.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),c.update_count(f.sectionM.find(".selector-count-state"),"add",1,"selector","");var g=b.resolve_unique_name(e.selectorH,f.sectionM,".selector-name","Moved",e.selectorMID);c.dom_replacements("selector",e.selector.add(e.selectorM),e.sectionSlug,f.sectionSlug,f.sectionH,e.selectorSlug,b.convert_to_param(g),g,e.selectorM.find(".selector-css-textarea").val()),c.selInFocusID==e.selectorID&&c.update_global_vars(c.get_meta(e.selectorM,"selector")),c.ajax_save_settings("save")}},custom_escape_quotes:function(a){var b=a.replace(/"/g,"cus-quot;").replace(/'/g,"cus-#039;");return b},escapeHTML:function(a){return b.hasValue()?a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},custom_to_non_escaped:function(a){var b=a.replace(/cus-quot;/g,'"').replace(/cus-#039;/g,"'");return b},regular_escape_quotes:function(a){var b=a.replace(/"/g,"&quot;").replace(/'/g,"&#039;");return b},regular_escaped_to_non_escaped:function(a){var b=a.replace(/&quot;/g,'"').replace(/&#039;/g,"'");return b},jquery_escape_quotes:function(a){var b=a.replace(/"/g,'\\"').replace(/'/g,"\\'");return b},jquery_escaped_to_non_escaped:function(a){var b=a.replace(/\\"/g,'"').replace(/\\'/g,"'");return b},custom_to_regular_escape:function(a){var b=a.replace(/cus-/g,"&");return b},sane_decimal:function(a){if(b.hasValue(a)&&("string"==typeof a||a instanceof String)&&-1!=a.indexOf("px")&&-1!=a.indexOf(".")){var c=a.split("px");return parseFloat(c[0]).toFixed(0)+"px"}return a},in_array:function(a,b){for(var c in b)if(b[c]==a)return!0;return!1},isNumber:function(a){return a==parseFloat(a)},isOdd:function(a){return b.isNumber(a)&&Math.abs(a)%2==1},check_fake:function(a,b){if(!b)var b=a.prev();a.hasClass("fake-radio")&&a.closest(".fake-radio-parent").find('input[type="radio"]').prop("checked",!1).end().find(".fake-radio").removeClass("on"),b.prop("checked",!0),a.addClass("on")},uncheck_fake:function(a,b){if(!b)var b=a.prev();if(a.hasClass("fake-radio"))return!1;if(!b)var b=a.prev();b.prop("checked",!1),a.removeClass("on")},toggle_radio_checkbox:function(a){if(a.hasClass("toggle-checked-folders"))c.toggle_multi_checkboxes(a);else{var d=a.prev();d.is(":checked")?b.uncheck_fake(a,d):b.check_fake(a,d)}},toggleFullScreen:function(a){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),a.removeClass("on"),c.full_screen_mode=!1):(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),a.addClass("on"),c.full_screen_mode=!0)},full_screen_changed:function(){c.toolbar_adjusted()}},c={stat:{win:window,doc:document,body:a("body"),tvr:a("#tvr"),nav:a("#tvr-nav"),top:a("#v-top-controls"),code:a("#hand-css-area"),res:a("#responsive-bar"),slider:a("#v-mq-slider"),opts:a("#tvr-options"),front:a("#v-frontend-wrap"),wiz:a("#advanced-wizard"),tools:a("#v-left-controls-wrap"),iframe:a("#viframe")},baseFontSize:parseInt(a("html").css("font-size")),meta:{},inputWaitingObj:{},profiler:[],debugCount:0,wasOpen:!1,leftMenu:a("#v-left-controls").hasClass("show")?!0:!1,placeholderFrame:!0,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:a("#ajaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,fullWidth:a("body").width(),resSliderWidth:0,tabsWidth:0,iframe_slider_set:!1,mqs:[],allDevicesWidth:b.hasValue(a("#all_devices_default_width").attr("rel"))?a("#all_devices_default_width").attr("rel").replace("px",""):a("body").width(),totalSels:parseInt(a("#total-sel-count").text()),trial:"1"==a("#plugin-trial").attr("rel")?!1:!0,trialNotice:js_i18n_main.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,typingTimer:0,doneTypingInterval:1200,saveInProgress:!1,reSave:!1,siteUrl:a("#site-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:a("#tooltip_delay").attr("rel").toLowerCase(),edgeMode:a("#edge-mode").attr("rel"),expanded:function(d){if("main_menu"==d)var e=a("#tvr-main-menu");else if("quick_section"==d)var e=a("#sec-in-focus");else if("quick_selector"==d)var e=a("#sel-in-focus");else if("mq"==d){var f=a("#"+c.selInFocusID);if(!b.isDomEl(f))return!1;var e=f.find("span.add-mq")}return e.hasClass("on")?!0:!1},init:function(){b.startT("total init"),c.reset_global_vars(),b.startT("init min/max media"),c.mqs=b.adjust_mqs_for_unit(TvrMQsCombined),b.endT("init min/max media"),b.startT("init full screen events"),c.stat.doc.addEventListener("fullscreenchange",b.full_screen_changed),c.stat.doc.addEventListener("webkitfullscreenchange",b.full_screen_changed),c.stat.doc.addEventListener("mozfullscreenchange",b.full_screen_changed),c.stat.doc.addEventListener("MSFullscreenChange",b.full_screen_changed),b.endT("init full screen events"),b.startT("init resizable custom code"),c.stat.code.find(".css-code-wrap").resizable({stop:function(b,d){var e=d.size.height-d.originalSize.height;a("#v-frontend-wrap").css("height",c.frameHeight-e),c.toolbar_adjusted()}}),b.endT("init resizable custom code"),b.startT("init tooltips"),"native"!=c.tooltipDelay&&(c.stat.body.click(function(b){var d=a(b.target);(d.hasClass("ui-tooltip")||d.hasClass("ui-tooltip-content"))&&c.clean_tooltips()}),c.stat.body.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:c.tooltipDelay},open:function(c,d){var e=d.tooltip,f=a(c.originalEvent.target||c.originalEvent.srcElement).closest(a(this).tooltip("option","items"));e.append('<span class="tp-pointer"></span>');var g=e.find(".tp-pointer");b.isDomEl(f)?g.position({my:"center center",at:"center bottom+12",of:f}):g.hide()}})),b.endT("init tooltips"),b.startT("init autocomplete menu override");a.ui.autocomplete.prototype._renderMenu;a.ui.autocomplete.prototype._renderMenu=function(c,d){var e=this;a.each(d,function(a,b){e._renderItemData(c,b)}),a(c).find("li").each(function(){var c=a(this);b.isDomEl(c.find("a"))||c.addClass("empty ui-menu-item")})},b.endT("init autocomplete menu override"),b.startT("init combobox events"),c.stat.tvr.on("focus","input.combobox",function(){var d=a(this),e=TvrCombo[d.attr("rel")];e||(e=[]),d.autocomplete({source:e,delay:0,minLength:0,appendTo:d.closest(".input-wrap"),open:function(){if(c.clean_tooltips(),d.removeAttr("aria-describedby"),d.next(".combo-arrow").addClass("on"),d.hasClass("property-input")){var a=c.get_meta(d,"property");a.property.find(".comp-mixed-table").addClass("manual-menu-showing")}},select:function(a,e){if(d.val(e.item.value),d.parent(".input-wrap").addClass("manual-val").find(".comp-style").addClass("hidden").end().find(".combo-arrow").removeClass("on"),d.hasClass("property-input"))if(d.hasClass("tvr-font-select")){var f=d.closest(".field-wrap").siblings(".tvr-font-custom");c.gFontTarget=f.find(".property-input"),"Google Font..."==e.item.value?c.show_google_fonts(f):c.hide_google_fonts(d,f)}else d.hasClass("img_display")&&(b.hasValue(e.item.value)?"none"==e.item.value&&c.update_bg_image(d,e.item.value):c.clear_bg_image(d)),c.ajax_save_settings("save",d);d.blur()},search:function(){d.addClass("adjusted-corner-radius")},close:function(){if(d.removeClass("adjusted-corner-radius").next(".combo-arrow").removeClass("on"),d.hasClass("property-input")){var a=c.get_meta(d,"property");a.property.find(".comp-mixed-table").removeClass("manual-menu-showing")}}})}),c.stat.tvr.on("mousedown","span.combo-arrow",function(){a(this).siblings(".ui-menu").is(":visible")&&(c.wasOpen=!0)}),b.endT("init combobox events"),b.startT("init disable chrome page save event"),a(c.stat.win).keypress(function(a){return 115==a.which&&a.ctrlKey||19==a.which?(a.preventDefault(),!1):!0}),b.endT("init disable chrome page save event"),b.startT("init custom save event"),a(c.stat.doc).keydown(function(d){return 83==d.which&&1==d.ctrlKey?(c.ajax_save_settings("save"),d.preventDefault(),!1):b.hasValue(a(d.target))&&a(d.target).attr("class")&&a(d.target).attr("class").indexOf("strictly-dropdown")>-1?(d.preventDefault(),!1):void 0}),b.endT("init custom save event"),b.startT("init bind inside labels"),b.bind_input_labels(a("#add-new-section").find("input").add(a("#wizard_folder"))),b.endT("init bind inside labels"),b.refresh_sortable(),b.startT("init custom scrollbars"),c.stat.tvr.find("div.scrollable-area").mCustomScrollbar({theme:"dark-3",live:!0,scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}),b.endT("init custom scrollbars"),b.startT("init double-click related fields event"),c.stat.opts.dblclick(function(b){var d=a(b.target);if(d.hasClass("autofillable")){var e=d.val(),f=d.attr("data-autofill"),g=c.get_meta(d,"group");g.group.find('input[data-autofill="'+f+'"]').each(function(){var b=a(this);b.attr("value",e),b.hasClass("color"),c.adjust_comp_span(b,"after")}),c.ajax_save_settings("save",d)}}),b.endT("init double-click related fields event"),b.startT("init keyup and input event"),c.stat.opts.delegate("input.property-input, .sp-input","keyup input",function(){var b=a(this),d=b.attr("class");if(!d)return!1;if(d.indexOf("property-input")>=0)c.inputWaitingObj=b,c.adjust_comp_span(b,"after");else if(d.indexOf("sp-input")>=0){var e=b.closest("span.input-wrap").find("input.color");if(c.inputWaitingObj=e,d.indexOf("sp-input-opacity")<0){var f=tinycolor(b.val()).toRgb();if(!tinycolor(f).isValid())return;e.spectrum("set",f),c.spUpdateInputs(tinycolor(f),e,b)}else{var g=a(this).val();if(isNaN(g)||0>g||g>1)return;var h=e.spectrum("get").toRgb();h.a=g,e.spectrum("set",h),c.spUpdateInputs(tinycolor(h),e,b)}}d.indexOf("img_display")<0&&(c.typingTimer&&clearTimeout(c.typingTimer),c.typingTimer=setTimeout(c.done_typing,c.doneTypingInterval))}),b.endT("init keyup and input event"),b.startT("init mouseenter event"),c.stat.body.delegate(".property-input, tr.mixed-val, .sug-sel, .ui-tooltip, .sel-in-focus, .change-selector, li.mt-screen-preview","mouseenter",function(){var d=!1,e=!0,f=a(this),g=f.attr("class");return g?(g.indexOf("ui-tooltip")>=0?c.clean_tooltips():g.indexOf("property-input")>=0?c.adjust_comp_span(f,"hover"):g.indexOf("mt-screen-preview")>=0?c.set_screen_preview(f,"hover"):g.indexOf("mixed-val")>=0?(window.TvrSharedVars.mixedElKey=f.attr("rel"),d="mixed-hover"):g.indexOf("sel-in-focus")>=0?d="reg":g.indexOf("style-count-state")>=0?(window.TvrSharedVars.intelli_css=f.parent().attr("title"),d="sel-preview"):g.indexOf("sug-sel")>=0&&!f.parent().hasClass("in-focus")&&(b.startT("sug-sel hover"),window.TvrSharedVars.intelli_css=f.text(),a("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),d="intelli",e=!1,b.endT("sug-sel hover")),void(d&&(window.TvrSharedVars.highlightEnabled||(window.TvrSharedVars.tmpHighlighting=!0,c.toggle_highlighting()),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight(d,e)))):!1}),b.endT("init mouseenter event"),b.startT("init mouseleave event"),c.stat.tvr.delegate(".property-input, tr.mixed-val, .sug-sel, .sel-in-focus, .change-selector, .sp-container, ul.mob-preview-list","mouseleave",function(){var b=a(this),d=b.attr("class");if(!d)return!1;if(d.indexOf("property-input")>=0)c.adjust_comp_span(b,"after");else if(d.indexOf("mob-preview-list")>=0)c.unset_screen_preview(b,"hover","all");else if(d.indexOf("mixed-val")>=0||d.indexOf("sel-in-focus")>=0||d.indexOf("style-count-state")>=0)c.return_normal_highlighting();else if(d.indexOf("sug-sel")>=0&&!b.parent().hasClass("in-focus")){var e=a("#code-suggestions").find("li.in-focus");e.removeClass("hover-elsewhere"),window.TvrSharedVars.intelli_css=e.find("textarea").text(),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("intelli")}}),b.endT("init mouseleave event"),b.startT("init MQs sortable"),a("#mq-list").sortable(),b.endT("init MQs sortable"),b.startT("init MQs validation check"),a("#edit-media-queries-form").submit(function(){var b=!1;return a("#mq-list").find("input.m-label, input.m-code").each(function(){return 0==a(this).val().length?(a(this).focus(),b=!0,!1):void 0}),b?(alert(js_i18n_main.complete_media_fields),!1):void 0}),b.endT("init MQs validation check"),c.load_visual_view(a("#load-visual")),$visCon=a("#tvr"),$visCon.click(function(d){var e=a(d.target);try{if(f=e.attr("class"),!f)var f="tvr-undefined"}catch(g){}if(c.close_all_expanded(e,f),f.indexOf("fake-checkbox")>=0||f.indexOf("fake-radio")>=0)b.toggle_radio_checkbox(e);else if("email-error"==e.attr("id"))c.email_error_report();else if(f.indexOf("property-input")>=0)c.clean_tooltips();else if(f.indexOf("combo-arrow")>=0)c.combo_arrow_clicked(e);else if(f.indexOf("main-menu-tip-trigger")>=0){var h=a("#tvr-main-menu");h.hasClass("on")?c.hide_main_menu():c.show_main_menu(h)}else if(f.indexOf("sec-in-focus")>=0||f.indexOf("sel-in-focus")>=0)c.quick_edit(e);else if(f.indexOf("edit-css-code")>=0)c.toggle_interface_feature(e,"code_editor");else if(f.indexOf("mt-screen-preview")>=0)c.toggle_screen_preview(e);else if(f.indexOf("m-logo")>=0)c.toggle_interface_feature(e,"interface");else if(f.indexOf("save-interface")>=0)c.ajax_save_settings("save");else if(f.indexOf("toggle-full-screen")>=0)b.toggleFullScreen(e);else if(f.indexOf("toggle-rulers")>=0)c.toggle_interface_feature(e,"rulers");else if(f.indexOf("show-dialog")>=0)c.show_dialog(e);else if(f.indexOf("close-dialog")>=0||f.indexOf("tvr-dialog")>=0)c.close_dialog(e);else if(f.indexOf("dialog-tab")>=0)c.dialog_tab_pressed(e);else if(f.indexOf("add-m-query")>=0)c.add_m_query(e);else if(f.indexOf("del-m-query")>=0)c.del_m_query(e);else if(f.indexOf("reveal-hidden-form-opts")>=0)c.reveal_form_opts(e);else if("ui-reset"==e.attr("id"))c.ui_reset(e);else if("clear-styles"==e.attr("id"))c.clear_styles(e);else if(f.indexOf("export-dialog-button")>=0)c.export_settings();else if(f.indexOf("ui-import")>=0)c.import_settings();else if(f.indexOf("reveal-unlock")>=0)a("#tvr_validate_form").addClass("show"),e.parent("p").hide();else if(f.indexOf("explain-link")>=0)c.toggle_help_info(e);else if(f.indexOf("restore-link")>=0)c.restore_rev(e);else if(f.indexOf("folder-menu-arrow")>-1||f.indexOf("selector-count-state")>-1||f.indexOf("folder-count-wrap")>-1||f.indexOf("folder-state-count")>-1)c.toggle_folder(e);else if(f.indexOf("new-section-input")>=0);else if(f.indexOf("new-section-add")>=0)c.add_section(e);else if(f.indexOf("toggle-rename-section")>=0)c.toggle_rename_section(e);else if(f.indexOf("cancel-rename-section")>=0)c.toggle_rename_section(e);else if(f.indexOf("rename-button")>=0)c.action_rename_section(e);else if(f.indexOf("copy-section")>=0)c.copy_section(e);else if(f.indexOf("delete-section")>=0)c.delete_section(e);else if(f.indexOf("reveal-add-selector")>=0)c.toggle_add_selector(e);else if(f.indexOf("cancel-add-selector")>=0)c.toggle_add_selector(e);else if(f.indexOf("add-selector")>=0)c.add_selector(e);else if(f.indexOf("toggle-modify-selector")>=0||f.indexOf("cancel-edit-selector")>=0)c.toggle_modify_selector(e);else if(f.indexOf("edit-selector")>=0)c.action_modify_selector(e);else if(f.indexOf("copy-selector")>=0)c.copy_selector(e);else if(f.indexOf("delete-selector")>=0)c.delete_selector(e);else if(f.indexOf("change-selector")>=0)c.tvr_iterate_selectors_v(e);else if(f.indexOf("scroll-buttons")>=0)c.quick_nav(e);else if(f.indexOf("cancel-wizard")>=0)c.hide_wizard();else if(f.indexOf("adv-main-label")>=0)c.toggle_adv_wizard();else if(f.indexOf("refine-button")>=0&&f.indexOf("disabled")<0)c.switch_html_element(e);else if(f.indexOf("wizard-add")>=0)c.wizard_new_selector(e);else if("toggle-highlighting"==e.attr("id"))c.toggle_highlighting();else if(f.indexOf("pg-icon")>=0)c.pg_icon_pressed(e);else if(f.indexOf("css-tab")>=0&&f.indexOf("active")<0)c.css_tab_pressed(e);else if(f.indexOf("adv-tab")>=0&&f.indexOf("active")<0)c.adv_tab_pressed(e);else if(f.indexOf("mq-tab")>=0)c.mq_tab_pressed(e);else if(f.indexOf("add-mq-icon")>=0)c.show_add_mq(e);else if(f.indexOf("mq-clear")>=0)c.clear_pg_fields(e);else if(f.indexOf("tvr-image-upload")>=0)c.launch_img_uploader(e);else if(f.indexOf("clear-bg-image")>=0)c.clear_bg_image(e);else if(f.indexOf("combobox")>=0)c.combobox_clicked(e);else if(f.indexOf("g-font")>=0){var i=e.closest(".field-wrap");c.gFontTarget=i.find(".property-input"),c.show_google_fonts(i)}else f.indexOf("css-info")>=0?c.load_css_ref(e):f.indexOf("input-icon-toggle")>=0?c.input_icon_toggle(e):f.indexOf("css-group-heading")>=0||f.indexOf("accordion-menu-arrow")>=0||f.indexOf("text-for-group")>=0?(e=e.closest(".css-group-heading"),c.update_accordion(e,a("#html-computed-css"))):f.indexOf("sug-sel")>=0&&c.sug_css_clicked(e)}),b.endT("total init")},show_main_menu:function(a){return c.itemAlreadyExpanded?!1:void a.addClass("on expanded")},hide_main_menu:function(){c.clean_tooltips(),a("#tvr-main-menu").removeClass("on expanded")},quick_edit:function(b){if(c.itemAlreadyExpanded)return!1;var d=c.get_meta(a("#"+c.selInFocusID),"selector");a("#main-menu-popdown").addClass("bye-for-now"),d.sectionM.addClass("hello-me");var e=d.sectionM.find(".menu-arrow"),f=d.selectorM.find(".edit-selector-form");if(e.hasClass("on")||c.toggle_folder(e),b.hasClass("sec-in-focus")){var g=d.sectionM;f.hasClass("show")&&c.toggle_modify_selector(f),d.sectionM.find(".folder-icon").removeClass("sortable-icon")}else{var g=d.selectorM;f.hasClass("show")||c.toggle_modify_selector(f),d.sectionM.addClass("goodbye-section"),d.selectorM.addClass("hello-me"),d.selectorM.find(".selector-icon").removeClass("sortable-icon")}g.addClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar({theme:"dark-3",scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}),b.addClass("on")},close_quick_edit:function(){c.clean_tooltips();var b=a("#main-menu-popdown"),d=b.find(".quick-edit-mode");if(d.hasClass("section-tag"))var e="folder",f=c.get_meta(d,"section"),g=f.sectionM;else{var e="selector",f=c.get_meta(d,"selector"),h=f.selectorM.find(".edit-selector-form");h.hasClass("show")&&h.removeClass("show");var g=f.sectionM.add(f.selectorM)}d.find("."+e+"-icon").addClass("sortable-icon"),d.removeClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar("destroy");var i=f.sectionM.find(".menu-arrow");i.hasClass("on")&&c.toggle_folder(i),a("#current-selector").find(".on").removeClass("on"),g.removeClass("hello-me goodbye-section"),b.removeClass("bye-for-now")},close_all_expanded:function(a){return c.itemAlreadyExpanded=a.hasClass("on")?!0:!1,!b.isDomEl(a.parents(".expanded")||b.isDomEl(a.closest(".sp-container")))||a.hasClass("add-mq-icon")||a.hasClass("change-selector")?(c.expanded("main_menu")?c.hide_main_menu():c.expanded("quick_section")||c.expanded("quick_selector")?c.close_quick_edit():c.expanded("mq")&&c.hide_add_mq(),void(window.TvrSharedVars.colorPickerDragging||c.picker_method("hide"))):!1},clean_tooltips:function(){if("native"==c.tooltipDelay)return!1;if("native"!=c.tooltipDelay){var d=a(document).data("ui-tooltip");if(b.hasValue(d))for(var e in d.tooltips)a("#"+e).remove()}},reset_global_vars:function(){b.startT("reset global vars"),c.selInFocusID="",window.TvrSharedVars.curSelCSS="#no-element",window.TvrSharedVars.intelli_css="#no-element",window.TvrSharedVars.pgInFocus="",window.TvrSharedVars.compPgInFocus="",b.endT("reset global vars")},update_global_vars:function(d){c.selInFocusID=d.selectorID,window.TvrSharedVars.curSelCSS=b.custom_escape_quotes(d.selectorM.find(".selector-css-textarea").val()),a("#last-edited-selector").val(c.selInFocusID),a.get(c.ajaxUrl+"&mcth_simple_ajax=1&last_viewed_selector="+c.selInFocusID,function(){});a("#current-selector");if(a("#sec-in-focus").hasClass("on"))var e="on";else var e="";if(a("#sel-in-focus").hasClass("on"))var f="on";else var f="";a("#current-selector").html('<span class="breadcrumb-arrow first-breadcrumb sec-in-focus-arrow">&raquo;</span><span id="sec-in-focus" class="sec-in-focus '+e+'" title="'+js_i18n_main.qedit_current_folder+'">'+d.sectionH+'</span> <span class="breadcrumb-arrow  sel-in-focus-arrow">&raquo;</span> <span id="sel-in-focus" class="sel-in-focus '+f+'" title="'+js_i18n_main.qedit_current_selector+'">'+d.selectorH+"</span>")},menu_object:function(b){return a("#"+b.replace("opts","strk"))},section_slug:function(b){var d=c.get_meta(a("#"+b),"selector");return d.sectionSlug},allowed_action:function(a,d){var e=!1;if(!c.trial)return!0;if("Edit Sel"==d&&b.isDomEl(a.closest(".trial-disabled")))var e=!0;if("Add Sel"==d&&c.totalSels>=9)var e=!0;return e?(alert(c.trialNotice),!1):!0},load_css_ref:function(a){c.show_dialog(a)},font_changed:function(a){c.ajax_save_settings("save",a),c.adjust_comp_span(a,"after")},show_google_fonts:function(b){b.show("fast"),a.colorbox({href:a("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),c.font_changed(c.gFontTarget)},hide_google_fonts:function(a,b){c.gFontTarget.val("").prop("val",""),b.hide(),c.font_changed(a)},insert_google_font:function(b){a.colorbox.close(),c.gFontTarget.val(b).focus(),c.font_changed(c.gFontTarget)},launch_img_uploader:function(a){return wp.media.editor.send.attachment=function(b,d){c.update_bg_image(a,d.url)},wp.media.editor.open(a),!1},update_bg_image:function(a,d){var e=c.get_meta(a,"property");e.property.find(".image-url-store").val(d),e.property.find(".img_display").val(b.basename(d)),c.ajax_save_settings("save",e.property.find(".img_display")),c.adjust_comp_span(e.property.find(".img_display"),"after")},clear_bg_image:function(a){c.update_bg_image(a,"")},set_up_editors:function(){var b=a("#editors-list").attr("rel").split("|");for(var c in b)alert(b[c]),TvrEditors[b[c]]=ace.edit("custom-css-"+b[c]),TvrEditors[b[c]].setTheme("ace/theme/chrome"),TvrEditors[b[c]].getSession().setMode("ace/mode/css"),TvrEditors[b[c]].setShowPrintMargin(!1),TvrEditors[b[c]].getSession().on("change",function(){a("#custom-css-"+b[c]).addClass("changed")})},input_icon_toggle:function(a){var b=a.attr("data-input-type");if("important"==b){var d=c.get_meta(a,"property"),e=d.property.find(".property-input").attr("name");if(a.hasClass("imp-mq"))var f=e.replace("[non_section]","[non_section][important]").replace("[styles]","");else var f=e.replace("tvr_mcth","tvr_mcth[non_section][important]").replace("[styles]","")}else if("pie"==b||"boxsizing"==b)var d=c.get_meta(a,"selector"),f=d.selectorM.find("input.register-selector").attr("name")+"["+b+"]";if("off"==a.attr("rel")){var g='<input class="'+b+'-tracker" type="hidden" name="'+f+'" value="1" />';a.attr("rel","on").addClass("active").before(g)}else"on"==a.attr("rel")&&a.attr("rel","off").removeClass("active").prev("."+b+"-tracker").remove();c.ajax_save_settings("save")},auto_clean:function(a,b,d){"group"==b&&c.remove_property_group(a,d)},get_meta:function(d,e){c.meta={};var f=["stub","section","selector","group","property"];for(var g in f)if(f[g]==e){if(d.attr("class")&&d.attr("class").indexOf(e+"-tag")>=0)var h=d;else var h=d.closest("."+e+"-tag");var i=h.attr("id"),j=i.split("-")}var k="";for(var l in j)if(0!=l&&5!=l)if(e=f[l],
k+="-"+j[l],"property"==e&&(k+="-"+j[5],"all"==j[5]&&(k+="-devices")),c.meta[e]=a("#opts"+k),c.meta[e+"M"]=a("#strk"+k),c.meta[e+"Slug"]=j[l],"section"==e)c.meta[e+"T"]=a(c.meta[e+"M"]).find("input.section-tracker"),c.meta[e+"H"]=a(c.meta.sectionM).find(".section-display-name").val(),c.meta[e+"ID"]="opts-"+c.meta.sectionSlug,c.meta[e+"MID"]="strk-"+c.meta.sectionSlug;else if("selector"==e){var m=a(c.meta.selectorM).find(".selector-label").val().split("|");c.meta[e+"T"]=a(c.meta[e+"M"]).find("input.selector-tracker"),c.meta[e+"H"]=m[0],c.meta[e+"ID"]="opts-"+c.meta.sectionSlug+"-"+c.meta.selectorSlug,c.meta[e+"MID"]="strk-"+c.meta.sectionSlug+"-"+c.meta.selectorSlug}else"group"==e&&(c.meta[e+"H"]=b.ucwords(c.meta[e+"Slug"]),c.meta[e+"ID"]="opts-"+c.meta.sectionSlug+"-"+c.meta.selectorSlug+"-"+c.meta.groupSlug,c.meta[e+"MID"]="strk-"+c.meta.sectionSlug+"-"+c.meta.selectorSlug+"-"+c.meta.groupSlug);return c.meta},colorpicker_bind:function(b){b.find("input.color").spectrum({appendTo:"parent",showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"hex3",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(){c.inputWaitingObj={}},show:function(b){var d=c.get_meta(a(this),"property"),e=c.inputWaitingObj=d.property.find("input.color"),f=d.property.find(".sp-container"),g=parseInt(f.css("top").replace("px",""));if(!f.hasClass("extra-fields-added")){var h='<div class="sp-mt-inputs">';h+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',h+='<input type="text" class="sp-input-rgb sp-input">',h+='<input type="text" class="sp-input-hsl sp-input">',h+='<input type="text" class="sp-input-hex sp-input">',h+="</div>",f.addClass("extra-fields-added").append(h).wrapInner("<div class='sp-wrap'>"),f.find(".sp-clear").bind("click.mt",function(){c.spClearInputs(f),c.ajax_save_settings("save",c.inputWaitingObj),c.picker_method("hide")})}if(c.spUpdateInputs(b,this),f.css("top",g+27),!d.property.hasClass("manual-val")){var i=d.property.find("span.comp-style").find("span").attr("style");if(i){var j=i.split("background-color:");e.spectrum("set",j[1]),c.spUpdateInputs(tinycolor(j[1]),e,{}),c.ajax_save_settings("save")}}},move:function(a){c.spUpdateInputs(a,this),c.typingTimer&&clearTimeout(c.typingTimer),c.typingTimer=setTimeout(c.done_typing,200)}}).on("dragstart.spectrum",function(){window.TvrSharedVars.colorPickerDragging=!0}).on("dragstop.spectrum",function(){window.TvrSharedVars.colorPickerDragging=!1})},picker_method:function(a){if(b.isDomEl(c.inputWaitingObj))if("hide"==a)c.inputWaitingObj.spectrum("hide");else if("clickpick"==a){var d=c.get_meta(c.inputWaitingObj,"property");d.property.find(".sp-container").trigger("mouseup")}},spUpdateInputs:function(b,d,e){var f=a(d);if(!b)return void f.val("");f.val(b.toRgbString());var g=c.get_meta(f,"property");g.property.find(".sp-input-hex").not(e).val(b.toHexString()),g.property.find(".sp-input-rgb").not(e).val(b.toRgbString()),g.property.find(".sp-input-hsl").not(e).val(b.toHslString()),g.property.find(".sp-input-opacity").not(e).val(b.toRgb().a)},spClearInputs:function(a){a.find(".sp-input").val("").end().find(".sp-alpha-inner").css("background","transparent")},update_count:function(d,e,f,g,h){b.hasValue(h)||(h=0);var i=parseInt(d.attr("rel"));if("add"==e)var j=i+parseInt(f);else if("subtract"==e)var j=i-parseInt(f);if(d.attr("rel",j),"section"!=g){if(0==i){d.after(' <span class="count-wrap">(<span class="state-count"></span>)</span>')}if(0==j){d.next("span").remove()}else d.next("span").find(".state-count").text(parseInt(j))}if("section"==g){var k=a("#total-sec-count"),l=parseInt(k.text());j>i?(window.TvrSharedVars.totalSecs=parseInt(l+f),k.text(window.TvrSharedVars.totalSecs),c.totalSels=c.totalSels+parseInt(h),a("#total-sel-count").text(parseInt(c.totalSels))):(window.TvrSharedVars.totalSecs=parseInt(l-f),k.text(window.TvrSharedVars.totalSecs),c.totalSels=c.totalSels-parseInt(h),a("#total-sel-count").text(parseInt(c.totalSels)))}else if("selector"==g){var m=a("#total-sel-count"),n=parseInt(m.text());j>i?(c.totalSels=parseInt(n+f),m.text(c.totalSels)):(c.totalSels=parseInt(n-f),m.text(c.totalSels))}c.toggle_enabled_buttons()},com_data_loading:function(b,d){b.find("."+d+"-row").append(a("#loading-gif-template").clone().removeAttr("id")),c.update_prog_indicator("plus",js_i18n_main.load_style_opt)},com_data_finished_loading:function(a,b){a.find("img.ajax-loader").remove(),c.update_prog_indicator("minus",b)},ajax_load_ui_data:function(d,e,f,g,h,i,j,k){c.dataLoading=!0,c.log_action(e,"data-load");var l=a("#ui-nonce").text(),m="admin.php?page=tvr-microthemer.php",n="action=tvr_microthemer_ui_load_styles&tvr_load_section="+g;n+="&tvr_load_type="+i,n+="&_wpnonce="+l;n+="&tvr_load_selector="+h,a.ajax({type:"GET",url:m,async:!0,data:n,timeout:2e4,error:function(a,b){c.com_data_finished_loading(e,[js_i18n_main.load_style_opt_failed,"<p>"+c.handle_ajax_error(a,b)+"</p><p>"+js_i18n_main.load_failed_explain+"</p>"])},success:function(g){var h=a(g).find("#tmp-wrap").html();if(d.append(h),c.colorpicker_bind(d),f.val(2),3!=j){if(c.unlog_action(e,"data-load"),c.com_data_finished_loading(e),k==js_i18n_main.load_before_modifying&&c.toggle_modify_selector(e.find(".edit-icon")),k==js_i18n_main.load_before_iterating&&c.tvr_iterate_selectors_v(e),k==js_i18n_main.load_before_copying&&c.copy_selector(e),k==js_i18n_main.load_after_moving){var i={item:e};b.selector_received({},i)}}else--c.selsToLoad,0==c.selsToLoad&&(c.unlog_action(e,"all-sels-loading"),k==js_i18n_main.sec_rename&&c.toggle_rename_section(e.find(".edit-icon")),k==js_i18n_main.sec_copy&&c.copy_section(e.find(".copy-icon")),c.com_data_finished_loading(e))},complete:function(){c.unlog_action(e,"data-load"),c.dataLoading=!1}})},ajax_load_revisions_table:function(){c.update_prog_indicator("plus",js_i18n_main.load_revisions_table);var b=a("#revisions-url").attr("rel");a.ajax({type:"GET",url:b,async:!0,timeout:2e4,error:function(a,b){c.update_prog_indicator("minus",[js_i18n_main.load_revisions_table_failed,"<p>"+c.handle_ajax_error(a,b)+"</p>"])},success:function(b){var d=a(b).find("#tmp-wrap").html();a("#revision-area").html(d),c.update_prog_indicator("minus")},complete:function(){}})},ajax_load_css:function(){c.update_prog_indicator("plus",js_i18n_main.retrieve_css);var b=a("#active-styles-url").attr("rel")+"?nocache="+(new Date).getTime();a.ajax({type:"GET",url:b,async:!0,timeout:2e4,error:function(a,b){c.update_prog_indicator("minus",[js_i18n_main.retrieve_css_failed,"<p>"+c.handle_ajax_error(a,b)+"</p>"])},success:function(b){a("#generated-css").html(b),c.update_prog_indicator("minus")},complete:function(){}})},ajax_load_external_js:function(b,d){c.update_prog_indicator("plus",js_i18n_main.load_script);var e=a("#plugin-url").attr("rel")+"js/"+b;a.getScript(e).done(function(){"ACE code editor script"==d&&c.show_hand_css(a("#edit-css-code")),c.update_prog_indicator("minus")}).fail(function(a,b){c.update_prog_indicator("minus",[js_i18n_main.load_script_failed,"<p>"+tvrsprintf(js_i18n_main.load_script_failed_p,d)+"</p><p>"+c.handle_ajax_error(a,b)+"</p>"])})},ui_reset:function(){var b=confirm(js_i18n_main.reset_settings_confirm);if(!b)return!1;var d,e,f,g,h;d="reset",e=a("#ui-url").attr("rel"),f=[js_i18n_main.reset_empty_folders],g="GET",h=a("#resetUrl").attr("rel"),c.general_ajax_submission(d,e,f,g,h)},clear_styles:function(){var b=confirm(js_i18n_main.clear_styles_confirm);if(!b)return!1;var d,e,f,g,h;d="clear",e=a("#ui-url").attr("rel"),f=[js_i18n_main.restore_settings],g="GET",h=a("#clearUrl").attr("rel"),c.general_ajax_submission(d,e,f,g,h)},restore_rev:function(b){var d=confirm(js_i18n_main.restore_settings_confirm);if(!d)return!1;var e,f,g,h,i;e="restore",f=a("#ui-url").attr("rel"),g=[js_i18n_main.restore_settings],h="GET",i=b.attr("rel"),c.general_ajax_submission(e,f,g,h,i)},update_code_editor_textareas:function(){a("#code-editors-wrap").find("pre.changed").each(function(){var b=a(this),c=b.attr("rel"),d=TvrEditors[c].getValue();b.prev("textarea").val(d)})},pre_save:function(a){var b=c.get_meta(a,"property");c.maybe_set_unit(b,a),c.adjust_comp_span(a,"after");var b=c.get_meta(a,"selector");c.selector_check_values(b.selector,!0,!0,!0)},maybe_set_unit:function(a,c){var d=TvrPref.my_props[a.groupSlug].pg_props[a.propertySlug].default_unit;if(b.hasValue(d)){var e=c.val();"px (implicit)"!=d&&b.isNumber(e)&&c.val(e+d)}},ajax_save_settings:function(d,e){if(b.isDomEl(e)&&c.pre_save(e),c.saveInProgress)return c.reSave=!0,!1;c.saveInProgress=!0;var f=a("#ui-url").attr("rel");c.update_prog_indicator("plus",js_i18n_main.save_settings),c.update_code_editor_textareas();a("#tvr_microthemer_ui_serialised");a("#tvr-serialised-data").val(a("#tvr_microthemer_ui_save, #microthemer_ui_settings_export").serialize()),a.ajax({type:"POST",url:f,data:a("#tvr_microthemer_ui_serialised").serialize(),timeout:2e4,error:function(a,b){c.reSave=!1,c.update_prog_indicator("minus",[js_i18n_main.save_settings_error,"<p>"+c.handle_ajax_error(a,b)+"</p>"])},success:function(e){c.reSave&&(c.reSave=!1,c.saveInProgress=!1,c.ajax_save_settings("save"));var f=a(e);c.update_prog_indicator("minus"),c.update_prog_indicator("plus",js_i18n_main.refresh_styles),window.TvrSharedVars.g_url=f.find("#google-url-to-refresh").text(),c.iframe_functions_loaded()?window.frames.viframe.TvrExportVars.refreshCSS():window.TvrSharedVars.awaitingIframeReloadAfterSave=!0;var g=f.find("#microthemer-notice").html();if(null==g){var h,i=a("#log-item-template").clone().removeAttr("id");jQuery.each(jQuery.browser,function(a,b){h+=a+" : "+b+"\n"}),a("#error-report-form").find('textarea[name="tvr_php_error"]').val(e).end().find('textarea[name="tvr_serialised_data"]').val(a("#tvr-serialised-data").val()).end().find('textarea[name="tvr_browser_info"]').val(h)}else{var i=a(g).find("li.tvr-message"),j=f.find(".script-feedback");a("#script-feedback").html(j)}if(a("#full-logs").find(".logs").html(i),c.update_short_status(),"view-css"==d&&c.ajax_load_css(),"export"==d){var k=a("#sanit-export-name").text();k&&(c.update_packs_obj(b.readable_name(k)),a("#sanit-export-name").text(""));var l=a("#export-to-pack-dialog").find("span.export-dialog-button");c.reload_iframe("manage-design-packs",l),c.close_dialog()}},complete:function(){c.saveInProgress=!1}})},update_packs_obj:function(a){TvrCombo.directories[TvrCombo.directories.length]=a,TvrCombo.directories.sort()},handle_ajax_error:function(a,b){return 0==a.status?js_i18n_main.error_connection:404==a.status?js_i18n_main.error_404:500==a.status?js_i18n_main.error_500:"parsererror"==b?js_i18n_main.error_parser:"timeout"==b?js_i18n_main.error_timeout:js_i18n_main.error_unknown+"\n"+a.responseText},email_error_report:function(){c.update_prog_indicator("plus",js_i18n_main.send_error);var b=a("#ui-nonce").text(),d=a("#ui-url").attr("rel");d+="&action=tvr_error_email&_wpnonce="+b;var e=a("#error-report-form").serialize();a.ajax({type:"POST",url:d,data:e,timeout:2e4,error:function(a,b){c.update_prog_indicator("minus",[js_i18n_main.send_error_failed,"<p>"+c.handle_ajax_error(a,b)+"</p>"])},success:function(b){c.update_prog_indicator("minus");var d=a(b),e=d.find("#microthemer-notice").html();if(e)var f=a(e).find("li.tvr-message");a("#full-logs").find(".logs").html(f),c.update_short_status()}})},show_dialog:function(d){c.close_dialog();var e=d.attr("rel");if("not-yet"==e)return!1;if(a("#"+e+"-dialog").addClass("show"),"import-from-pack"==e&&b.hasValue(d.attr("data-pack-name"))&&a("#import_from_pack_name").val(d.attr("data-pack-name")),"export-to-pack"==e){var f="";a("#tvr-menu").find(".section-tag").each(function(){var b=c.get_meta(a(this),"section"),d=parseInt(b.sectionM.find(".selector-count-state").attr("rel")),e="",g="";d>0&&(e='checked="checked"',g="on"),f+='<li><input type="checkbox" name="export_sections['+b.sectionSlug+']" '+e+' /> <span class="fake-checkbox '+g+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+b.sectionH+"</span></li>"}),a("#available-folders").html(f),c.update_code_editor_textareas();var g=a("#custom-css");a("#hand-css-area").find("textarea.hand-css-textarea").each(function(){var c=a(this),d=g.find(".custom-"+c.attr("id"));b.hasValue(c.val())?b.check_fake(d):b.uncheck_fake(d)}),a("#export_to_pack").val(1),a("#export_pack_name").val("")}"display-css-code"==e&&c.ajax_save_settings("view-css"),"display-revisions"==e&&c.ajax_load_revisions_table(),("manage-design-packs"==e||"program-docs"==e)&&c.reload_iframe(e,d)},close_dialog:function(){a("#tvr").find("div.tvr-dialog").removeClass("show"),a("#export_to_pack, #new_pack").val(0)},reload_iframe:function(c,d){if("manage-design-packs"==c)var e="manage_iframe";else if("program-docs"==c)var e="docs_iframe";var f=a("#"+e),g=f.attr("rel");if(d&&b.hasValue(d.attr("data-prop"))){g="https://themeover.com/"+d.attr("data-prop")+"/";var h=!0}(1!=f.attr("data-frame-loaded")||h||b.isDomEl(d.closest(".dialog-footer")))&&(window.frames[e].location=g,f.attr("data-frame-loaded",1))},toggle_help_info:function(a){a.next().slideToggle("fast",function(){})},scroll_to_bottom:function(a){a.scrollTop(a.scrollHeight)},toggle_multi_checkboxes:function(b){var c=a("#available-folders, #custom-css");b.hasClass("on")?c.find("input").prop("checked",!1).end().find(".fake-checkbox").add(b).removeClass("on"):c.find("input").prop("checked",!0).end().find(".fake-checkbox").add(b).addClass("on")},import_settings:function(){if(""==a("#import_from_pack_name").val())return alert(js_i18n_main.select_design_pack),!1;if(!a("#ui-import-overwrite").is(":checked")&&!a("#ui-import-merge").is(":checked"))return alert(js_i18n_main.choose_import_method),!1;if(a("#ui-import-overwrite").is(":checked"))var b="overwrite";else var b="merge";var d,e,f,g,h;d="import",e=a("#ui-url").attr("rel"),f=[tvrsprintf(js_i18n_main.import_settings,b)],g="POST",h=a("#microthemer_ui_settings_import").serialize(),c.general_ajax_submission(d,e,f,g,h)},general_ajax_submission:function(d,e,f,g,h){var i=-1;c.update_prog_indicator("plus",f[i++]),a.ajax({type:g,url:e,data:h,timeout:2e4,error:function(a,e){c.update_prog_indicator("minus",[b.ucwords(d)+" error","<p>"+c.handle_ajax_error(a,e)+"</p>"]),c.close_dialog()},success:function(){window.location=e}})},export_settings:function(){if(!a("#export_pack_name").val())return alert(js_i18n_main.select_settings_pack),!1;var b=a("#export_pack_name").val().toLowerCase(),d=!1;for(var e in TvrCombo.directories)if(TvrCombo.directories[e].toLowerCase()==b){d=!0;break}d||a("#new_pack").val(1),c.ajax_save_settings("export")},add_m_query:function(b){var c=b.attr("rel"),d=a("#unq-base").attr("rel");b.attr("rel",++c);var e=a("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+c);e.find("input").each(function(){a(this).attr("name",a(this).attr("name").replace("key",d+c))}),a("#mq-list").append(e).find("li").filter(":last").hide().fadeIn("fast").end()},del_m_query:function(b){b.parents("li.mq-row").fadeOut("slow",function(){a(this).remove()})},reveal_form_opts:function(a){var b=a.attr("rel");a.closest("li").siblings(".hidden."+b).addClass("show")},toggle_folder:function(a){var b=c.get_meta(a,"section"),d=b.sectionM.find("ul.selector-sub"),e=b.sectionM.find(".menu-arrow");e.hasClass("on")?(e.removeClass("on"),d.hide()):(e.addClass("on"),d.show())},dom_replacements:function(c,d,e,f,g,h,i,j,k,l){return"section"==c&&(d.find("input, select").each(function(){var c=a(this);b.hasValue(c.attr("name"))&&c.attr("name",c.attr("name").replace("tvr_mcth["+e+"]","tvr_mcth["+f+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+f+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+f+"]"))}),d.find(".section-name .name-text").text(g),d.find(".section-display-name").val(g),d.find(".rename-input").val(g),d.find(".selector-tag, .group-tag, .property-tag").add(d).each(function(){var b=a(this);b.attr("id",b.attr("id").replace(e,f))})),"selector"==c&&(d.find(".selector-name").attr("title",b.regular_escape_quotes(k)),d.find(".selector-name .name-text").text(j),d.find(".selector-label").val(j+"|"+k),d.find(".selector-name-input").val(j),d.find(".selector-css-textarea").val(k)),"group"==c&&(d.removeAttr("id"),d.attr("class",d.attr("class").replace("property-fields-all-devices","property-fields-"+l)),"all-devices"!=l&&d.find(".property-input").each(function(){var b=a(this);b.attr("name",b.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+l+"]"))}).end().find(".important-toggle").each(function(){a(this).removeClass("imp-reg").addClass("imp-mq")}).end().find(".property-tag").each(function(){var b=a(this);b.attr("id",b.attr("id").replace("-all-devices","-"+l))})),("selector"==c||"group"==c)&&(d.find("input").each(function(){var c=a(this);b.hasValue(c.attr("name"))&&c.attr("name",c.attr("name").replace("tvr_mcth["+e+"]["+h+"]","tvr_mcth["+f+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+f+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+f+"]["+i+"]"))}),d.find(".selector-tag, .group-tag, .property-tag").add(d).each(function(){try{var b=a(this);b.attr("id",b.attr("id").replace(e+"-"+h,f+"-"+i))}catch(c){}})),d},add_section:function(d){var e=b.ucwords(d.siblings(".new-section-input").val()),f=b.new_name_checks(e,"folder");if(!f)return!1;var g=c.dom_replacements("section",a("#strk-selector_section").add(a("#opts-selector_section")).clone(),"selector_section",f.newName,f.newNameHuman);a("#tvr-options").append(g[1]),a("#tvr-menu").append(g[0]).find("li").filter(":last").hide().fadeIn("fast",function(){a("#add-new-section").find("input.new-section-input").val("");var b=a("#section-count-state");c.update_count(b,"add",1,"section")}),b.refresh_sortable(),a("#main-menu-scroll").mCustomScrollbar("scrollTo","bottom"),c.ajax_save_settings("save")},load_section_selectors:function(b,d){var e=b.sectionM.find('input.selector-tracker[value="0"]');return c.selsToLoad=e.length,c.totalToLoad=c.selsToLoad,c.selsToLoad>0?c.action_in_prog(b.sectionM,"all-sels-loading")?!0:(c.log_action(b.sectionM,"all-sels-loading"),c.com_data_loading(b.sectionM,"sec"),e.each(function(){b=c.get_meta(a(this),"selector"),c.ajax_load_ui_data(b.selector,b.sectionM,b.selectorT,b.sectionSlug,b.selectorSlug,"selector",3,d)}),!0):!1},toggle_rename_section:function(a){var b=c.get_meta(a,"section");if(!c.action_in_prog(b.sectionM,"rename")&&!c.action_in_prog(b.sectionM,"data-load")&&!c.load_section_selectors(b,"sec rename, load styles discretely")){c.log_action(b.sectionM,"rename");var b=c.get_meta(a,"section");$form=b.sectionM.find(".edit-section-form"),$name=b.sectionM.find(".section-name"),$form.hasClass("show")?($name.show(),$form.removeClass("show")):($name.hide(),$form.addClass("show")),c.unlog_action(b.sectionM,"rename")}},action_rename_section:function(d){var e=c.get_meta(d,"section"),f=b.ucwords(e.sectionM.find(".rename-input").val());if(b.convert_to_param(f)==e.sectionSlug){var g=[];g.newName=e.sectionSlug,g.newNameHuman=f}else{var g=b.new_name_checks(f,"folder");if(!g)return!1}var h=g.newName,i=g.newNameHuman,j=e.sectionSlug,k=e.sectionM.add(e.section);c.dom_replacements("section",k,j,h,i),e=c.get_meta(a("#strk-"+h),"section"),c.toggle_rename_section(e.sectionM),c.selInFocusID.indexOf("opts-"+j)>=0&&c.update_global_vars(c.get_meta(e.section.find("li.in-focus"),"selector"))},copy_section:function(d){var e=c.get_meta(d,"section");if(!c.action_in_prog(e.sectionM,"copy")&&!c.load_section_selectors(e,"sec copy, load styles discretely")){c.log_action(e.sectionM,"copy");var f=b.resolve_unique_name(e.sectionH,a("#tvr-menu"),".section-name","Copy"),g=c.dom_replacements("section",c.proper_clone(e.section.add(e.sectionM)),e.sectionSlug,b.convert_to_param(f),f);g.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),g.find("img.ajax-loader").remove(),e.sectionM.after(g[0]),e.section.after(g[1]);var h=a("#section-count-state"),i=e.sectionM.find("span.selector-count-state").attr("rel");c.update_count(h,"add",1,"section",i),c.unlog_action(e.sectionM,"copy"),b.hasValue(c.selInFocusID)&&c.update_visual_controls(a("#"+c.selInFocusID))}},action_in_prog:function(a,c){return b.hasValue(a.attr(c+"-in-prog"))?!0:!1},log_action:function(a,b){a.attr(b+"-in-prog",1)},unlog_action:function(a,b){a.removeAttr(b+"-in-prog")},delete_section:function(d){var e=c.get_meta(d,"section");return c.action_in_prog(e.sectionM,"delete")||c.action_in_prog(e.sectionM,"all-sels-loading")?!1:(c.log_action(e.sectionM,"delete"),void e.sectionM.fadeOut("fast",function(){var d=e.sectionM.find("span.selector-count-state").attr("rel");if(c.update_count(a("#section-count-state"),"subtract",1,"section",d),b.hasValue(c.selInFocusID)&&e.sectionSlug==c.section_slug(c.selInFocusID)){c.expanded("quick_section")&&c.close_quick_edit();var f=c.selectorTrackerScan(e.sectionM,"next");if(b.isDomEl(f)||(f=c.selectorTrackerScan(e.sectionM,"prev")),b.isDomEl(f)){var g=c.get_meta(f,"selector");c.tvr_iterate_selectors_v(g.selectorT)}else;}e.section.remove(),e.sectionM.remove(),c.ajax_save_settings("save")}))},toggle_add_selector:function(a){var b=c.get_meta(a,"section"),d=b.sectionM.find(".add-selector-form");d.hasClass("show")?c.close_add_selector(d):c.reveal_add_selector(d)},reveal_add_selector:function(a){var b=c.get_meta(a,"section");a.addClass("show"),b.sectionM.find(".menu-arrow").hasClass("on")||c.toggle_folder(b.sectionM)},close_add_selector:function(a){a.removeClass("show"),a.find("textarea.selector-css-textarea, input.selector-name-input").val("")},selector_checks_values:function(a,c,d){var e=b.ucwords(a.val());if(""==e)return alert(js_i18n_main.enter_selector_name),!1;if(b.convert_to_param(e)==d){var f=[];f.newName=d,f.newNameHuman=e}else{var f=b.new_name_checks(e,"selector");if(!f)return!1}return c?(f.code=c,f):(alert(js_i18n_main.enter_css),!1)},show_hide_sel_custom:function(a,b){var d=c.analyse_sel_code(a);d.custom_styles?b.addClass("custom-styles"):b.removeClass("custom-styles")},analyse_sel_code:function(a){var b=[];if(a.indexOf("{")>=0){b.custom_styles=!0;var c=a.split("{");b.code=c[0]}else b.custom_styles=!1,b.code=a;return b},add_selector:function(d){if(!c.allowed_action(d,"Add Sel"))return!1;var e=c.get_meta(d,"section"),f=c.selector_checks_values(e.sectionM.find(".add-selector-form .selector-name-input"),e.sectionM.find(".add-selector-form .selector-css-textarea").val(),!1);if(!f)return!1;var g=c.dom_replacements("selector",a("#strk-selector_section-selector_css").add(a("#opts-selector_section-selector_css")).clone(),"selector_section",e.sectionSlug,e.sectionM.find(".name-text").text(),"selector_css",f.newName,f.newNameHuman,f.code);g.find(".view-state-input").val(1),e.sectionM.find(".selector-sub").append(g[0]),e.section.find(".opts-selectors-sub").append(g[1]),c.update_count(e.sectionM.find(".selector-count-state"),"add",1,"selector",""),e=c.get_meta(e.section.find(".selector-tag").last(),"selector"),c.tvr_iterate_selectors_v(e.selectorT),c.pg_icon_pressed(e.selector.find(".pg-icon-font")),b.refresh_sortable(),c.show_hide_sel_custom(f.code,e.selectorM.find(".selector-name")),c.close_add_selector(e.sectionM.find(".add-selector-form")),c.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),window.TvrSharedVars.intelli&&c.hide_wizard(),c.expanded("quick_selector")||c.expanded("quick_section")?c.close_quick_edit():c.expanded("main_menu")&&c.hide_main_menu(),c.ajax_save_settings("save")},load_selector:function(a,b){return 0!=a.selectorT.val()||c.action_in_prog(a.selectorM,"data-load")?!1:(c.com_data_loading(a.selectorM,"sel"),c.ajax_load_ui_data(a.selector,a.selectorM,a.selectorT,a.sectionSlug,a.selectorSlug,"selector",1,b),!0)},toggle_modify_selector:function(a){var b=c.get_meta(a,"selector");if(!c.action_in_prog(b.selectorM,"rename")&&!c.action_in_prog(b.selectorM,"data-load")&&!c.load_selector(b,"load selector before modifying")){c.log_action(b.selectorM,"rename");var d=b.selectorM.find(".edit-selector-form");d.hasClass("show")?(d.removeClass("show"),c.expanded("quick_selector")&&c.close_quick_edit()):d.addClass("show"),c.unlog_action(b.selectorM,"rename")}},action_modify_selector:function(a){var d=c.get_meta(a,"selector"),e=c.selector_checks_values(d.selectorM.find(".selector-name-input"),d.selectorM.find(".selector-css-textarea").val(),d.selectorSlug);if(!e)return!1;var f=e.newName,g=e.newNameHuman,h=d.sectionSlug,i=d.selectorM.add(d.selector);c.dom_replacements("selector",i,h,h,d.sectionH,d.selectorSlug,f,g,e.code),c.selInFocusID==d.selectorID&&c.update_global_vars(c.get_meta(d.section.find("li.in-focus"),"selector")),c.show_hide_sel_custom(e.code,d.selectorM.find(".selector-name")),window.TvrSharedVars.curSelCSS=b.custom_escape_quotes(e.code),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("reg",!0),c.ajax_save_settings("save"),c.toggle_modify_selector(d.selectorM),c.expanded("quick_selector")||c.expanded("quick_section")?c.close_quick_edit():c.expanded("main_menu")&&c.hide_main_menu()},proper_clone:function(a){var b=a.clone();return b.find("div.sp-replacer, div.sp-container").remove(),c.colorpicker_bind(b),b},copy_selector:function(d){if(!c.allowed_action(d,"Add Sel"))return!1;var e=c.get_meta(d,"selector");if(!c.action_in_prog(e.selectorM,"copy")&&!c.action_in_prog(e.selectorM,"data-load")&&!c.load_selector(e,js_i18n_main.load_before_copying)){c.log_action(e.selectorM,"copy");var f=b.resolve_unique_name(e.selectorH,e.sectionM,".selector-name","Copy"),g=c.dom_replacements("selector",c.proper_clone(e.selector.add(e.selectorM)),e.sectionSlug,e.sectionSlug,e.sectionH,e.selectorSlug,b.convert_to_param(f),f,e.selectorM.find(".selector-css-textarea").val());g.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),e.selectorM.after(g[0]),e.selector.after(g[1]),c.update_count(e.sectionM.find(".selector-count-state"),"add",1,"selector",""),c.unlog_action(e.selectorM,"copy"),b.hasValue(c.selInFocusID)&&c.update_visual_controls(a("#"+c.selInFocusID))}},delete_selector:function(a){var d=c.get_meta(a,"selector");return c.action_in_prog(d.selectorM,"delete")||c.action_in_prog(d.selectorM,"data-load")?!1:(c.log_action(d.selectorM,"delete"),void d.selectorM.fadeOut("fast",function(){if(c.update_count(d.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),d.selectorID==c.selInFocusID){c.expanded("quick_selector")&&c.close_quick_edit();var a=c.selectorTrackerScan(d.sectionM,"next","selector",d.selectorM);if(b.isDomEl(a)||(a=c.selectorTrackerScan(d.sectionM,"prev","selector",d.selectorM)),b.isDomEl(a)){var e=!0,f=c.get_meta(a,"selector");c.tvr_iterate_selectors_v(f.selectorT)}else var e=!1}d.selector.remove(),d.selectorM.remove(),e||c.update_visual_controls(!1),c.ajax_save_settings("save")}))},add_property_group:function(d,e){b.startT("add_property_group");var f=c.get_meta(d,"group"),g=c.dom_replacements("group",a("#option-group-template-"+f.groupSlug).clone(),"selector_section",f.sectionSlug,f.sectionM.find(".name-text").text(),"selector_css",f.selectorSlug,f.selectorH,"",e).addClass("show");c.colorpicker_bind(g),f.group.append(g),b.endT("add_property_group")},remove_property_group:function(a,b){var d=c.get_meta(a,"group");d.group.find(".property-fields-"+b).remove()},update_accordion:function(a,b){var c=b.find("li.accordion-item"),d=a.parent();if(d.hasClass("show-content"))var e=!0;return b.find(".accordion-menu-arrow.on").removeClass("on"),c.slideUp(function(){b.find(".show-content").removeClass("show-content")}),e?!1:(d.find(".accordion-menu-arrow").addClass("on"),a.siblings("li.accordion-item").slideDown(function(){d.addClass("show-content")}),!1)},pg_icon_pressed:function(b){if(!c.allowed_action(b,"Edit Sel"))return!1;var d=c.get_mq_focus(),e=c.get_pg_focus_obj();if(e){var f=c.get_meta(e,"group");c.pg_check_values(f.group,d,!1)||c.auto_clean(f.group,"group",d)}var g=window.TvrSharedVars.pgInFocus=b.attr("rel"),h=c.get_meta(c.get_pg_focus_obj(),"group");a.get(c.ajaxUrl+"&mcth_simple_ajax=1&pg_focus="+g,function(){}),c.get_pg_fields_obj(h.group,d)||c.add_property_group(h.group,d);var i=h.selector.find(".styling-options"),j=".group-tag",k=h.selector.find(".styling-option-icons"),l=".pg-icon",m=".pg-focus",n=g;c.update_tab(i,j,k,n,l,m),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str"),c.refresh_comp_css(),c.toolbar_adjusted()},show_add_mq:function(a){return c.itemAlreadyExpanded?!1:void a.addClass("on").parent().addClass("expanded on")},hide_add_mq:function(){var d=a("#"+c.selInFocusID);if(!b.isDomEl(d))return!1;c.clean_tooltips();var e=c.get_meta(a("#"+c.selInFocusID),"selector");e.selector.find("span.add-mq").removeClass("expanded on").find(".add-mq-icon").removeClass("on")},clear_pg_fields:function(b){var d=c.get_meta(b,"group");d.group.find(".property-input").each(function(){var b=a(this);b.val(""),b.hasClass("color")&&b.removeAttr("style"),c.adjust_comp_span(b,"after")}),c.ajax_save_settings("save",d.group.find(".property-input").first())},update_tab:function(b,d,e,f,g,h,i){if(e.find(g).removeClass("active").end().find(g+"-"+f).addClass("active").end().find(h).val(f),!i&&(b.find(d+".show").removeClass("show").end().find(d+"-"+f).addClass("show"),".pg-icon"==g)){var j=b.find(d+"-"+f);j.find(".property-fields").removeClass("show").end().find(".property-fields-"+c.get_mq_focus()).addClass("show")}".adv-tab"==g&&a.get(c.ajaxUrl+"&mcth_simple_ajax=1&adv_wizard_tab="+f,function(){})},mq_tab_pressed:function(d){var e,f=!0,g="",h=d.attr("rel"),i=a("#responsive-bar").find(".query-tabs"),j=".mq-tab",k=".device-focus";if(b.hasValue(c.selInFocusID)){var f=!1,l=c.get_pg_focus_obj();e=l,g=".property-fields",b.isDomEl(l.find(g+"-"+h))||c.add_property_group(l,h)}c.update_tab(e,g,i,h,j,k,f),c.update_iframe_slider(c.mqs[h].min,c.mqs[h].max),c.reset_mob_previews(),b.hasValue(c.selInFocusID)&&c.tab_check_values(a("#"+c.selInFocusID),h,!1,!0),a.get(c.ajaxUrl+"&mcth_simple_ajax=1&mq_device_focus="+h,function(){})},get_mq_focus:function(){var d=a("#responsive-bar").find("input.device-focus").val();return b.hasValue(d)&&b.hasValue(c.mqs[d])||(d="all-devices"),d},get_pg_fields_obj:function(a,c){var d=a.find("div.property-fields-"+c);return b.isDomEl(d)?d:!1},get_pg_focus_obj:function(){var d=a("#"+c.selInFocusID+"-"+window.TvrSharedVars.pgInFocus);return b.isDomEl(d)?d:!1},selector_check_values:function(a,b,d,e){var f=!1,g=c.get_meta(a,"selector");for(var h in TvrMQsCombined){var i=c.tab_check_values(a,h,d,e);if(i&&(f=!0,!d&&!e))break}return b&&c.update_style_signal(g.selectorM,f),f},tab_check_values:function(b,d,e,f){var g=!1;for(var h in TvrPGs){var i=c.pg_check_values(b.find("li.group-tag-"+h),d,f);if(i&&(g=!0,!f))break}return e&&c.update_style_signal(a("#responsive-bar").find(".mq-tab-"+d),g),g},pg_check_values:function(d,e,f){var g=c.get_meta(d,"group"),h=!1,i=c.get_mq_focus();return g.group.find("div.property-fields-"+e).find("input.property-input").each(function(){return b.isDefined(a(this).val())?(h=!0,!1):void 0}),f&&e==i&&c.update_style_signal(g.selector.find("li.pg-icon-"+g.groupSlug),h),h},update_style_signal:function(a,b){b?a.addClass("hasValues"):a.removeClass("hasValues")},css_tab_pressed:function(b){var d=a("#hand-css-area"),e=".css-code-wrap",f=d.find(".css-code-tabs"),g=b.attr("rel"),h=".css-tab",i=".css-focus";c.update_tab(d,e,f,g,h,i)},adv_tab_pressed:function(b){var d=a("#advanced-wizard"),e=".adv-area",f=d.find(".adv-tabs"),g=b.attr("rel"),h=".adv-tab",i=".adv-wizard-focus";c.update_tab(d,e,f,g,h,i),b.hasClass("adv-tab-html-inspector")&&c.adjust_wiz_comp_height()},dialog_tab_pressed:function(a){var b=a.closest(".dialog-main"),d=".dialog-tab-field",e=b.find(".dialog-tabs"),f=a.attr("rel"),g=".dialog-tab",h=".dummy-for-now";

c.update_tab(b,d,e,f,g,h)},combobox_clicked:function(a){a.autocomplete("search","").next(".combo-arrow").addClass("on"),c.combobox_focused(a)},combo_arrow_clicked:function(a){var b=a.prev();if("input"==b.prop("tagName").toLowerCase())var d=b;else var d=b.find("input");return c.wasOpen?(a.removeClass("on"),void(c.wasOpen=!1)):(a.addClass("on"),d.focus().autocomplete("search",""),void c.combobox_focused(a))},combobox_focused:function(b){b.hasClass("custom_css_unit")&&a("#css_unit_set").val("")},sug_css_clicked:function(b){b.closest("li").hasClass("in-focus")||(a("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),b.closest("li").addClass("in-focus"))},autoScroll:function(b){var c=a("#advanced-wizard").find(".scrollable-refined"),d=136;if("focus"==b)var e=a("#code-suggestions").find("li").first();else var e=a("#code-suggestion-"+b);var f=e.position().top;(13>f||f>d-13)&&c.animate({scrollTop:f},"500")},fix_ff_mq_bug:function(b,c){return c&&a.browser&&a.browser.mozilla?b-.3:b},toggle_interface_feature:function(b,d){var e=0;b.hasClass("on")?c.hide_interface_feature(b,d):(e=1,c.show_interface_feature(b,d)),"interface"==d&&(window.TvrSharedVars.show_interface=e),c.toolbar_adjusted(),a.get(c.ajaxUrl+"&mcth_simple_ajax=1&show_"+d+"="+e,function(){})},show_interface_feature:function(b,d){if(a("#visual-view").addClass("show-"+d),!b&&"interface"==d)var b=a("#m-logo");b.addClass("on"),"rulers"==d&&a("#common-devices-preview").removeClass("hidden"),c.toolbar_adjusted()},hide_interface_feature:function(b,d){a("#visual-view").removeClass("show-"+d),b.removeClass("on"),"rulers"==d&&a("#common-devices-preview").addClass("hidden"),c.neutral_interface()},neutral_interface:function(){c.hide_wizard(),c.toolbar_adjusted()},determine_slider_val:function(a,b){var d=0;return d=a&&!b?a:b?c.fix_ff_mq_bug(b,b):c.frameWidth},update_iframe_slider:function(b,d){var e=c.determine_slider_val(b,d),f=0,g=c.fullWidth;c.slider_moved(e,d,c.get_mq_focus()),c.update_ruler_highlighter(b,d),a("#iframe-min-width").text(b?"min: "+b+"px":""),a("#iframe-max-width").text(d?"max: "+d+"px":"");var h=c.stat.slider;h.slider({min:f,max:g,value:e,start:function(){window.TvrSharedVars.highlightEnabled&&(c.hide_highlighting(),window.TvrSharedVars.tmpHideHighlighting=!0)},slide:function(a,b){c.slider_moved(b.value,d,c.get_mq_focus()),c.reset_mob_previews()},change:function(b,e){if(c.slider_moved(e.value,d,c.get_mq_focus()),a("#visual-view").hasClass("show-wizard")){var f="intelli";window.frames.viframe.TvrExportVars.get_computed_styles({},"obj",!0),c.refresh_wizard_comp_css()}else var f="reg";window.TvrSharedVars.tmpHideHighlighting&&c.show_highlighting(),c.screen_width_adjusted(f)}}),c.iframe_slider_set=!0},slider_moved:function(b,d,e){c.animate_screen?a("#v-frontend").width(c.animate_screen).stop(!0).animate({width:c.fix_ff_mq_bug(b,d)},"slow",function(){c.animate_screen=!1}):a("#v-frontend").width(c.fix_ff_mq_bug(b,d)),a("#iframe-pixel-width").text(b+"px"),c.check_slider_within_range(b,e)},toggle_screen_preview:function(a){a=a.closest("li.mt-screen-preview"),a.hasClass("clicked")?c.unset_screen_preview(a,"clicked"):c.set_screen_preview(a,"clicked")},set_screen_preview:function(d,e){var f=a("#common-devices-preview").find("li.clicked");if("hover"==e&&b.isDomEl(f))return!1;f.removeClass(e),c.animate_screen=a("#v-frontend").width();var g=parseInt(d.attr("rel"));c.stat.slider.slider("value",TvrMobPreview[g][1]),a("#height-screen").removeClass("hidden").css("top",TvrMobPreview[g][2]+19+"px"),d.addClass(e)},unset_screen_preview:function(d,e){if(a("#height-screen").addClass("hidden"),c.animate_screen=a("#v-frontend").width(),"hover"==e){d.find("li.hover").removeClass(e);var f=a("#common-devices-preview").find("li.clicked");if(b.isDomEl(f))return void c.set_screen_preview(f)}else d.removeClass(e);var g=c.get_mq_focus(),h=c.determine_slider_val(c.mqs[g].min,c.mqs[g].max);c.stat.slider.slider("value",h)},reset_mob_previews:function(){a("#common-devices-preview").find("li").removeClass("clicked"),a("#height-screen").addClass("hidden")},update_ruler_highlighter:function(b,d){var e=a("#rHighlight-wrap"),f=a("#rHighlight");if(b||d){e.add(f).removeClass("hidden");var g=a("#min-neg"),h=a("#max-neg");b?g.css({width:b}).removeClass("hidden"):g.addClass("hidden"),d?h.css({left:d,width:c.fullWidth-d}).removeClass("hidden"):h.addClass("hidden"),b=b?b:0,d=d?d:c.fullWidth;var i=b?b+19:19,j=d?d-b:c.fullWidth-19-b;f.css({left:i,width:j})}else e.add(f).addClass("hidden")},check_slider_within_range:function(b,d){var e=!1,f=c.mqs[d].min?c.mqs[d].min:!1,g=c.mqs[d].max?c.mqs[d].max:!1;f&&f>b&&(e=!0),g&&b>g&&(e=!0);var h=a("#current-screen-width"),i=a("#v-frontend-wrap").find("div.corner").add(h),j="Styles added to the current tab will not have an effect at this screen width ("+b+"px)";e?(i.addClass("warn"),h.attr("title",j)):(i.removeClass("warn"),h.attr("title","Screen width: "+b+"px"))},screen_width_adjusted:function(a){c.iframe_functions_loaded()&&(window.frames.viframe.TvrExportVars.update_highlight(a),window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str")),c.refresh_comp_css()},map_formatted_comp:function(a,b,c,d,e,f,g,h,i){if(i)var j=window.TvrSharedVars.intelliCompProps;else var j=window.TvrSharedVars.compProps;if("straight"==c&&("var"==b?j[a[d]]=f:(0==e&&(j[a[d]]=[]),j[a[d]][e]=[],j[a[d]][e].val=f,j[a[d]][e].htmlString=g)),"array"==c){var k=-1,l=a[d];for(var m in l)"var"==b?j[l[m]]=h[++k]:(0==e&&(j[l[m]]=[]),j[l[m]][e]=[],j[l[m]][e].val=h[++k],j[l[m]][e].htmlString=g)}i?window.TvrSharedVars.intelliCompProps=j:window.TvrSharedVars.compProps=j},format_exceptions:function(a,d,e,f,g,h){if("var"==g)var i=e;else var i=e[f].val,j=e[f].htmlString;if(!b.hasValue(i))return!1;if("font-family"==d||"list-style-type"==d||"border-top-left-radius"==d||"border-top-right-radius"==d||"border-bottom-right-radius"==d||"border-bottom-left-radius"==d)c.map_formatted_comp(a,g,"straight",d,f,i,j,[],h);else if("text-shadow"==d||"box-shadow"==d){var k=i.split(" ");k.length<2&&(k[1]=k[2]=k[3]=0),c.map_formatted_comp(a,g,"array",d,f,i,j,k,h)}else if("list-style-image"==d)c.map_formatted_comp(a,g,"straight",d,f,b.basename(i),j,[],h);else if("background-img-full"==d){var l=[];l[0]=b.extract_str("bg-image",i);var m=b.extract_str("gradient",i);if(m){var n=/gradient\((.+)\)/.exec(m);if(n){var o=n[1],p=/rgba?\([^)]+\)/g,q=b.get_all_matches(o,p,0),r=b.replace_all_matches(o,q,"xxx"),s=r.split(", "),t="";i.indexOf("webkit")>=0&&(t="webkit-");var u="top to bottom",v=!1,w=0,x=0;if(s[0].indexOf("deg")>-1&&(u=a.keys[t+"gradient-angle"][s[0]],v=!0,x=1),l[1]=u,l[2]=q[w],v&&s.length>3||!v&&s.length>2){var y=s[++x].split(" ");l[3]=q[++w],l[4]=y[1],l[5]=q[++w]}else l[3]="none",l[4]="0",l[5]=q[++w]}else m.indexOf("svg")>-1&&(l[1]="IE9 can't report",l[2]="IE9 can't report",l[3]="IE9 can't report",l[4]="IE9 can't report",l[5]="IE9 can't report")}else l[1]="none",l[2]="none",l[3]="0",l[4]="none",l[5]="none";c.map_formatted_comp(a,g,"array",d,f,i,j,l,h)}else if("background-position"==d){var z=i.split(", "),A=z[0].split(" "),B=a.keys["background-position-x"][A[0]],C=a.keys["background-position-y"][A[1]],D=B?B:A[0],E=C?C:A[1],F=D+" "+E,G=[D,E];c.map_formatted_comp(a,g,"straight",d,f,F,j,[],h),c.map_formatted_comp(a,g,"array","background-position-custom",f,i,j,G,h)}else if("background-repeat"==d||"background-attachment"==d||"background-size"==d||"background-clip"==d){var z=i.split(", ");c.map_formatted_comp(a,g,"straight",d,f,z[0],j,[],h)}},filter_css_exceptions:function(a){if(a)var b=window.TvrSharedVars.intelliCompProps;else var b=window.TvrSharedVars.compProps;var d=TvrPropExceptions,e=0;for(var f in b){++e;var g=b[f];if(g===Object(g))for(var h in g)c.format_exceptions(d,f,g,h,"obj",a);else c.format_exceptions(d,f,g,"","var",a)}return e},refresh_comp_css:function(){if(!c.iframe_functions_loaded())return!1;var d=c.filter_css_exceptions(!1),e=a("#"+c.selInFocusID);if(!b.isDomEl(e))return!1;if(1>d){var f=js_i18n_main.null_selector;return e.find(".option-label").each(function(){var b=a(this);b.attr("title",b.attr("data-simple-tt")+f)}),void e.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text("")}if(""!=window.TvrSharedVars.pgInFocus)var g=e.find("li.group-tag-"+window.TvrSharedVars.pgInFocus).find("div.field-wrap");else var g=e.find("div.field-wrap");g.each(function(){var d=a(this);if(!d.hasClass("group-label")&&!d.hasClass("sub-label")){var e=d.find(".option-label"),f=e.attr("data-simple-tt"),g=d.find("span.comp-style"),h=d.find(".property-input"),i=g.attr("class").split(" "),j=i[1].replace("cprop-",""),k=window.TvrSharedVars.compProps[j],l=0;if(b.isDefined(k))if(k===Object(k)){d.addClass("mixed-cp"),g.text("[mix]");var m=js_i18n_main.value_varies,n="";for(var o in k)if(b.isDefined(k[o].val)){var p=k[o].htmlString.replace("&#60;","<").replace("&#62;",">");n+='<tr class="mixed-val" rel="'+l+'"><td>'+ ++l+"</td><td title='"+p+"'>"+c.colorize_hash(k[o].val,d,"obj")+"</td></tr>"}d.find("span.comp-mixed-table").find("tbody").html(n)}else{var m=": "+k;d.removeClass("mixed-cp");var q=k;if(k=c.truncate_displayed_comp_css(h,k),d.hasClass("is-picker")){var r=q.split(" / "),s="background-color:transparent";"transparent"!=r[0]&&(s="background-color:"+r[0]),g.html('<span style="'+s+'"></span>')}else g.html(k)}else{var m=js_i18n_main.style_not_applicable;g.text("")}e.attr("title",f+m)}})},truncate_displayed_comp_css:function(a,b){var c=a.width(),d=b.length,e=c/6;return d>e&&(b=b.substring(0,e)+"..."),b},colorize_hash:function(a,b,c){if(!a||a.indexOf("#")<0)return"obj"!=c&&b.removeClass("colorize-hash"),a;"obj"!=c&&b.addClass("colorize-hash")},update_prog_indicator:function(b,d){if(window.TvrSharedVars.progCount<0)return window.TvrSharedVars.progCount=0,!1;var e=a("#m-logo"),f=a("#status-short"),g=a("#dialogs").find(".tvr-dialog").find(".dialog-icon");"plus"==b?(++window.TvrSharedVars.progCount,f.removeClass(),e.add(f).add(g).addClass("active"),f.text(d)):(--window.TvrSharedVars.progCount,window.TvrSharedVars.progCount<=0&&(e.add(f).add(g).removeClass("active"),c.update_full_logs(d)))},update_full_logs:function(b){var d=a("#full-logs").find(".logs");if(b){var e=b[0],f=b[1];if(b[2])var g=b[2];else var g="error";var h=a("#log-item-template").clone().removeAttr("id");h.attr("class",h.attr("class").replace("tvr-error","tvr-"+g)).find(".short").text(e).end().find(".long").html(f),d.html(h)}c.update_short_status()},update_short_status:function(){var b,c=a("#full-logs").find(".logs li").first(),d="";c&&(b=c.find(".short").text(),d=c.attr("class"),"Settings Saved"==b&&(d="hide-boring")),a("#status-short").addClass(d).text(b)},clear_messages:function(){a("#status-short").removeClass().text(""),a("#full-logs").find(".logs").html("")},default_to_sel:function(){var d=a("#last-viewed-selector").val(),e=a("#last-edited-selector").val();if(b.hasValue(d)&&b.isDomEl(a("#"+d)))var f=a("#"+d);else if(b.hasValue(e)&&b.isDomEl(a("#"+e)))var f=a("#"+e);else var f=a("#tvr-menu").find("li.selector-tag:eq(0)");return f&&b.hasValue(f.attr("id"))?(c.startSel=!0,void c.tvr_iterate_selectors_v(f)):!1},adjust_comp_span:function(a,b){"after"==b?a.val()?(a.closest(".property-tag").addClass("manual-val"),a.siblings("span.comp-style").addClass("hidden")):(a.closest(".property-tag").removeClass("manual-val"),a.siblings("span.comp-style").removeClass("hidden")):"hover"==b&&a.siblings("span.comp-style").addClass("hidden")},done_typing:function(){c.ajax_save_settings("save",c.inputWaitingObj)},get_folders:function(){var b=[];return a("#tvr-menu").find(".section-tag").each(function(d){var e=c.get_meta(a(this),"section");b[d]=e.sectionH}),b},show_wizard:function(){if(window.TvrSharedVars.intelli=!0,a("#visual-view").addClass("show-wizard"),c.show_adv_wizard(),TvrCombo.cur_folders=c.get_folders(),b.hasValue(c.selInFocusID)){var d=c.get_meta(a("#"+c.selInFocusID),"selector");a("#wizard_folder").val(d.sectionH).removeClass("text-label")}c.update_selector_wizard()},hide_wizard:function(){a("#visual-view").removeClass("show-wizard"),c.hide_adv_wizard(),window.TvrSharedVars.intelli=!1,c.return_normal_highlighting(),a("#wizard-name").val(""),c.toolbar_adjusted()},toggle_adv_wizard:function(){a("#visual-view").hasClass("show-advanced")?(c.hide_adv_wizard(),c.remember_adv_wizard(0)):(c.show_adv_wizard(),c.remember_adv_wizard(1)),c.toolbar_adjusted()},show_adv_wizard:function(){a("#visual-view").addClass("show-advanced");var b=a("#advanced-wizard"),d=b.height()-200;b.find(".wizard-panes").height(d),c.screen_width_adjusted("intelli")},hide_adv_wizard:function(){a("#visual-view").removeClass("show-advanced"),c.screen_width_adjusted("intelli")},remember_adv_wizard:function(b){b?a("#always-adv-checkbox").prop("checked",!0):a("#always-adv-checkbox").prop("checked",!1),a.get(c.ajaxUrl+"&mcth_simple_ajax=1&show_adv_wizard="+b,function(){})},switch_html_element:function(a){var b=a.attr("class"),d=window.TvrSharedVars.TvrSugCSS;if(b.indexOf("tvr-parent")>=0)var e=d.Intelli.parent;else if(b.indexOf("tvr-child")>=0)var e=d.Intelli.child;else if(b.indexOf("tvr-prev-sibling")>=0)var e=d.Intelli.prev;else if(b.indexOf("tvr-next-sibling")>=0)var e=d.Intelli.next;c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.build_selector_suggestions(e)},update_selector_wizard:function(){var d=a("#advanced-wizard"),e=window.TvrSharedVars.TvrSugCSS,f="",g=0,h=1,i=1,j=0;for(var k in e){if("Intelli"==k)break;if(++g,g==e.Intelli.ogCount)var l=js_i18n_main.highest_specificity;else var l="";f+='<li class="selector-category">'+k+l+"</li>";for(var m in e[k])if("each"!=m){if(window.TvrSharedVars.intelli_css==m)var n='in-focus"';else var n="";var o="",p='title="'+b.escapeHTML(e[k][m])+'"';f+='<li id="code-suggestion-'+i+'" class="code-suggestion '+n+'"><textarea class="sug-sel" '+o+">"+m+'</textarea><span class="tvr-icon info-icon" '+p+"></span></li>",i+=h,++j}}a("#code-suggestions").html(a(f).get().reverse()),d.find("div.refine-target-controls span").addClass("disabled"),d.find("div.refine-target-controls span").each(function(){var b=a(this),c=b.attr("class");c.indexOf("tvr-parent")>=0&&e.Intelli.parent?b.removeClass("disabled"):c.indexOf("tvr-child")>=0&&e.Intelli.child?b.removeClass("disabled"):c.indexOf("tvr-prev-sibling")>=0&&e.Intelli.prev?b.removeClass("disabled"):c.indexOf("tvr-next-sibling")>=0&&e.Intelli.next&&b.removeClass("disabled")}),d.find("div.refine-target-html span").html(e.Intelli.htmlString),c.adjust_wiz_comp_height(),c.refresh_wizard_comp_css()},adjust_wiz_comp_height:function(){var b=a("#advanced-wizard").find(".wizard-panes").height()-a("#refine-target").height()-36;a("#html-computed-css").add(a("#html-computed-css").find(".scrollable-area")).css("max-height",b)},refresh_wizard_comp_css:function(){c.filter_css_exceptions("intelli");var d=window.TvrSharedVars.intelliCompProps=c.un_flatten_css(window.TvrSharedVars.intelliCompProps),e=a("#html-computed-css");e.find("li.property-item").remove();for(var f in d){var g="",h=1;for(var i in d[f]){if(b.isOdd(h))var j="row-odd";else var j="row-even";var k=i.replace(/-/g," ");g+='<li class="property-item accordion-item '+j+'">',g+='<span class="comp-prop-label">'+k+":</span> ",g+='<span class="comp-prop-value">'+d[f][i]+"</span>",g+="</li>",++h}g+='<li class="property-item accordion-item bottom-gap"></li>',a("#comp-"+f).append(g)}},un_flatten_css:function(a){var b=[];for(var c in window.TvrSharedVars.cssProps){b[c]=[];for(var d in window.TvrSharedVars.cssProps[c]){var e=window.TvrSharedVars.cssProps[c][d];"background-img-full"==e||"extracted-gradient"==e||"google-font"==e||"text-shadow"==e||"box-shadow"==e||"background-image"==e&&"gradient"==c||(b[c][e]=a[e])}}return b},wizard_new_selector:function(){var d=a("#wizard_folder").val();if(!b.hasValue(d)||d==js_i18n_main.wizard_folder)return alert(js_i18n_main.wizard_folder_alert),!1;var e=b.convert_to_param(d),f=a("#wizard-name").val(),g=a("#code-suggestions").find("li.in-focus textarea").val();if(!b.isDomEl(a("#strk-"+e))){var h=a("#add-new-section").find(".new-section-input");h.val(d),c.add_section(h.siblings(".new-section-add"))}var i=c.get_meta(a("#strk-"+e),"section");i.sectionM.find(".add-selector-form").find(".selector-name-input").val(f),i.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(g),c.add_selector(i.sectionM)},load_visual_view:function(){b.startT("load visual view");var d=c.stat.body,e=d.height();if(d.addClass("tvr-visual"),c.default_to_sel(),c.toolbarHeight=c.stat.top.height(),c.frameHeight=e-c.toolbarHeight,c.resSliderWidth=a("#v-mq-controls").width(),c.tabsWidth=c.fullWidth-c.resSliderWidth+40,c.toggle_enabled_buttons(),c.placeholderFrame&&(c.update_prog_indicator("plus",js_i18n_main.load_wp),c.stat.iframe.contents().find("body").css("height",c.frameHeight+"px"),window.frames.viframe.location=c.stat.iframe.attr("rel"),c.placeholderFrame=!1),c.stat.front.css("height",c.frameHeight),b.startT("apply rulers"),c.stat.front.ruler(),b.endT("apply rulers"),c.frameWidth=c.allDevicesWidth,!c.iframe_slider_set){var f=c.get_mq_focus();c.update_iframe_slider(c.mqs[f].min,c.mqs[f].max)}b.endT("load visual view")},toolbar_adjusted:function(){c.toolbarHeight=a("#v-top-controls").height(),window.TvrSharedVars.show_interface||(c.toolbarHeight=0),c.frameHeight=a("#wpwrap").height()-c.toolbarHeight,a("#v-frontend-wrap").css("height",c.frameHeight)},toggle_enabled_buttons:function(){c.totalSels<1&&(c.reset_global_vars(),a("#starter-message").removeClass("hidden"),a("#quick-nav").addClass("hidden"),c.expanded("quick_section")&&c.close_quick_edit(),a("#current-selector").text("")),c.totalSels>0&&(a("#starter-message").addClass("hidden"),a("#quick-nav").removeClass("hidden"))},remember_page_viewed:function(){var d=a("#previewurl").val(),e=c.siteUrl,f=a("#viframe").contents().find("#iframe-url").attr("content"),g=decodeURIComponent(f);b.hasValue(g)&&0===g.indexOf(e)&&g!=d&&!c.placeholderFrame&&(a.get(c.ajaxUrl+"&mcth_simple_ajax=1&tvr_microthemer_ui_preview_url="+f,function(){a("#previewStatus").text("iframe-success")}),a("#previewurl").val(g))},update_visual_controls:function(d){if(!b.isDomEl(d))return a("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var e=c.get_meta(d,"selector"),f=c.selectorTrackerScan(e.sectionM,"prev","selector",e.selectorM),g=c.selectorTrackerScan(e.sectionM,"next","selector",e.selectorM);f?a("#vb-focus-prev").removeClass("disabled"):a("#vb-focus-prev").addClass("disabled"),g?a("#vb-focus-next").removeClass("disabled"):a("#vb-focus-next").addClass("disabled"),c.get_meta(d,"selector")},selectorTrackerScan:function(a,d,e,f){if("prev"==d){if("selector"==e){var g=f.prev("li.strk-sel");return b.hasValue(g.attr("id"))?g:c.selectorTrackerScan(a,d)}var h=a.prev("li.strk-sec");if(b.hasValue(h.attr("id"))){var i=h.find(".strk-sel").last();return b.hasValue(i.attr("id"))?i:c.selectorTrackerScan(h,d)}return!1}if("next"==d){if("selector"==e){var j=f.next("li.strk-sel");return b.hasValue(j.attr("id"))?j:c.selectorTrackerScan(a,d)}var k=a.next("li.strk-sec");if(b.hasValue(k.attr("id"))){var l=k.find(".strk-sel").first();return b.hasValue(l.attr("id"))?l:c.selectorTrackerScan(k,d)}return!1}},toggle_highlighting:function(){window.TvrSharedVars.highlightEnabled?c.hide_highlighting():c.show_highlighting()},show_highlighting:function(){window.TvrSharedVars.highlightEnabled=!0,a("#toggle-highlighting").addClass("on"),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.showOverlays()},hide_highlighting:function(){window.TvrSharedVars.highlightEnabled=!1,a("#toggle-highlighting").removeClass("on"),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.hideOverlays()},return_normal_highlighting:function(){if(window.TvrSharedVars.highlightEnabled&&window.TvrSharedVars.tmpHighlighting&&(window.TvrSharedVars.tmpHighlighting=!1,c.toggle_highlighting()),c.iframe_functions_loaded()){var a="reg";if(window.parent.TvrSharedVars.intelli)var a="intelli";window.frames.viframe.TvrExportVars.update_highlight(a)}},tvr_iterate_selectors_v:function(b){var d=c.get_meta(b,"selector");c.load_selector(d,js_i18n_main.load_before_iterating)||(a("#tvr-options").find("li.in-focus").removeClass("in-focus"),d.selector.addClass("in-focus"),c.update_global_vars(d),c.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("reg"),c.update_visual_controls(b),c.refresh_comp_css(),c.maybe_default_to_pg(d.selector,"continuity"),c.selector_check_values(d.selector,!1,!0,!0),c.toolbar_adjusted(),c.startSel=!1)},iframe_functions_loaded:function(){return window.frames.viframe&&window.frames.viframe.TvrExportVars&&window.frames.viframe.TvrExportVars.update_highlight&&window.frames.viframe.TvrExportVars.get_computed_styles&&window.frames.viframe.TvrExportVars.iframe_window_fully_loaded?(window.TvrSharedVars.awaitingIFrame=!1,!0):(window.TvrSharedVars.awaitingIFrame=!0,!1)},maybe_default_to_pg:function(b,d){var e=c.get_meta(b,"selector"),f=c.startSel?a("#last-pg-focus").attr("rel"):!1;c.startSel||("remember"==d&&(f=e.selector.find(".styling-option-icons").find("input.pg-focus").val()),"continuity"==d&&(f=window.TvrSharedVars.pgInFocus)),f&&c.pg_icon_pressed(e.selector.find(".pg-icon-"+f))},quick_nav:function(b){if(b.hasClass("disabled"))return!1;var d=c.get_meta(a("#"+c.selInFocusID),"selector");if("vb-focus-prev"==b.attr("id"))var e="prev";else var e="next";c.tvr_iterate_selectors_v(c.selectorTrackerScan(d.sectionM,e,"selector",d.selectorM))}};c.init(),window.TvrSharedVars.startT=b.startT,window.TvrSharedVars.endT=b.endT,window.TvrSharedVars.showT=b.showT,window.TvrSharedVars.print_r=b.print_r,window.TvrSharedVars.extract_str=b.extract_str,window.TvrSharedVars.custom_to_non_escaped=b.custom_to_non_escaped,window.TvrSharedVars.jquery_escape_quotes=b.jquery_escape_quotes,window.TvrSharedVars.hasValue=b.hasValue,window.TvrSharedVars.sane_decimal=b.sane_decimal,window.TvrSharedVars.isDomEl=b.isDomEl,window.TvrSharedVars.analyse_sel_code=c.analyse_sel_code,window.TvrSharedVars.update_prog_indicator=c.update_prog_indicator,window.TvrSharedVars.show_wizard=c.show_wizard,window.TvrSharedVars.hide_wizard=c.hide_wizard,window.TvrSharedVars.update_selector_wizard=c.update_selector_wizard,window.TvrSharedVars.toggle_highlighting=c.toggle_highlighting,window.TvrSharedVars.insert_google_font=c.insert_google_font,window.TvrSharedVars.ajax_save_settings=c.ajax_save_settings,window.TvrSharedVars.remember_page_viewed=c.remember_page_viewed,window.TvrSharedVars.refresh_comp_css=c.refresh_comp_css,window.TvrSharedVars.close_all_expanded=c.close_all_expanded,window.TvrSharedVars.show_dialog=c.show_dialog,window.TvrSharedVars.update_packs_obj=c.update_packs_obj,window.TvrSharedVars.update_full_logs=c.update_full_logs,window.TvrSharedVars.clear_messages=c.clear_messages,window.TvrSharedVars.show_interface_feature=c.show_interface_feature,window.TvrSharedVars.picker_method=c.picker_method});