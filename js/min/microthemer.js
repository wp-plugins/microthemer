jQuery(document).ready(function($){window.TvrSharedVars={},window.TvrSharedVars.totalSecs=parseInt($("#total-sec-count").text()),window.TvrSharedVars.TvrSugCSS={},window.TvrSharedVars.highlightEnabled=!1,window.TvrSharedVars.tmpHighlighting=!1,window.TvrSharedVars.tmpHideHighlighting=!1,window.TvrSharedVars.progCount=0,window.TvrSharedVars.intelli=!1,window.TvrSharedVars.awaitingIFrame=!0,window.TvrSharedVars.cssProps=TvrCSSProps,window.TvrSharedVars.compProps={},window.TvrSharedVars.intelliCompProps={},window.TvrSharedVars.mixedElKey=0,window.TvrSharedVars.g_url="",TvrEditors={};var TvrCom={sT:function(e){e||(e="function"),TvrUi.profiler[e]=[],TvrUi.profiler[e].sT=(new Date).getTime()},eT:function(e,r){e||(e="function"),TvrUi.profiler[e].tE=(new Date).getTime()-TvrUi.profiler[e].sT,r&&TvrCom.elT(e)},elT:function(e){var r="";if(e){var t=TvrUi.profiler[e].tE.toFixed(2);r+=e+" took "+(t/1e3).toFixed(2)+" seconds ("+t+" ms)"}else for(var e in TvrUi.profiler){var t=TvrUi.profiler[e].tE.toFixed(2);r+=e+" took "+t/1e3+" seconds ("+t+" ms)\n"}window.console&&window.console.log&&console.log(r)},hasValue:function(e){return e?!0:!1},isDefined:function(e){return""!==e&&"undefined"!==e&&void 0!==e&&null!==e?!0:!1},isDomEl:function(e){return TvrCom.hasValue(e)&&e.prop("tagName")?!0:!1},ucwords:function(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},readable_name:function(e){return TvrCom.ucwords((e+"").replace(/[_-]/g," "))},pipes_to_array:function(e){var r,t=new Array,i=e.attr("rel").split("|");for(r=0;r<i.length;++r){var a=i[r].split(",");t[a[0]]=parseInt(a[1])}return t},print_r:function(e,r){var t=r||"",i="[object Array]"===Object.prototype.toString.call(e),a=i?"Array\n"+t+"[\n":"Object\n"+t+"{\n";for(var o in e)if(e.hasOwnProperty(o)){var s=e[o],n="",l=Object.prototype.toString.call(s);switch(l){case"[object Array]":case"[object Object]":n=TvrCom.print_r(s,t+"	");break;case"[object String]":n="'"+s+"'";break;default:n=s}a+=t+"	"+o+" => "+n+",\n"}return a=a.substring(0,a.length-2)+"\n"+t,i?a+"]":a+"}"},extract_str:function(e,r){if("gradient"==e){var t=r.split("linear-");if(t[0].indexOf("gradient")>=0)var i=t[0];else if(t[1]&&t[1].indexOf("gradient")>=0)var i=t[1];else var i=""}if("bg-image"==e){var t=r.split("linear-");i=t[0].indexOf("url")<0?"none":TvrCom.basename(t[0]).replace(/\)?"/,"")}return i},basename:function(e){return TvrCom.hasValue(e)?e.split(/[\\/]/).pop().replace(")",""):e},root_rel:function(e){return e.replace(TvrUi.siteUrl,"")},bind_input_labels:function(e){e.each(function(){var e=$(this);this.value=e.attr("title"),e.addClass("text-label"),e.bind("focus",function(){this.value==e.attr("title")&&(this.value="",e.removeClass("text-label"))}),e.bind("blur",function(){""==this.value&&(this.value=e.attr("title"),e.addClass("text-label"))})})},new_name_checks:function(e,r){if("folder"==r)var t=$("#tvr-menu"),i=".section-name";else var t=TvrUi.meta.sectionM,i=".selector-name";if(TvrCom.duplicates(e,t,i))return alert("A "+r+" with that name already exists. Please enter a unique name."),!1;if(""==e||"folder"==r&&"New Folder..."==e)return alert("Please enter a value for the "+r+" name"),!1;var a=[];return a.newNameHuman=e,a.newName=TvrCom.convert_to_param(e),a},duplicates:function(e,r,t,i){var a=!1;return r.find(t).find(".name-text").each(function(){return i&&$(this).closest(".selector-tag").attr("id")==i?!0:void(TvrCom.convert_to_param($(this).text())==TvrCom.convert_to_param(e)&&(a=!0))}),a},resolve_unique_name:function(e,r,t,i,a){if(TvrCom.duplicates(e,r,t,a)){var o=1;do{if(e.match(i)){1==o&&(o=2);var s=e.replace(/Copy \d+/,i+" "+o)}else var s=e+" "+i+" "+o;++o}while(TvrCom.duplicates(s,r,t,a));return s}return e},convert_to_param:function(e){return e=e.replace(/[^a-zA-Z0-9 ]+/g,"").replace("/ {2,}/"," "),e=e.replace(/ /g,"_").toLowerCase()},refresh_sortable:function(){$("#tvr-menu").sortable({cursor:"move",handle:".folder-icon.sortable-icon",update:function(e,r){var t=TvrUi.get_meta(r.item,"section"),i=t.sectionM.prev().attr("id");TvrCom.hasValue(i)?t.section.detach().insertAfter("#"+i.replace("strk","opts")):t.section.detach().prependTo("#tvr-options"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}}).find("ul.selector-sub").sortable({connectWith:"ul.selector-sub",cursor:"move",handle:".selector-icon.sortable-icon",refresh:"",receive:function(e,r){TvrCom.selector_received(e,r)},stop:function(e,r){var t=TvrUi.get_meta(r.item,"selector"),i=t.selectorM.prev().attr("id");TvrCom.hasValue(i)?t.selector.detach().insertAfter("#"+i.replace("strk","opts")):t.selector.detach().prependTo(t.section.find("ul.opts-selectors-sub")),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}})},selector_received:function(e,r){var t=TvrUi.get_meta(r.item,"selector");if(!TvrUi.load_selector(t,"load selector after moving")){var i=TvrUi.get_meta(r.item.closest(".section-tag"),"section");TvrUi.update_count(t.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),TvrUi.update_count(i.sectionM.find(".selector-count-state"),"add",1,"selector","");var a=TvrCom.resolve_unique_name(t.selectorH,i.sectionM,".selector-name","Moved",t.selectorMID);TvrUi.dom_replacements("selector",t.selector.add(t.selectorM),t.sectionSlug,i.sectionSlug,i.sectionH,t.selectorSlug,TvrCom.convert_to_param(a),a,t.selectorM.find(".selector-css-textarea").val()),TvrUi.selInFocusID==t.selectorID&&TvrUi.update_global_vars(TvrUi.get_meta(t.selectorM,"selector"))}},custom_escape_quotes:function(e){var r=e.replace(/"/g,"cus-quot;").replace(/'/g,"cus-#039;");return r},custom_to_non_escaped:function(e){var r=e.replace(/cus-quot;/g,'"').replace(/cus-#039;/g,"'");return r},regular_escape_quotes:function(e){var r=e.replace(/"/g,"&quot;").replace(/'/g,"&#039;");return r},regular_escaped_to_non_escaped:function(e){var r=e.replace(/&quot;/g,'"').replace(/&#039;/g,"'");return r},jquery_escape_quotes:function(e){var r=e.replace(/"/g,'\\"').replace(/'/g,"\\'");return r},jquery_escaped_to_non_escaped:function(e){var r=e.replace(/\\"/g,'"').replace(/\\'/g,"'");return r},custom_to_regular_escape:function(e){var r=e.replace(/cus-/g,"&");return r},sane_decimal:function(e){if(TvrCom.hasValue(e)&&("string"==typeof e||e instanceof String)&&-1!=e.indexOf("px")&&-1!=e.indexOf(".")){var r=e.split("px");return parseFloat(r[0]).toFixed(0)+"px"}return e},isNumber:function(e){return e==parseFloat(e)},isOdd:function(e){return TvrCom.isNumber(e)&&Math.abs(e)%2==1},check_fake:function(e,r){if(!r)var r=e.prev();e.hasClass("fake-radio")&&e.closest(".fake-radio-parent").find('input[type="radio"]').prop("checked",!1).end().find(".fake-radio").removeClass("on"),r.prop("checked",!0),e.addClass("on")},uncheck_fake:function(e,r){if(!r)var r=e.prev();if(e.hasClass("fake-radio"))return!1;if(!r)var r=e.prev();r.prop("checked",!1),e.removeClass("on")},toggle_radio_checkbox:function(e){if(e.hasClass("toggle-checked-folders"))TvrUi.toggle_multi_checkboxes(e);else{var r=e.prev();r.is(":checked")?TvrCom.uncheck_fake(e,r):TvrCom.check_fake(e,r)}}},TvrUi={meta:{},profiler:[],debugCount:0,wasOpen:!1,leftMenu:$("#v-left-controls").hasClass("show")?!0:!1,placeholderFrame:!0,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:$("#ajaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,fullWidth:$("body").width(),iframe_slider_set:!1,mqMin:TvrCom.pipes_to_array($("#tvr-min-store")),mqMax:TvrCom.pipes_to_array($("#tvr-max-store")),allDevicesWidth:TvrCom.hasValue($("#all_devices_default_width").attr("rel"))?$("#all_devices_default_width").attr("rel").replace("px",""):$("body").width(),totalSels:parseInt($("#total-sel-count").text()),trial:"1"==$("#plugin-trial").attr("rel")?!1:!0,trialNotice:"Please validate your purchase to unlock the full program! \nWith the free trial you are limited to editing or creating 9 Selectors.",gFontTarget:Object(),selsToLoad:0,totalToLoad:0,typingTimer:0,doneTypingInterval:700,saveInProgress:!1,reSave:!1,siteUrl:$("#site-url").attr("rel"),itemAlreadyExpanded:!1,expanded:function(e){if("main_menu"==e)var r=$("#tvr-main-menu");else if("quick_section"==e)var r=$("#sec-in-focus");else if("quick_selector"==e)var r=$("#sel-in-focus");else if("mq"==e){var t=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(t))return!1;var r=t.find("span.add-mq")}return r.hasClass("on")?!0:!1},init:function(){$("#code-editors-wrap").find(".css-code-wrap").resizable({start:function(){},resize:function(e,r){var t=r.size.height-r.originalSize.height;$("#v-frontend-wrap").css("height",TvrUi.frameHeight-t)},stop:function(){TvrUi.toolbar_adjusted()}});$.ui.autocomplete.prototype._renderMenu;$.ui.autocomplete.prototype._renderMenu=function(e,r){var t=this;$.each(r,function(r,i){t._renderItemData(e,i)}),$(e).find("li").each(function(){var e=$(this);TvrCom.isDomEl(e.find("a"))||e.addClass("empty ui-menu-item")})},$("input.combobox").live("focus",function(){var e=$(this),r=TvrCombo[e.attr("rel")];r||(r=[]),e.autocomplete({source:r,delay:0,minLength:0,appendTo:e.parent(".input-wrap"),open:function(){if(e.next(".combo-arrow").addClass("on"),e.hasClass("property-input")){var r=TvrUi.get_meta(e,"property");r.property.find(".comp-mixed-table").addClass("manual-menu-showing")}},select:function(r,t){if(e.val(t.item.value),e.parent(".input-wrap").addClass("manual-val").find(".comp-style").addClass("hidden").end().find(".combo-arrow").removeClass("on"),e.hasClass("property-input"))if(e.hasClass("tvr-font-select")){var i=e.closest(".field-wrap").siblings(".tvr-font-custom");TvrUi.gFontTarget=i.find(".property-input"),"Google Font..."==t.item.value?TvrUi.show_google_fonts(i):TvrUi.hide_google_fonts(e,i)}else e.hasClass("img_display")&&(TvrCom.hasValue(t.item.value)?"none"==t.item.value&&TvrUi.update_bg_image(e,t.item.value):TvrUi.clear_bg_image(e)),TvrUi.ajax_save_settings("save")},search:function(){e.addClass("adjusted-corner-radius")},close:function(){if(e.removeClass("adjusted-corner-radius").next(".combo-arrow").removeClass("on"),e.hasClass("property-input")){var r=TvrUi.get_meta(e,"property");r.property.find(".comp-mixed-table").removeClass("manual-menu-showing")}}})}),$("span.combo-arrow").live("mousedown",function(){$(this).siblings(".ui-menu").is(":visible")&&(TvrUi.wasOpen=!0)}),$("span.combo-arrow").live("click",function(){var e=$(this),r=e.prev();return TvrUi.wasOpen?(e.removeClass("on"),void(TvrUi.wasOpen=!1)):(e.addClass("on"),void r.focus().autocomplete("search",""))}),TvrUi.reset_global_vars(),$(window).keypress(function(e){return 115==e.which&&e.ctrlKey||19==e.which?(e.preventDefault(),!1):!0}),$(document).keydown(function(e){return 83==e.which&&1==e.ctrlKey?(TvrUi.ajax_save_settings("save"),e.preventDefault(),!1):TvrCom.hasValue($(e.target))&&$(e.target).attr("class")&&$(e.target).attr("class").indexOf("strictly-dropdown")>-1?(e.preventDefault(),!1):void 0}),TvrCom.bind_input_labels($("#add-new-section").find("input").add("#wizard_folder")),TvrCom.refresh_sortable(),$(".scrollable-area").mCustomScrollbar({theme:"dark-3",live:!0,scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}});var e=$("#tvr-ui");e.dblclick(function(e){var r=$(e.target);if(r.hasClass("autofillable")){var t=r.val(),i=r.attr("data-autofill"),a=TvrUi.get_meta(r,"group");a.group.find('input[data-autofill="'+i+'"]').each(function(){var e=$(this);e.attr("value",t),e.hasClass("color"),TvrUi.adjust_comp_span(e,"after")}),TvrUi.ajax_save_settings("save")}}),e.delegate("input.color","change",function(){TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span($(this),"after")}),e.delegate("input.property-input","keyup",function(e){$(e.target).attr("class").indexOf("img_display")<0&&(TvrUi.typingTimer&&clearTimeout(TvrUi.typingTimer),TvrUi.typingTimer=setTimeout(TvrUi.done_typing,TvrUi.doneTypingInterval)),TvrUi.adjust_comp_span($(this),"after")}),e.delegate("select.tvr-font-select","change",function(){var e=$(this),r=e.parent(".field-wrap").siblings(".tvr-font-custom");TvrUi.gFontTarget=e.parent("div.field-wrap").siblings(".tvr-font-custom").find(".property-input"),"Google Font..."==e.val()?(r.show("fast"),$.colorbox({href:$("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),TvrUi.font_changed(TvrUi.gFontTarget)):(TvrUi.gFontTarget.val("").prop("val",""),r.hide(),TvrUi.font_changed(e))}),e.delegate(".property-input, tr.mixed-val","mouseenter",function(){var e=$(this);e.hasClass("property-input")&&TvrUi.adjust_comp_span(e,"hover"),e.hasClass("mixed-val")&&(window.TvrSharedVars.mixedElKey=e.attr("rel"),window.TvrSharedVars.highlightEnabled||(window.TvrSharedVars.tmpHighlighting=!0,TvrUi.toggle_highlighting()),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("mixed-hover"))}),e.delegate(".property-input, tr.mixed-val","mouseleave",function(){var e=$(this);e.hasClass("property-input")&&TvrUi.adjust_comp_span(e,"after"),e.hasClass("mixed-val")&&TvrUi.return_normal_highlighting()}),$("#mq-list").sortable(),$("#edit-media-queries-form").submit(function(){var e=!1;return $("#mq-list").find("input.m-label, input.m-code").each(function(){return 0==$(this).val().length?($(this).focus(),e=!0,!1):void 0}),e?(alert("Please complete all media query fields or delete empty ones."),!1):void 0}),TvrUi.load_visual_view($("#load-visual")),$visCon=$("#tvr"),$visCon.click(function(e){var r=$(e.target);try{if(t=r.attr("class"),!t)var t="tvr-undefined"}catch(i){}if(TvrUi.close_all_expanded(r,t),t.indexOf("fake-checkbox")>=0||t.indexOf("fake-radio")>=0)TvrCom.toggle_radio_checkbox(r);else if("email-error"==r.attr("id"))TvrUi.email_error_report();else if(t.indexOf("tvr-main-menu-wrap")>=0)TvrUi.show_main_menu(r);else if(t.indexOf("sec-in-focus")>=0||t.indexOf("sel-in-focus")>=0)TvrUi.quick_edit(r);else if(t.indexOf("sec-in-focus-arrow")>=0||t.indexOf("sel-in-focus-arrow")>=0);else if(t.indexOf("edit-css-code")>=0)TvrUi.toggle_hand_css(r);else if("toggle-left-menu"==r.attr("id"))TvrUi.toggle_left_menu();else if(t.indexOf("m-logo")>=0)window.open(r.attr("rel"),"_blank");else if(t.indexOf("save-interface")>=0)TvrUi.ajax_save_settings("save");else if(t.indexOf("show-dialog")>=0)TvrUi.show_dialog(r);else if(t.indexOf("close-dialog")>=0||t.indexOf("tvr-dialog")>=0)TvrUi.close_dialog(r);else if(t.indexOf("back-to-wordpress")>=0);else if(t.indexOf("add-m-query")>=0)TvrUi.add_m_query(r);else if(t.indexOf("del-m-query")>=0)TvrUi.del_m_query(r);else if(t.indexOf("reveal-hidden-form-opts")>=0)TvrUi.reveal_form_opts(r);else if("ui-reset"==r.attr("id"))TvrUi.ui_reset(r);else if("clear-styles"==r.attr("id"))TvrUi.clear_styles(r);else if(t.indexOf("export-dialog-button")>=0)TvrUi.export_settings();else if(t.indexOf("ui-import")>=0)TvrUi.import_settings();else if(t.indexOf("reveal-unlock")>=0)$("#tvr_validate_form").addClass("show"),r.parent("p").hide();else if(t.indexOf("explain-link")>=0)TvrUi.toggle_help_info(r);else if(t.indexOf("restore-link")>=0)TvrUi.restore_rev(r);else if(t.indexOf("folder-menu-arrow")>-1||t.indexOf("selector-count-state")>-1||t.indexOf("folder-count-wrap")>-1||t.indexOf("folder-state-count")>-1)TvrUi.toggle_folder(r);else if(t.indexOf("new-section-input")>=0);else if(t.indexOf("new-section-add")>=0)TvrUi.add_section(r);else if(t.indexOf("toggle-rename-section")>=0)TvrUi.toggle_rename_section(r);else if(t.indexOf("cancel-rename-section")>=0)TvrUi.toggle_rename_section(r);else if(t.indexOf("rename-button")>=0)TvrUi.action_rename_section(r);else if(t.indexOf("copy-section")>=0)TvrUi.copy_section(r);else if(t.indexOf("delete-section")>=0)TvrUi.delete_section(r);else if(t.indexOf("reveal-add-selector")>=0)TvrUi.toggle_add_selector(r);else if(t.indexOf("cancel-add-selector")>=0)TvrUi.toggle_add_selector(r);else if(t.indexOf("add-selector")>=0)TvrUi.add_selector(r);else if(t.indexOf("toggle-modify-selector")>=0||t.indexOf("cancel-edit-selector")>=0)TvrUi.toggle_modify_selector(r);else if(t.indexOf("edit-selector")>=0)TvrUi.action_modify_selector(r);else if(t.indexOf("copy-selector")>=0)TvrUi.copy_selector(r);else if(t.indexOf("delete-selector")>=0)TvrUi.delete_selector(r);else if(t.indexOf("change-selector")>=0)TvrUi.tvr_iterate_selectors_v(r);else if(t.indexOf("scroll-buttons")>=0)TvrUi.quick_nav(r);else if(t.indexOf("cancel-wizard")>=0)TvrUi.hide_wizard();else if(t.indexOf("adv-main-label")>=0)TvrUi.toggle_adv_wizard();else if(t.indexOf("refine-button")>=0&&t.indexOf("disabled")<0)TvrUi.switch_html_element(r);else if(t.indexOf("wizard-add")>=0)TvrUi.wizard_new_selector(r);else if("toggle-highlighting"==r.attr("id"))TvrUi.toggle_highlighting();else if(t.indexOf("pg-icon")>=0)TvrUi.pg_icon_pressed(r);else if(t.indexOf("css-tab")>=0&&t.indexOf("active")<0)TvrUi.css_tab_pressed(r);else if(t.indexOf("adv-tab")>=0&&t.indexOf("active")<0)TvrUi.adv_tab_pressed(r);else if(t.indexOf("mq-tab")>=0&&t.indexOf("css-tab")<0&&t.indexOf("adv-tab")<0&&t.indexOf("active")<0)TvrUi.mq_tab_pressed(r);else if(t.indexOf("add-mq-icon")>=0)TvrUi.show_add_mq(r);else if(t.indexOf("mq-add")>=0&&!r.closest(".mq-button").hasClass("on"))TvrUi.add_property_group(r);else if(t.indexOf("mq-clear")>=0)TvrUi.clear_pg_fields(r);else if(t.indexOf("mq-remove")>=0&&r.closest(".mq-button").hasClass("on"))TvrUi.remove_property_group(r);else if(t.indexOf("mq-remove-all")>=0)TvrUi.remove_property_group(r,"delete-all");else if(t.indexOf("tvr-image-upload")>=0)TvrUi.launch_img_uploader(r);else if(t.indexOf("clear-bg-image")>=0)TvrUi.clear_bg_image(r);else if(t.indexOf("combobox")>=0)TvrUi.combobox_clicked(r);else if(t.indexOf("g-font")>=0){var a=r.closest(".field-wrap");TvrUi.gFontTarget=a.find(".property-input"),TvrUi.show_google_fonts(a)}else t.indexOf("v-mq-button")>=0&&t.indexOf("active")<0?TvrUi.update_mq_button(r):t.indexOf("css-info")>=0?TvrUi.load_css_ref(r):t.indexOf("input-icon-toggle")>=0?TvrUi.input_icon_toggle(r):(t.indexOf("css-group-heading")>=0||t.indexOf("accordion-menu-arrow")>=0||t.indexOf("text-for-group")>=0)&&(r=r.closest(".css-group-heading"),TvrUi.update_accordion(r,$("#html-computed-css")))})},show_main_menu:function(e){return TvrUi.itemAlreadyExpanded?!1:void e.addClass("on expanded")},hide_main_menu:function(){$("#tvr-main-menu").removeClass("on expanded")},quick_edit:function(e){if(TvrUi.itemAlreadyExpanded)return!1;var r=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");$("#main-menu-popdown").addClass("bye-for-now"),r.sectionM.addClass("hello-me");var t=r.sectionM.find(".menu-arrow"),i=r.selectorM.find(".edit-selector-form");if(t.hasClass("on")||TvrUi.toggle_folder(t),e.hasClass("sec-in-focus")){var a=r.sectionM;i.hasClass("show")&&TvrUi.toggle_modify_selector(i),r.sectionM.find(".folder-icon").removeClass("sortable-icon")}else{var a=r.selectorM;i.hasClass("show")||TvrUi.toggle_modify_selector(i),r.sectionM.addClass("goodbye-section"),r.selectorM.addClass("hello-me"),r.selectorM.find(".selector-icon").removeClass("sortable-icon")}a.addClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar({theme:"dark-3",scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}).append('<div class="hide-top-shadow"></div>'),e.addClass("on")},close_quick_edit:function(){var e=$("#main-menu-popdown"),r=e.find(".quick-edit-mode");if(r.hasClass("section-tag"))var t="folder",i=TvrUi.get_meta(r,"section"),a=i.sectionM;else{var t="selector",i=TvrUi.get_meta(r,"selector"),o=i.selectorM.find(".edit-selector-form");o.hasClass("show")&&o.removeClass("show");var a=i.sectionM.add(i.selectorM)}r.find("."+t+"-icon").addClass("sortable-icon"),r.removeClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar("destroy");var s=i.sectionM.find(".menu-arrow");s.hasClass("on")&&TvrUi.toggle_folder(s),$("#current-selector").find(".on").removeClass("on"),a.removeClass("hello-me goodbye-section"),e.removeClass("bye-for-now")},close_all_expanded:function(e){return TvrUi.itemAlreadyExpanded=e.hasClass("on")?!0:!1,!TvrCom.isDomEl(e.parents(".expanded"))||e.hasClass("add-mq-icon")||e.hasClass("change-selector")?void(TvrUi.expanded("main_menu")?TvrUi.hide_main_menu():TvrUi.expanded("quick_section")||TvrUi.expanded("quick_selector")?TvrUi.close_quick_edit():TvrUi.expanded("mq")&&TvrUi.hide_add_mq()):!1},reset_global_vars:function(){TvrUi.selInFocusID="",window.TvrSharedVars.curSelCSS="#no-element",window.TvrSharedVars.intelli_css="#no-element",window.TvrSharedVars.pgInFocus="",window.TvrSharedVars.compPgInFocus=""},update_global_vars:function(e){TvrUi.selInFocusID=e.selectorID,window.TvrSharedVars.curSelCSS=TvrCom.custom_escape_quotes(e.selectorM.find(".selector-css-textarea").val()),$("#last-edited-selector").val(TvrUi.selInFocusID),$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&last_viewed_selector="+TvrUi.selInFocusID,function(){});$("#current-selector");if($("#sec-in-focus").hasClass("on"))var r="on";else var r="";if($("#sel-in-focus").hasClass("on"))var t="on";else var t="";$("#current-selector").html('<span class="breadcrumb-arrow first-breadcrumb sec-in-focus-arrow">&raquo;</span><span id="sec-in-focus" class="sec-in-focus '+r+'" title="Quick Edit - Current Folder">'+e.sectionH+'</span> <span class="breadcrumb-arrow  sel-in-focus-arrow">&raquo;</span> <span id="sel-in-focus" class="sel-in-focus '+t+'" title="Quick Edit - Current Selector">'+e.selectorH+"</span>")},menu_object:function(e){return $("#"+e.replace("opts","strk"))},section_slug:function(e){var r=TvrUi.get_meta($("#"+e),"selector");return r.sectionSlug},allowed_action:function(e,r){var t=!1;if(!TvrUi.trial)return!0;if("Edit Sel"==r&&TvrCom.isDomEl(e.closest(".trial-disabled")))var t=!0;if("Add Sel"==r&&TvrUi.totalSels>=9)var t=!0;return t?(alert(TvrUi.trialNotice),!1):!0},load_css_ref:function(e){TvrUi.show_dialog(e)},font_changed:function(e){TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span(e,"after")},show_google_fonts:function(e){e.show("fast"),$.colorbox({href:$("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),TvrUi.font_changed(TvrUi.gFontTarget)},hide_google_fonts:function(e,r){TvrUi.gFontTarget.val("").prop("val",""),r.hide(),TvrUi.font_changed(e)},insert_google_font:function(e){$.colorbox.close(),TvrUi.gFontTarget.val(e).focus(),TvrUi.font_changed(TvrUi.gFontTarget)},launch_img_uploader:function(e){return wp.media.editor.send.attachment=function(r,t){TvrUi.update_bg_image(e,t.url)},wp.media.editor.open(e),!1},update_bg_image:function(e,r){var t=TvrUi.get_meta(e,"property");t.property.find(".image-url-store").val(r),t.property.find(".img_display").val(TvrCom.basename(r)),TvrUi.ajax_save_settings("save"),TvrUi.adjust_comp_span(t.property.find(".img_display"),"after")},clear_bg_image:function(e){TvrUi.update_bg_image(e,"")},toggle_hand_css:function(e){e.hasClass("on")?TvrUi.hide_hand_css(e):TvrUi.show_hand_css(e),TvrUi.toolbar_adjusted()},show_hand_css:function(e){var r=$("#visual-view");r.hasClass("show-wizard")&&TvrUi.hide_wizard(),r.addClass("show-code-editor"),e.addClass("on"),!TvrEditors.setUp},hide_hand_css:function(e){$("#visual-view").removeClass("show-code-editor"),e.removeClass("on")},set_up_editors:function(){var e=$("#editors-list").attr("rel").split("|");for(var r in e)alert(e[r]),TvrEditors[e[r]]=ace.edit("custom-css-"+e[r]),TvrEditors[e[r]].setTheme("ace/theme/chrome"),TvrEditors[e[r]].getSession().setMode("ace/mode/css"),TvrEditors[e[r]].setShowPrintMargin(!1),TvrEditors[e[r]].getSession().on("change",function(){$("#custom-css-"+e[r]).addClass("changed")})},input_icon_toggle:function(e){var r=e.attr("data-input-type");if("important"==r){var t=TvrUi.get_meta(e,"property"),i=t.property.find(".property-input").attr("name");if(e.hasClass("imp-mq"))var a=i.replace("[non_section]","[non_section][important]").replace("[styles]","");else var a=i.replace("tvr_mcth","tvr_mcth[non_section][important]").replace("[styles]","")}else if("pie"==r||"boxsizing"==r)var t=TvrUi.get_meta(e,"selector"),a=t.selectorM.find("input.register-selector").attr("name")+"["+r+"]";if("off"==e.attr("rel")){var o='<input class="'+r+'-tracker" type="hidden" name="'+a+'" value="1" />';e.attr("rel","on").addClass("active").before(o)}else"on"==e.attr("rel")&&e.attr("rel","off").removeClass("active").prev("."+r+"-tracker").remove();TvrUi.ajax_save_settings("save")},get_meta:function(e,r){TvrUi.meta={};var t=["stub","section","selector","group","property"];for(var i in t)if(t[i]==r){if(e.attr("class")&&e.attr("class").indexOf(r+"-tag")>=0)var a=e;else var a=e.closest("."+r+"-tag");var o=a.attr("id"),s=o.split("-")}var n="";for(var l in s)if(0!=l&&5!=l)if(r=t[l],n+="-"+s[l],"property"==r&&(n+="-"+s[5],"all"==s[5]&&(n+="-devices")),TvrUi.meta[r]=$("#opts"+n),TvrUi.meta[r+"M"]=$("#strk"+n),TvrUi.meta[r+"Slug"]=s[l],"section"==r)TvrUi.meta[r+"T"]=$(TvrUi.meta[r+"M"]).find("input.section-tracker"),TvrUi.meta[r+"H"]=$(TvrUi.meta.sectionM).find(".section-display-name").val(),TvrUi.meta[r+"ID"]="opts-"+TvrUi.meta.sectionSlug,TvrUi.meta[r+"MID"]="strk-"+TvrUi.meta.sectionSlug;else if("selector"==r){var c=$(TvrUi.meta.selectorM).find(".selector-label").val().split("|");TvrUi.meta[r+"T"]=$(TvrUi.meta[r+"M"]).find("input.selector-tracker"),TvrUi.meta[r+"H"]=c[0],TvrUi.meta[r+"ID"]="opts-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug,TvrUi.meta[r+"MID"]="strk-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug}else"group"==r&&(TvrUi.meta[r+"H"]=TvrCom.ucwords(TvrUi.meta[r+"Slug"]),TvrUi.meta[r+"ID"]="opts-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug+"-"+TvrUi.meta.groupSlug,TvrUi.meta[r+"MID"]="strk-"+TvrUi.meta.sectionSlug+"-"+TvrUi.meta.selectorSlug+"-"+TvrUi.meta.groupSlug);return TvrUi.meta},jscolor_bind:function($obj){for(var matchClass=new RegExp("(^|\\s)("+mcthmr_jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=$obj.find("input.color"),i=0;i<e.length;i+=1){var m;if((!e[i].color||"ffffff"==e[i].color)&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3])try{eval("prop="+m[3])}catch(eInvalidProp){}e[i].color=new mcthmr_jscolor.color(e[i],prop)}}},update_count:function(e,r,t,i,a){TvrCom.hasValue(a)||(a=0);var o=parseInt(e.attr("rel"));if("add"==r)var s=o+parseInt(t);else if("subtract"==r)var s=o-parseInt(t);if(e.attr("rel",s),"section"!=i){if(0==o){e.after(' <span class="count-wrap">(<span class="state-count"></span>)</span>')}if(0==s){e.next("span").remove()}else e.next("span").find(".state-count").text(parseInt(s))}if("section"==i){var n=$("#total-sec-count"),l=parseInt(n.text());s>o?(window.TvrSharedVars.totalSecs=parseInt(l+t),n.text(window.TvrSharedVars.totalSecs),TvrUi.totalSels=TvrUi.totalSels+parseInt(a),$("#total-sel-count").text(parseInt(TvrUi.totalSels))):(window.TvrSharedVars.totalSecs=parseInt(l-t),n.text(window.TvrSharedVars.totalSecs),TvrUi.totalSels=TvrUi.totalSels-parseInt(a),$("#total-sel-count").text(parseInt(TvrUi.totalSels)))}else if("selector"==i){var c=$("#total-sel-count"),d=parseInt(c.text());s>o?(TvrUi.totalSels=parseInt(d+t),c.text(TvrUi.totalSels)):(TvrUi.totalSels=parseInt(d-t),c.text(TvrUi.totalSels))}TvrUi.toggle_enabled_buttons()},com_data_loading:function(e,r){e.find("."+r+"-row").append($("#loading-gif-template").clone().removeAttr("id")),TvrUi.update_prog_indicator("plus","Loading Style Options...")},com_data_finished_loading:function(e,r){e.find("img.ajax-loader").remove(),TvrUi.update_prog_indicator("minus",r)},ajax_load_ui_data:function(e,r,t,i,a,o,s,n){TvrUi.dataLoading=!0,TvrUi.log_action(r,"data-load");var l=$("#ui-nonce").text(),c="admin.php?page=tvr-microthemer.php",d="action=tvr_microthemer_ui_load_styles&tvr_load_section="+i;d+="&tvr_load_type="+o,d+="&_wpnonce="+l;d+="&tvr_load_selector="+a,$.ajax({type:"GET",url:c,async:!0,data:d,timeout:2e4,error:function(e,t){TvrUi.com_data_finished_loading(r,["Options failed to load","<p>"+TvrUi.handle_ajax_error(e,t)+'</p><p>The styling options failed to load into the interface. This sometimes happens if WordPress silently logs you out or because your "nonce" expires as a result of inactivity. Please refresh the page and try to log back in if necessary.</p>'])},success:function(i){var a=$(i).find("#tmp-wrap").html();if(e.append(a),TvrUi.jscolor_bind(e),t.val(2),3!=s){if(TvrUi.unlog_action(r,"data-load"),TvrUi.com_data_finished_loading(r),"load selector before modifying"==n&&TvrUi.toggle_modify_selector(r.find(".edit-icon")),"load selector before iterating"==n&&TvrUi.tvr_iterate_selectors_v(r),"load selector before copying"==n&&TvrUi.copy_selector(r),"load selector after moving"==n){var o={item:r};TvrCom.selector_received({},o)}}else--TvrUi.selsToLoad,0==TvrUi.selsToLoad&&(TvrUi.unlog_action(r,"all-sels-loading"),"sec rename, load styles discretely"==n&&TvrUi.toggle_rename_section(r.find(".edit-icon")),"sec copy, load styles discretely"==n&&TvrUi.copy_section(r.find(".copy-icon")),TvrUi.com_data_finished_loading(r))},complete:function(){TvrUi.unlog_action(r,"data-load"),TvrUi.dataLoading=!1}})},ajax_load_revisions_table:function(){TvrUi.update_prog_indicator("plus","Loading Revisions Table...");var e=$("#revisions-url").attr("rel");$.ajax({type:"GET",url:e,async:!0,timeout:2e4,error:function(e,r){TvrUi.update_prog_indicator("minus",["Revisions failed to load","<p>"+TvrUi.handle_ajax_error(e,r)+"</p>"])},success:function(e){var r=$(e).find("#tmp-wrap").html();$("#revision-area").html(r),TvrUi.update_prog_indicator("minus")},complete:function(){}})},ajax_load_css:function(){TvrUi.update_prog_indicator("plus","Retrieving CSS...");var e=$("#active-styles-url").attr("rel")+"?nocache="+(new Date).getTime();$.ajax({type:"GET",url:e,async:!0,timeout:2e4,error:function(e,r){TvrUi.update_prog_indicator("minus",["CSS failed to load","<p>"+TvrUi.handle_ajax_error(e,r)+"</p>"])},success:function(e){$("#generated-css").html(e),TvrUi.update_prog_indicator("minus")},complete:function(){}})},ajax_load_external_js:function(e,r){TvrUi.update_prog_indicator("plus","Loading Javascript...");var t=$("#plugin-url").attr("rel")+"js/"+e;$.getScript(t).done(function(){"ACE code editor script"==r&&TvrUi.show_hand_css($("#edit-css-code")),TvrUi.update_prog_indicator("minus")}).fail(function(e,t){TvrUi.update_prog_indicator("minus",["Script failed to load","<p>The "+r+" failed to load.</p><p>"+TvrUi.handle_ajax_error(e,t)+"</p>"])})},ui_reset:function(){var e=confirm("Are you sure you want to reset all settings?");if(!e)return!1;var r,t,i,a,o;r="reset",t=$("#ui-url").attr("rel"),i=["Resetting empty folders..."],a="GET",o=$("#resetUrl").attr("rel"),TvrUi.general_ajax_submission(r,t,i,a,o)},clear_styles:function(){var e=confirm("Are you sure you want to clear all styles? Note: The page will reload, so please save any unsaved folders/selectors first (Use Control+S keyboard shortcut to save). Also, the hand-coded CSS area won't get cleared. Please do that manually if required.");if(!e)return!1;var r,t,i,a,o;r="clear",t=$("#ui-url").attr("rel"),i=["Clearing styles..."],a="GET",o=$("#clearUrl").attr("rel"),TvrUi.general_ajax_submission(r,t,i,a,o)},restore_rev:function(e){var r=confirm("Are you sure you want to restore previous settings?");if(!r)return!1;var t,i,a,o,s;t="restore",i=$("#ui-url").attr("rel"),a=["Restoring settings..."],o="GET",s=e.attr("rel"),TvrUi.general_ajax_submission(t,i,a,o,s)},update_code_editor_textareas:function(){$("#code-editors-wrap").find("pre.changed").each(function(){var e=$(this),r=e.attr("rel"),t=TvrEditors[r].getValue();e.prev("textarea").val(t)})},ajax_save_settings:function(e){if(TvrUi.saveInProgress)return TvrUi.reSave=!0,!1;TvrUi.saveInProgress=!0;var r=$("#ui-url").attr("rel");TvrUi.update_prog_indicator("plus","Saving Settings..."),TvrUi.update_code_editor_textareas();$("#tvr_microthemer_ui_serialised");$("#tvr-serialised-data").val($("#tvr_microthemer_ui_save, #microthemer_ui_settings_export").serialize()),$.ajax({type:"POST",url:r,data:$("#tvr_microthemer_ui_serialised").serialize(),timeout:2e4,error:function(e,r){TvrUi.reSave=!1,TvrUi.update_prog_indicator("minus",["Save error","<p>"+TvrUi.handle_ajax_error(e,r)+"</p>"])},success:function(r){TvrUi.reSave&&(TvrUi.reSave=!1,TvrUi.saveInProgress=!1,TvrUi.ajax_save_settings("save"));
    var t=$(r);TvrUi.update_prog_indicator("minus"),TvrUi.update_prog_indicator("plus","Refreshing Frontend Styles..."),window.TvrSharedVars.g_url=t.find("#google-url-to-refresh").text(),TvrUi.iframe_functions_loaded()?window.frames.viframe.TvrExportVars.refreshCSS():window.TvrSharedVars.awaitingIframeReloadAfterSave=!0;var i=t.find("#microthemer-notice").html();if(null==i){var a,o=$("#log-item-template").clone().removeAttr("id");jQuery.each(jQuery.browser,function(e,r){a+=e+" : "+r+"\n"}),$("#error-report-form").find('textarea[name="tvr_php_error"]').val(r).end().find('textarea[name="tvr_serialised_data"]').val($("#tvr-serialised-data").val()).end().find('textarea[name="tvr_browser_info"]').val(a)}else{var o=$(i).find("li.tvr-message"),s=t.find(".script-feedback");$("#script-feedback").html(s)}if($("#full-logs").find(".logs").html(o),TvrUi.update_short_status(),"view-css"==e&&TvrUi.ajax_load_css(),"export"==e){var n=$("#sanit-export-name").text();n&&(TvrUi.update_packs_obj(TvrCom.readable_name(n)),$("#sanit-export-name").text("")),TvrUi.reload_iframe("manage-design-packs",!1),TvrUi.close_dialog()}},complete:function(){TvrUi.saveInProgress=!1}})},update_packs_obj:function(e){TvrCombo.directories[TvrCombo.directories.length]=e},handle_ajax_error:function(e,r){return 0==e.status?"Connection Error. Request Failed. Please Try again.":404==e.status?"Requested URL not found.":500==e.status?"Internel Server Error.":"parsererror"==r?"Error.\nParsing JSON Request failed.":"timeout"==r?"Request Timed out.":"Unknow Error.\n"+e.responseText},email_error_report:function(){TvrUi.update_prog_indicator("plus","Sending error report...");var e=$("#ui-nonce").text(),r=$("#ui-url").attr("rel");r+="&action=tvr_error_email&_wpnonce="+e;var t=$("#error-report-form").serialize();$.ajax({type:"POST",url:r,data:t,timeout:2e4,error:function(e,r){TvrUi.update_prog_indicator("minus",["Error sending failed","<p>"+TvrUi.handle_ajax_error(e,r)+"</p>"])},success:function(e){TvrUi.update_prog_indicator("minus");var r=$(e),t=r.find("#microthemer-notice").html();if(t)var i=$(t).find("li.tvr-message");$("#full-logs").find(".logs").html(i),TvrUi.update_short_status()}})},show_dialog:function(e){TvrUi.close_dialog();var r=e.attr("rel");if("not-yet"==r)return!1;if($("#"+r+"-dialog").addClass("show"),"export-to-pack"==r){var t="";$("#tvr-menu").find(".section-tag").each(function(){var e=TvrUi.get_meta($(this),"section"),r=parseInt(e.sectionM.find(".selector-count-state").attr("rel")),i="",a="";r>0&&(i='checked="checked"',a="on"),t+='<li><input type="checkbox" name="export_sections['+e.sectionSlug+']" '+i+' /> <span class="fake-checkbox '+a+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+e.sectionH+"</span></li>"}),$("#available-folders").html(t),TvrUi.update_code_editor_textareas();var i=$("#custom-css");$("#hand-css-area").find("textarea.hand-css-textarea").each(function(){var e=$(this),r=i.find(".custom-"+e.attr("id"));TvrCom.hasValue(e.val())?TvrCom.check_fake(r):TvrCom.uncheck_fake(r)}),$("#export_to_pack").val(1),$("#export_pack_name").val("")}"display-css-code"==r&&TvrUi.ajax_save_settings("view-css"),"display-revisions"==r&&TvrUi.ajax_load_revisions_table(),("manage-design-packs"==r||"program-docs"==r)&&TvrUi.reload_iframe(r,e)},close_dialog:function(){$("#tvr").find("div.tvr-dialog").removeClass("show"),$("#export_to_pack, #new_pack").val(0)},reload_iframe:function(e,r){if("manage-design-packs"==e)var t="manage_iframe";else if("program-docs"==e)var t="docs_iframe";var i=$("#"+t),a=i.attr("rel");if(r&&TvrCom.hasValue(r.attr("data-prop"))){a="http://themeover.com/"+r.attr("data-prop")+"/";var o=!0}(1!=i.attr("data-frame-loaded")||o||TvrCom.isDomEl(r.closest(".dialog-footer")))&&(window.frames[t].location=a,i.attr("data-frame-loaded",1))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){e.scrollTop(e.scrollHeight)},toggle_multi_checkboxes:function(e){var r=$("#available-folders, #custom-css");e.hasClass("on")?r.find("input").prop("checked",!1).end().find(".fake-checkbox").add(e).removeClass("on"):r.find("input").prop("checked",!0).end().find(".fake-checkbox").add(e).addClass("on")},import_settings:function(){if(""==$("#import_from_pack_name").val())return alert("Please select a design pack from the list"),!1;if(!$("#ui-import-overwrite").is(":checked")&&!$("#ui-import-merge").is(":checked"))return alert("Please choose an import method (overwrite or merge with your current settings)"),!1;if($("#ui-import-overwrite").is(":checked"))var e="overwrite";else var e="merge";var r,t,i,a,o;r="import",t=$("#ui-url").attr("rel"),i=["Importing Settings ("+e+")..."],a="POST",o=$("#microthemer_ui_settings_import").serialize(),TvrUi.general_ajax_submission(r,t,i,a,o)},general_ajax_submission:function(e,r,t,i,a){var o=-1;TvrUi.update_prog_indicator("plus",t[o++]),$.ajax({type:i,url:r,data:a,timeout:2e4,error:function(r,t){TvrUi.update_prog_indicator("minus",[TvrCom.ucwords(e)+" error","<p>"+TvrUi.handle_ajax_error(r,t)+"</p>"]),TvrUi.close_dialog()},success:function(){window.location=r}})},export_settings:function(){if(!$("#export_pack_name").val())return alert("Please select an existing settings pack or name a new one to export to"),!1;var e=$("#export_pack_name").val().toLowerCase(),r=!1;for(var t in TvrCombo.directories)if(TvrCombo.directories[t].toLowerCase()==e){r=!0;break}r||$("#new_pack").val(1),TvrUi.ajax_save_settings("export")},add_m_query:function(e){var r=e.attr("rel"),t=$("#unq-base").attr("rel");e.attr("rel",++r);var i=$("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+r);i.find("input").each(function(){$(this).attr("name",$(this).attr("name").replace("key",t+r))}),$("#mq-list").append(i).find("li").filter(":last").hide().fadeIn("fast").end().sortable("refresh")},del_m_query:function(e){e.parents("li.mq-row").fadeOut("slow",function(){$(this).remove()})},reveal_form_opts:function(e){var r=e.attr("rel");e.closest("li").siblings(".hidden."+r).addClass("show")},toggle_folder:function(e){var r=TvrUi.get_meta(e,"section"),t=r.sectionM.find("ul.selector-sub"),i=r.sectionM.find(".menu-arrow");i.hasClass("on")?(i.removeClass("on"),t.hide()):(i.addClass("on"),t.show())},dom_replacements:function(e,r,t,i,a,o,s,n,l,c){return"section"==e&&(r.find("input, select").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth["+t+"]","tvr_mcth["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+i+"]"))}),r.find(".section-name .name-text").text(a),r.find(".section-display-name").val(a),r.find(".rename-input").val(a),r.find(".selector-tag, .group-tag, .property-tag").add(r).each(function(){$(this).attr("id",$(this).attr("id").replace(t,i))})),"selector"==e&&(r.find(".selector-name").attr("title",TvrCom.regular_escape_quotes(l)),r.find(".selector-name .name-text").text(n),r.find(".selector-label").val(n+"|"+l),r.find(".selector-name-input").val(n),r.find(".selector-css-textarea").val(l)),"group"==e&&(r.removeAttr("id"),r.attr("class",r.attr("class").replace("property-fields-all-devices","property-fields-"+c)),"all-devices"!=c&&r.find(".property-input").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+c+"]"))}).end().find(".important-toggle").each(function(){$(this).removeClass("imp-reg").addClass("imp-mq")}).end().find(".property-tag").each(function(){$(this).attr("id",$(this).attr("id").replace("-all-devices","-"+c))})),("selector"==e||"group"==e)&&(r.find("input, select").each(function(){$(this).attr("name",$(this).attr("name").replace("tvr_mcth["+t+"]["+o+"]","tvr_mcth["+i+"]["+s+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+i+"]["+s+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+i+"]["+s+"]"))}),r.find(".selector-tag, .group-tag, .property-tag").add(r).each(function(){try{$(this).attr("id",$(this).attr("id").replace(t+"-"+o,i+"-"+s))}catch(e){}})),r},add_section:function(e){var r=TvrCom.ucwords(e.siblings(".new-section-input").val()),t=TvrCom.new_name_checks(r,"folder");if(!t)return!1;var i=TvrUi.dom_replacements("section",$("#strk-selector_section").add($("#opts-selector_section")).clone(),"selector_section",t.newName,t.newNameHuman);$("#tvr-options").append(i[1]),$("#tvr-menu").append(i[0]).find("li").filter(":last").hide().fadeIn("fast",function(){$("#add-new-section").find("input.new-section-input").val("");var e=$("#section-count-state");TvrUi.update_count(e,"add",1,"section")}),TvrCom.refresh_sortable(),$("#main-menu-scroll").mCustomScrollbar("scrollTo","bottom")},load_section_selectors:function(e,r){var t=e.sectionM.find('input.selector-tracker[value="0"]');return TvrUi.selsToLoad=t.length,TvrUi.totalToLoad=TvrUi.selsToLoad,TvrUi.selsToLoad>0?TvrUi.action_in_prog(e.sectionM,"all-sels-loading")?!0:(TvrUi.log_action(e.sectionM,"all-sels-loading"),TvrUi.com_data_loading(e.sectionM,"sec"),t.each(function(){e=TvrUi.get_meta($(this),"selector"),TvrUi.ajax_load_ui_data(e.selector,e.sectionM,e.selectorT,e.sectionSlug,e.selectorSlug,"selector",3,r)}),!0):!1},toggle_rename_section:function(e){var r=TvrUi.get_meta(e,"section");if(!TvrUi.action_in_prog(r.sectionM,"rename")&&!TvrUi.action_in_prog(r.sectionM,"data-load")&&!TvrUi.load_section_selectors(r,"sec rename, load styles discretely")){TvrUi.log_action(r.sectionM,"rename");var r=TvrUi.get_meta(e,"section");$form=r.sectionM.find(".edit-section-form"),$name=r.sectionM.find(".section-name"),$form.hasClass("show")?($name.show(),$form.removeClass("show")):($name.hide(),$form.addClass("show")),TvrUi.unlog_action(r.sectionM,"rename")}},action_rename_section:function(e){var r=TvrUi.get_meta(e,"section"),t=TvrCom.ucwords(r.sectionM.find(".rename-input").val());if(TvrCom.convert_to_param(t)==r.sectionSlug){var i=[];i.newName=r.sectionSlug,i.newNameHuman=t}else{var i=TvrCom.new_name_checks(t,"folder");if(!i)return!1}var a=i.newName,o=i.newNameHuman,s=r.sectionSlug,n=r.sectionM.add(r.section);TvrUi.dom_replacements("section",n,s,a,o),r=TvrUi.get_meta($("#strk-"+a),"section"),TvrUi.toggle_rename_section(r.sectionM),TvrUi.selInFocusID.indexOf("opts-"+s)>=0&&TvrUi.update_global_vars(TvrUi.get_meta(r.section.find("li.in-focus"),"selector"))},copy_section:function(e){var r=TvrUi.get_meta(e,"section");if(!TvrUi.action_in_prog(r.sectionM,"copy")&&!TvrUi.load_section_selectors(r,"sec copy, load styles discretely")){TvrUi.log_action(r.sectionM,"copy");var t=TvrCom.resolve_unique_name(r.sectionH,$("#tvr-menu"),".section-name","Copy"),i=TvrUi.dom_replacements("section",TvrUi.proper_clone(r.section.add(r.sectionM)),r.sectionSlug,TvrCom.convert_to_param(t),t);i.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),i.find("img.ajax-loader").remove(),r.sectionM.after(i[0]),r.section.after(i[1]);var a=$("#section-count-state"),o=r.sectionM.find("span.selector-count-state").attr("rel");TvrUi.update_count(a,"add",1,"section",o),TvrUi.unlog_action(r.sectionM,"copy"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}},action_in_prog:function(e,r){return TvrCom.hasValue(e.attr(r+"-in-prog"))?!0:!1},log_action:function(e,r){e.attr(r+"-in-prog",1)},unlog_action:function(e,r){e.removeAttr(r+"-in-prog")},delete_section:function(e){var r=TvrUi.get_meta(e,"section");return TvrUi.action_in_prog(r.sectionM,"delete")||TvrUi.action_in_prog(r.sectionM,"all-sels-loading")?!1:(TvrUi.log_action(r.sectionM,"delete"),void r.sectionM.fadeOut("fast",function(){var e=r.sectionM.find("span.selector-count-state").attr("rel");if(TvrUi.update_count($("#section-count-state"),"subtract",1,"section",e),TvrCom.hasValue(TvrUi.selInFocusID)&&r.sectionSlug==TvrUi.section_slug(TvrUi.selInFocusID)){TvrUi.expanded("quick_section")&&TvrUi.close_quick_edit();var t=TvrUi.selectorTrackerScan(r.sectionM,"next");if(TvrCom.isDomEl(t)||(t=TvrUi.selectorTrackerScan(r.sectionM,"prev")),TvrCom.isDomEl(t)){var i=TvrUi.get_meta(t,"selector");TvrUi.tvr_iterate_selectors_v(i.selectorT)}else;}r.section.remove(),r.sectionM.remove()}))},toggle_add_selector:function(e){var r=TvrUi.get_meta(e,"section"),t=r.sectionM.find(".add-selector-form");t.hasClass("show")?TvrUi.close_add_selector(t):TvrUi.reveal_add_selector(t)},reveal_add_selector:function(e){var r=TvrUi.get_meta(e,"section");e.addClass("show"),r.sectionM.find(".menu-arrow").hasClass("on")||TvrUi.toggle_folder(r.sectionM)},close_add_selector:function(e){e.removeClass("show"),e.find("textarea.selector-css-textarea, input.selector-name-input").val("")},selector_checks_values:function(e,r,t){var i=TvrCom.ucwords(e.val());if(""==i)return alert("Please enter a value for the Selector name"),!1;if(TvrCom.convert_to_param(i)==t){var a=[];a.newName=t,a.newNameHuman=i}else{var a=TvrCom.new_name_checks(i,"selector");if(!a)return!1}return r?(a.code=r,a):(alert("Please enter some CSS selector code e.g. #header"),!1)},show_hide_sel_custom:function(e,r){var t=TvrUi.analyse_sel_code(e);t.custom_styles?r.addClass("custom-styles"):r.removeClass("custom-styles")},analyse_sel_code:function(e){var r=[];if(e.indexOf("{")>=0){r.custom_styles=!0;var t=e.split("{");r.code=t[0]}else r.custom_styles=!1,r.code=e;return r},add_selector:function(e){if(!TvrUi.allowed_action(e,"Add Sel"))return!1;var r=TvrUi.get_meta(e,"section"),t=TvrUi.selector_checks_values(r.sectionM.find(".add-selector-form .selector-name-input"),r.sectionM.find(".add-selector-form .selector-css-textarea").val(),!1);if(!t)return!1;var i=TvrUi.dom_replacements("selector",$("#strk-selector_section-selector_css").add($("#opts-selector_section-selector_css")).clone(),"selector_section",r.sectionSlug,r.sectionM.find(".name-text").text(),"selector_css",t.newName,t.newNameHuman,t.code);i.find(".view-state-input").val(1),r.sectionM.find(".selector-sub").append(i[0]),r.section.find(".opts-selectors-sub").append(i[1]),TvrUi.update_count(r.sectionM.find(".selector-count-state"),"add",1,"selector",""),r=TvrUi.get_meta(r.section.find(".selector-tag").last(),"selector"),TvrUi.tvr_iterate_selectors_v(r.selectorT),TvrUi.pg_icon_pressed(r.selector.find(".pg-icon-font")),TvrCom.refresh_sortable(),TvrUi.show_hide_sel_custom(t.code,r.selectorM.find(".selector-name")),TvrUi.close_add_selector(r.sectionM.find(".add-selector-form")),TvrUi.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),window.TvrSharedVars.intelli&&TvrUi.hide_wizard()},load_selector:function(e,r){return 0!=e.selectorT.val()||TvrUi.action_in_prog(e.selectorM,"data-load")?!1:(TvrUi.com_data_loading(e.selectorM,"sel"),TvrUi.ajax_load_ui_data(e.selector,e.selectorM,e.selectorT,e.sectionSlug,e.selectorSlug,"selector",1,r),!0)},toggle_modify_selector:function(e){var r=TvrUi.get_meta(e,"selector");if(!TvrUi.action_in_prog(r.selectorM,"rename")&&!TvrUi.action_in_prog(r.selectorM,"data-load")&&!TvrUi.load_selector(r,"load selector before modifying")){TvrUi.log_action(r.selectorM,"rename");var t=r.selectorM.find(".edit-selector-form");t.hasClass("show")?(t.removeClass("show"),TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit()):t.addClass("show"),TvrUi.unlog_action(r.selectorM,"rename")}},action_modify_selector:function(e){var r=TvrUi.get_meta(e,"selector"),t=TvrUi.selector_checks_values(r.selectorM.find(".selector-name-input"),r.selectorM.find(".selector-css-textarea").val(),r.selectorSlug);if(!t)return!1;var i=t.newName,a=t.newNameHuman,o=r.sectionSlug,s=r.selectorM.add(r.selector);TvrUi.dom_replacements("selector",s,o,o,r.sectionH,r.selectorSlug,i,a,t.code),TvrUi.selInFocusID==r.selectorID&&TvrUi.update_global_vars(TvrUi.get_meta(r.section.find("li.in-focus"),"selector")),TvrUi.show_hide_sel_custom(t.code,r.selectorM.find(".selector-name")),window.TvrSharedVars.curSelCSS=TvrCom.custom_escape_quotes(t.code),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("reg"),TvrUi.ajax_save_settings("save"),TvrUi.toggle_modify_selector(r.selectorM),TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit()},proper_clone:function(e){var r=e.clone();return e.find("select.property-input").each(function(e){r.find("select.property-input").eq(e).val($(this).val())}),TvrUi.jscolor_bind(r),r},copy_selector:function(e){if(!TvrUi.allowed_action(e,"Add Sel"))return!1;var r=TvrUi.get_meta(e,"selector");if(!TvrUi.action_in_prog(r.selectorM,"copy")&&!TvrUi.action_in_prog(r.selectorM,"data-load")&&!TvrUi.load_selector(r,"load selector before copying")){TvrUi.log_action(r.selectorM,"copy");var t=TvrCom.resolve_unique_name(r.selectorH,r.sectionM,".selector-name","Copy"),i=TvrUi.dom_replacements("selector",TvrUi.proper_clone(r.selector.add(r.selectorM)),r.sectionSlug,r.sectionSlug,r.sectionH,r.selectorSlug,TvrCom.convert_to_param(t),t,r.selectorM.find(".selector-css-textarea").val());i.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),r.selectorM.after(i[0]),r.selector.after(i[1]),TvrUi.update_count(r.sectionM.find(".selector-count-state"),"add",1,"selector",""),TvrUi.unlog_action(r.selectorM,"copy"),TvrCom.hasValue(TvrUi.selInFocusID)&&TvrUi.update_visual_controls($("#"+TvrUi.selInFocusID))}},delete_selector:function(e){var r=TvrUi.get_meta(e,"selector");return TvrUi.action_in_prog(r.selectorM,"delete")||TvrUi.action_in_prog(r.selectorM,"data-load")?!1:(TvrUi.log_action(r.selectorM,"delete"),void r.selectorM.fadeOut("fast",function(){if(TvrUi.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),r.selectorID==TvrUi.selInFocusID){TvrUi.expanded("quick_selector")&&TvrUi.close_quick_edit();var e=TvrUi.selectorTrackerScan(r.sectionM,"next","selector",r.selectorM);if(TvrCom.isDomEl(e)||(e=TvrUi.selectorTrackerScan(r.sectionM,"prev","selector",r.selectorM)),TvrCom.isDomEl(e)){var t=!0,i=TvrUi.get_meta(e,"selector");TvrUi.tvr_iterate_selectors_v(i.selectorT)}else var t=!1}r.selector.remove(),r.selectorM.remove(),t||TvrUi.update_visual_controls(!1)}))},add_property_group:function(e){var r=TvrUi.get_meta(e,"group"),t=e.attr("rel").split("|"),i=t[0],a=(t[1],r.group.find(".mq-button.on").length),o=TvrUi.dom_replacements("group",$("#option-group-template-"+r.groupSlug).clone(),"selector_section",r.sectionSlug,r.sectionM.find(".name-text").text(),"selector_css",r.selectorSlug,r.selectorH,"",i);TvrUi.jscolor_bind(o),r.group.append(o);var s=r.group.find(".mq-tab-"+i);s.addClass("show"),TvrUi.mq_tab_pressed(s),0==a&&(r.selector.find(".pg-icon-"+r.groupSlug).addClass("on").find(".main-checkbox").prop("checked",!0),TvrUi.update_count(r.selector.find(".style-count-state"),"add",1,"style")),r.group.find(".mqb-"+i).addClass("on").find(".style-config").prop("checked",!0),TvrUi.update_mq_button($("#mq-button-"+i))},remove_property_group:function(e,r){var t=TvrUi.get_meta(e,"group");if("delete-all"==r)var i=t.group.find(".property-fields"),a=t.group.find(".mq-button"),o=t.group.find("span.mq-tab"),s=t.group.find(".style-config");else{var n=e.attr("rel").split("|"),l=n[0],i=t.group.find(".property-fields-"+l),a=e.parent(".mq-button"),o=t.group.find("span.mq-tab-"+l),s=t.group.find(".mqb-"+l).find(".style-config"),c=!1;o.hasClass("active")&&(c=!0)}i.remove(),a.removeClass("on"),o.removeClass("show active"),s.prop("checked",!1);var d=t.group.find(".mq-button.on").length;0==d&&(t.selector.find(".pg-icon-"+t.groupSlug).removeClass("on").find(".main-checkbox").prop("checked",!1),TvrUi.update_count(t.selector.find(".style-count-state"),"subtract",1,"style"),t.selector.find(".pg-focus").val("")),d>0&&c&&TvrUi.mq_tab_pressed(t.group.find("span.mq-tab.show:eq(0)")),TvrUi.ajax_save_settings("save")},update_accordion:function(e,r){var t=r.find("li.accordion-item"),i=e.parent();if(i.hasClass("show-content"))var a=!0;return r.find(".accordion-menu-arrow.on").removeClass("on"),t.slideUp(function(){r.find(".show-content").removeClass("show-content")}),a?!1:(i.find(".accordion-menu-arrow").addClass("on"),e.siblings("li.accordion-item").slideDown(function(){i.addClass("show-content")}),!1)},pg_icon_pressed:function(e){if(!TvrUi.allowed_action(e,"Edit Sel"))return!1;var r=e.attr("rel");window.TvrSharedVars.pgInFocus=r;var t=TvrUi.get_meta(e,"selector");t=TvrUi.get_meta($("#opts-"+t.sectionSlug+"-"+t.selectorSlug+"-"+r),"group"),e.hasClass("on")||TvrUi.add_property_group(t.group.find(".mqb-all-devices").find(".mq-add"));var i=t.selector.find(".styling-options"),a=".group-tag",o=t.selector.find(".styling-option-icons"),s=".pg-icon",n=".pg-focus";TvrUi.update_tab(i,a,o,r,s,n),TvrUi.update_mq_button($("#mq-button-"+t.group.find(".device-focus").val())),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str"),TvrUi.refresh_comp_css(),TvrUi.toolbar_adjusted()},show_add_mq:function(e){return TvrUi.itemAlreadyExpanded?!1:void e.addClass("on").parent().addClass("expanded on")},hide_add_mq:function(){var e=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(e))return!1;var r=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");r.selector.find("span.add-mq").removeClass("expanded on").find(".add-mq-icon").removeClass("on")},clear_pg_fields:function(e){var r=TvrUi.get_meta(e,"group");r.group.find(".property-input").each(function(){var e=$(this);e.val(""),e.hasClass("color")&&e.removeAttr("style"),TvrUi.adjust_comp_span(e,"after")}),TvrUi.ajax_save_settings("save")},update_tab:function(e,r,t,i,a,o){t.find(a).removeClass("active").end().find(a+"-"+i).addClass("active").end().find(o).val(i),e.find(r+".show").removeClass("show").end().find(r+"-"+i).addClass("show"),".mq-tab"==a&&TvrUi.update_mq_button($("#mq-button-"+i)),".adv-tab"==a&&$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&adv_wizard_tab="+i,function(){})},mq_tab_pressed:function(e){var r=TvrUi.get_meta(e,"group"),t=r.group,i=".property-fields",a=r.group.find(".query-tabs"),o=e.attr("rel"),s=".mq-tab",n=".device-focus";TvrUi.update_tab(t,i,a,o,s,n)},css_tab_pressed:function(e){var r=$("#hand-css-area"),t=".css-code-wrap",i=r.find(".css-code-tabs"),a=e.attr("rel"),o=".css-tab",s=".css-focus";TvrUi.update_tab(r,t,i,a,o,s)},adv_tab_pressed:function(e){var r=$("#advanced-wizard"),t=".adv-area",i=r.find(".adv-tabs"),a=e.attr("rel"),o=".adv-tab",s=".adv-wizard-focus";TvrUi.update_tab(r,t,i,a,o,s),e.hasClass("adv-tab-html-inspector")&&TvrUi.adjust_wiz_comp_height()},combobox_clicked:function(e){e.autocomplete("search","").next(".combo-arrow").addClass("on")},update_wizard_slider:function(e){var r=26,t=r*e,i=e;$("#code-suggestion-slider").height(t-r-r).slider({orientation:"vertical",min:1,step:1,max:i,value:i,create:function(){$("#advanced-wizard").find(".scrollable-refined").scrollTop(0)},slide:function(e,r){$("#code-suggestions").find("li.in-focus").removeClass("in-focus"),$("#code-suggestion-"+r.value).addClass("in-focus"),window.TvrSharedVars.intelli_css=$("#code-suggestion-"+r.value).text(),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("intelli")},change:function(e,r){TvrUi.autoScroll(r.value)}})},autoScroll:function(e){var r=$("#advanced-wizard").find(".scrollable-refined"),t=136,i=$("#code-suggestion-"+e),a=i.position().top;(13>a||a>t-13)&&r.animate({scrollTop:a},"500")},fix_ff_mq_bug:function(e,r){return r&&$.browser&&$.browser.mozilla?e-.3:e},update_iframe_slider:function(e,r){var t=!1;if(e&&!r)var i=e;else if(r){var i=r;t=!0}else var i=TvrUi.frameWidth;if($("#v-frontend").width(TvrUi.fix_ff_mq_bug(i,t)),$("#iframe-pixel-width").text(i+"px"),e){$("#iframe-min-width").text("min: "+e+"px");var a=e}else{$("#iframe-min-width").text("");var a=0}if(r){$("#iframe-max-width").text("max: "+r+"px");var o=r}else{$("#iframe-max-width").text("");var o=TvrUi.fullWidth}$("#v-mq-slider").slider({min:a,max:o,value:i,start:function(){window.TvrSharedVars.highlightEnabled&&(TvrUi.hide_highlighting(),window.TvrSharedVars.tmpHideHighlighting=!0)},slide:function(){var e=$("#v-mq-slider").slider("option","value");e==r&&(t=!0),$("#v-frontend").width(TvrUi.fix_ff_mq_bug(e,t)),$("#iframe-pixel-width").text(e+"px")},change:function(){if($("#visual-view").hasClass("show-wizard")){var e="intelli";window.frames.viframe.TvrExportVars.get_computed_styles({},"obj",!0),TvrUi.refresh_wizard_comp_css()}else var e="reg";window.TvrSharedVars.tmpHideHighlighting&&TvrUi.show_highlighting(),TvrUi.screen_width_adjusted(e)}}),TvrUi.iframe_slider_set=!0},update_mq_button:function(e){var r=e.attr("rel");$("#v-mq-buttons").find("span.active").removeClass("active"),e.addClass("active"),TvrUi.update_iframe_slider(TvrUi.mqMin[r],TvrUi.mqMax[r])},screen_width_adjusted:function(e){TvrUi.iframe_functions_loaded()&&(window.frames.viframe.TvrExportVars.switch_highlight(e),window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str")),TvrUi.refresh_comp_css()},map_formatted_comp:function(e,r,t,i,a,o,s,n,l){if(l)var c=window.TvrSharedVars.intelliCompProps;else var c=window.TvrSharedVars.compProps;if("straight"==t&&("var"==r?c[e[i]]=o:(0==a&&(c[e[i]]=[]),c[e[i]][a]=[],c[e[i]][a].val=o,c[e[i]][a].htmlString=s)),"array"==t){var d=-1,v=e[i];for(var u in v)"var"==r?c[v[u]]=n[++d]:(0==a&&(c[v[u]]=[]),c[v[u]][a]=[],c[v[u]][a].val=n[++d],c[v[u]][a].htmlString=s)}l?window.TvrSharedVars.intelliCompProps=c:window.TvrSharedVars.compProps=c},format_exceptions:function(e,r,t,i,a,o){if("var"==a)var s=t;else var s=t[i].val,n=t[i].htmlString;if(!TvrCom.hasValue(s))return!1;if("font-family"==r||"list-style-type"==r||"border-top-left-radius"==r||"border-top-right-radius"==r||"border-bottom-right-radius"==r||"border-bottom-left-radius"==r)TvrUi.map_formatted_comp(e,a,"straight",r,i,s,n,[],o);else if("text-shadow"==r||"box-shadow"==r){var l=s.split(" ");l.length<2&&(l[1]=l[2]=l[3]=0),TvrUi.map_formatted_comp(e,a,"array",r,i,s,n,l,o)}else if("list-style-image"==r)TvrUi.map_formatted_comp(e,a,"straight",r,i,TvrCom.basename(s),n,[],o);else if("background-img-full"==r){var c=[];c[0]=TvrCom.extract_str("bg-image",s);var d=TvrCom.extract_str("gradient",s);if(d){var v=/gradient\((.+)\)/.exec(d);if(v){var u=v[1].split(", ");if(s.indexOf("webkit")>=0)var f="webkit-",_=" (webkit standard)";else var f="",_="";if(u[0].indexOf("deg")>-1)var p=e.keys[f+"gradient-angle"][u[0]],m=!0,g=1;else var p="top to bottom",m=!1,g=0;if(c[1]=p?p:u[0]+_,c[2]=u[g],m&&u.length>3||!m&&u.length>2){var T=u[++g].split(" ");c[3]=T[0],c[4]=T[1],c[5]=u[++g]}else c[3]="none",c[4]="0",c[5]=u[++g]}else d.indexOf("svg")>-1&&(c[1]="IE9 can't report",c[2]="IE9 can't report",c[3]="IE9 can't report",c[4]="IE9 can't report",c[5]="IE9 can't report")}else c[1]="none",c[2]="none",c[3]="0",c[4]="none",c[5]="none";TvrUi.map_formatted_comp(e,a,"array",r,i,s,n,c,o)}else if("background-position"==r){var h=s.split(", "),U=h[0].split(" "),w=e.keys["background-position-x"][U[0]],x=e.keys["background-position-y"][U[1]],b=w?w:U[0],C=x?x:U[1],$=b+" "+C,y=[b,C];TvrUi.map_formatted_comp(e,a,"straight",r,i,$,n,[],o),TvrUi.map_formatted_comp(e,a,"array","background-position-custom",i,s,n,y,o)}else if("background-repeat"==r||"background-attachment"==r||"background-size"==r||"background-clip"==r){var h=s.split(", ");TvrUi.map_formatted_comp(e,a,"straight",r,i,h[0],n,[],o)}},filter_css_exceptions:function(e){if(e)var r=window.TvrSharedVars.intelliCompProps;else var r=window.TvrSharedVars.compProps;var t=TvrPropExceptions,i=0;for(var a in r){++i;var o=r[a];if(o===Object(o))for(var s in o)TvrUi.format_exceptions(t,a,o,s,"obj",e);else TvrUi.format_exceptions(t,a,o,"","var",e)}return i},refresh_comp_css:function(){if(!TvrUi.iframe_functions_loaded())return!1;var e=TvrUi.filter_css_exceptions(!1),r=$("#"+TvrUi.selInFocusID);if(!TvrCom.isDomEl(r))return!1;if(1>e){var t="This Selector doesn't target any elements on the current page";return r.find("input.property-input, select.property-input").attr("title",t),void r.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text("")}if(""!=window.parent.TvrSharedVars.pgInFocus)var i=r.find("li.group-tag-"+window.parent.TvrSharedVars.pgInFocus).find("div.field-wrap");else var i=r.find("div.field-wrap");i.each(function(){var e=$(this);if(!e.hasClass("group-label")&&!e.hasClass("sub-label")){var r=e.find("span.comp-style"),t=e.find(".property-input"),i=r.attr("class").split(" "),a=i[1].replace("cprop-",""),o=window.TvrSharedVars.compProps[a],s=0;if(TvrCom.isDefined(o))if(o===Object(o)){e.addClass("mixed-cp"),r.text("[mix]");var n="The computed value for this style varies across multiple elements on the current page",l="";for(var c in o)if(TvrCom.isDefined(o[c].val)){var d=o[c].htmlString.replace("&#60;","<").replace("&#62;",">");l+='<tr class="mixed-val" rel="'+s+'"><td>'+ ++s+"</td><td title='"+d+"'>"+TvrUi.colorize_hash(o[c].val,e,"obj")+"</td></tr>"}e.find("span.comp-mixed-table").find("tbody").html(l)}else{var n="Computed value: "+o;e.removeClass("mixed-cp"),o=TvrUi.truncate_displayed_comp_css(t,o),r.html(TvrUi.colorize_hash(o,e,"val"))}else{var n="Style not applicable";r.text("")}t.attr("title",n)}})},truncate_displayed_comp_css:function(e,r){var t=e.width(),i=r.length,a=t/6;return i>a&&(r=r.substring(0,a)+"..."),r},colorize_hash:function(e,r,t){if(!e||e.indexOf("#")<0)return"obj"!=t&&r.removeClass("colorize-hash"),e;"obj"!=t&&r.addClass("colorize-hash");var i=e;return e.replace("#",'<span class="colored-hash" style="background:'+i+'">#</span>')},update_prog_indicator:function(e,r){if(window.TvrSharedVars.progCount<0)return window.TvrSharedVars.progCount=0,!1;var t=$("#m-logo"),i=$("#status-short"),a=$("#dialogs").find(".tvr-dialog").find(".dialog-icon");"plus"==e?(++window.TvrSharedVars.progCount,i.removeClass(),t.add(i).add(a).addClass("active"),i.text(r)):(--window.TvrSharedVars.progCount,window.TvrSharedVars.progCount<=0&&(t.add(i).add(a).removeClass("active"),TvrUi.update_full_logs(r)))},update_full_logs:function(e){var r=$("#full-logs").find(".logs");if(e){var t=e[0],i=e[1];if(e[2])var a=e[2];else var a="error";var o=$("#log-item-template").clone().removeAttr("id");o.attr("class",o.attr("class").replace("tvr-error","tvr-"+a)).find(".short").text(t).end().find(".long").html(i),r.html(o)}TvrUi.update_short_status()},update_short_status:function(){var e=$("#full-logs").find(".logs li").first();if(e)var r=e.find(".short").text(),t=e.attr("class");else var r,t="";$("#status-short").addClass(t).text(r)},default_to_first_sel:function(){var e=$("#last-viewed-selector").val(),r=$("#last-edited-selector").val();if(TvrCom.hasValue(e)&&TvrCom.isDomEl($("#"+e)))var t=$("#"+e);else if(TvrCom.hasValue(r)&&TvrCom.isDomEl($("#"+r)))var t=$("#"+r);else var t=$("#tvr-menu").find("li.selector-tag:eq(0)");return t&&TvrCom.hasValue(t.attr("id"))?void TvrUi.tvr_iterate_selectors_v(t):!1},adjust_comp_span:function(e,r){"after"==r?(e.val()?(e.closest(".property-tag").addClass("manual-val"),e.siblings("span.comp-style").addClass("hidden")):(e.closest(".property-tag").removeClass("manual-val"),e.siblings("span.comp-style").removeClass("hidden")),TvrUi.signal_if_pg_has_values(e)):"hover"==r&&e.siblings("span.comp-style").addClass("hidden")},signal_if_pg_has_values:function(e){var r=TvrUi.get_meta(e,"group"),t=!0;r.group.find("input.property-input").each(function(){return $(this).val()?void(t=!1):void 0});var i=r.selector.find("li.pg-icon-"+r.groupSlug);t?i.removeClass("hasValues"):i.addClass("hasValues")},done_typing:function(){TvrUi.ajax_save_settings("save")},toggle_left_menu:function(){$("#v-left-controls").slideToggle("fast",function(){TvrUi.leftMenu?($("#toggle-left-menu").removeClass("showing"),TvrUi.leftMenu=!1,$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&left_menu_down=0",function(){})):($("#toggle-left-menu").addClass("showing"),TvrUi.leftMenu=!0,$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&left_menu_down=1",function(){}))
})},get_folders:function(){var e=[];return $("#tvr-menu").find(".section-tag").each(function(r){var t=TvrUi.get_meta($(this),"section");e[r]=t.sectionH}),e},show_wizard:function(){if(window.TvrSharedVars.intelli=!0,$("#visual-view").addClass("show-wizard"),TvrUi.show_mq_slider(),$("#always-adv-checkbox").is(":checked")&&TvrUi.show_adv_wizard(),TvrCombo.cur_folders=TvrUi.get_folders(),TvrCom.hasValue(TvrUi.selInFocusID)){var e=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");$("#wizard_folder").val(e.sectionH).removeClass("text-label")}TvrUi.update_selector_wizard()},hide_wizard:function(){$("#visual-view").removeClass("show-wizard"),TvrUi.hide_adv_wizard(),TvrUi.return_normal_highlighting(),$("#wizard-name").val(""),window.TvrSharedVars.intelli=!1,TvrUi.toolbar_adjusted()},toggle_adv_wizard:function(){$("#visual-view").hasClass("show-advanced")?(TvrUi.hide_adv_wizard(),TvrUi.remember_adv_wizard(0)):(TvrUi.show_adv_wizard(),TvrUi.remember_adv_wizard(1)),TvrUi.toolbar_adjusted()},show_adv_wizard:function(){$("#visual-view").addClass("show-advanced");var e=$("#v-frontend-wrap"),r=e.height()-40;e.find(".wizard-panes").height(r),TvrUi.screen_width_adjusted("intelli")},hide_adv_wizard:function(){$("#visual-view").removeClass("show-advanced"),TvrUi.screen_width_adjusted("intelli")},remember_adv_wizard:function(e){e?$("#always-adv-checkbox").prop("checked",!0):$("#always-adv-checkbox").prop("checked",!1),$.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&show_adv_wizard="+e,function(){})},switch_html_element:function(e){var r=e.attr("class"),t=window.TvrSharedVars.TvrSugCSS;if(r.indexOf("tvr-parent")>=0)var i=t.Intelli.parent;else if(r.indexOf("tvr-child")>=0)var i=t.Intelli.child;else if(r.indexOf("tvr-prev-sibling")>=0)var i=t.Intelli.prev;else if(r.indexOf("tvr-next-sibling")>=0)var i=t.Intelli.next;TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.build_selector_suggestions(i)},update_selector_wizard:function(){var e=$("#advanced-wizard"),r=window.TvrSharedVars.TvrSugCSS,t="",i=0,a=1,o=1,s=0;for(var n in r){if("Intelli"==n)break;if(++i,i==r.Intelli.ogCount)var l=" (highest specificity)";else var l="";t+='<li class="selector-category">'+n+l+"</li>";for(key2 in r[n]){if(window.TvrSharedVars.intelli_css==key2)var c='in-focus"';else var c="";t+='<li id="code-suggestion-'+o+'" class="code-suggestion '+c+"\"             title='"+r[n][key2]+"'><textarea>"+key2+"</textarea></li>",o+=a,++s}}$("#code-suggestions").html($(t).get().reverse()),TvrUi.update_wizard_slider(s),e.find("div.refine-target-controls span").addClass("disabled"),e.find("div.refine-target-controls span").each(function(){var e=$(this),t=e.attr("class");t.indexOf("tvr-parent")>=0&&r.Intelli.parent?e.removeClass("disabled"):t.indexOf("tvr-child")>=0&&r.Intelli.child?e.removeClass("disabled"):t.indexOf("tvr-prev-sibling")>=0&&r.Intelli.prev?e.removeClass("disabled"):t.indexOf("tvr-next-sibling")>=0&&r.Intelli.next&&e.removeClass("disabled")}),e.find("div.refine-target-html span").html(r.Intelli.htmlString),TvrUi.adjust_wiz_comp_height(),TvrUi.refresh_wizard_comp_css()},adjust_wiz_comp_height:function(){var e=$("#advanced-wizard").find(".wizard-panes").height()-$("#refine-target").height()-36;$("#html-computed-css").add($("#html-computed-css").find(".scrollable-area")).css("max-height",e)},refresh_wizard_comp_css:function(){TvrUi.filter_css_exceptions("intelli");var e=window.TvrSharedVars.intelliCompProps=TvrUi.un_flatten_css(window.TvrSharedVars.intelliCompProps),r=$("#html-computed-css");r.find("li.property-item").remove();for(var t in e){var i="",a=1;for(var o in e[t]){if(TvrCom.isOdd(a))var s="row-odd";else var s="row-even";var n=o.replace(/-/g," ");i+='<li class="property-item accordion-item '+s+'">',i+='<span class="comp-prop-label">'+n+":</span> ",i+='<span class="comp-prop-value">'+e[t][o]+"</span>",i+="</li>",++a}i+='<li class="property-item accordion-item bottom-gap"></li>',$("#comp-"+t).append(i)}},un_flatten_css:function(e){var r=[];for(var t in window.parent.TvrSharedVars.cssProps){r[t]=[];for(var i in window.parent.TvrSharedVars.cssProps[t]){var a=window.parent.TvrSharedVars.cssProps[t][i];"background-img-full"==a||"extracted-gradient"==a||"google-font"==a||"text-shadow"==a||"box-shadow"==a||"background-image"==a&&"gradient"==t||(r[t][a]=e[a])}}return r},wizard_new_selector:function(){var e=$("#wizard_folder").val();if(!TvrCom.hasValue(e)||"Enter new or select a folder..."==e)return alert("Please select an existing folder or enter a new folder name"),!1;var r=TvrCom.convert_to_param(e),t=$("#wizard-name").val(),i=$("#code-suggestions").find("li.in-focus textarea").val();if(!TvrCom.isDomEl($("#strk-"+r))){var a=$("#add-new-section").find(".new-section-input");a.val(e),TvrUi.add_section(a.siblings(".new-section-add"))}var o=TvrUi.get_meta($("#strk-"+r),"section");o.sectionM.find(".add-selector-form").find(".selector-name-input").val(t),o.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(i),TvrUi.add_selector(o.sectionM)},load_visual_view:function(){var e=$("body"),r=e.height();e.addClass("tvr-visual"),TvrUi.default_to_first_sel(),TvrUi.toolbarHeight=$("#v-top-controls").height(),TvrUi.frameHeight=r-TvrUi.toolbarHeight,TvrUi.toggle_enabled_buttons(),TvrUi.placeholderFrame&&(TvrUi.update_prog_indicator("plus","Loading WordPress Site..."),$("#viframe").contents().find("body").css("height",TvrUi.frameHeight+"px"),window.frames.viframe.location=$("#viframe").attr("rel"),TvrUi.placeholderFrame=!1),$("#v-frontend-wrap").css("height",TvrUi.frameHeight),TvrUi.frameWidth=TvrUi.allDevicesWidth,TvrUi.iframe_slider_set||TvrUi.update_iframe_slider(0,0)},show_mq_slider:function(){$("#v-mq-controls").addClass("show")},hide_mq_slider:function(){$("#v-mq-controls").removeClass("show")},toolbar_adjusted:function(){TvrUi.toolbarHeight=$("#v-top-controls").height(),TvrUi.frameHeight=$("body").height()-TvrUi.toolbarHeight,TvrUi.toolbarHeight>40?TvrUi.show_mq_slider():TvrUi.hide_mq_slider(),$("#v-frontend-wrap").css("height",TvrUi.frameHeight)},toggle_enabled_buttons:function(){TvrUi.totalSels<1&&(TvrUi.reset_global_vars(),$("#starter-message").removeClass("hidden"),$("#quick-nav").addClass("hidden"),TvrUi.expanded("quick_section")&&TvrUi.close_quick_edit(),$("#current-selector").text("")),TvrUi.totalSels>0&&($("#starter-message").addClass("hidden"),$("#quick-nav").removeClass("hidden"))},remember_page_viewed:function(){var e=$("#previewurl").val(),r=TvrUi.siteUrl,t=$("#viframe").contents().find("#iframe-url").attr("content"),i=decodeURIComponent(t);TvrCom.hasValue(i)&&0===i.indexOf(r)&&i!=e&&!TvrUi.placeholderFrame&&($.get(TvrUi.ajaxUrl+"&mcth_simple_ajax=1&tvr_microthemer_ui_preview_url="+t,function(){$("#previewStatus").text("iframe-success")}),$("#previewurl").val(i))},update_visual_controls:function(e){if(!TvrCom.isDomEl(e))return $("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var r=TvrUi.get_meta(e,"selector"),t=TvrUi.selectorTrackerScan(r.sectionM,"prev","selector",r.selectorM),i=TvrUi.selectorTrackerScan(r.sectionM,"next","selector",r.selectorM);t?$("#vb-focus-prev").removeClass("disabled"):$("#vb-focus-prev").addClass("disabled"),i?$("#vb-focus-next").removeClass("disabled"):$("#vb-focus-next").addClass("disabled"),TvrUi.get_meta(e,"selector")},selectorTrackerScan:function(e,r,t,i){if("prev"==r){if("selector"==t){var a=i.prev("li.strk-sel");return TvrCom.hasValue(a.attr("id"))?a:TvrUi.selectorTrackerScan(e,r)}var o=e.prev("li.strk-sec");if(TvrCom.hasValue(o.attr("id"))){var s=o.find(".strk-sel").last();return TvrCom.hasValue(s.attr("id"))?s:TvrUi.selectorTrackerScan(o,r)}return!1}if("next"==r){if("selector"==t){var n=i.next("li.strk-sel");return TvrCom.hasValue(n.attr("id"))?n:TvrUi.selectorTrackerScan(e,r)}var l=e.next("li.strk-sec");if(TvrCom.hasValue(l.attr("id"))){var c=l.find(".strk-sel").first();return TvrCom.hasValue(c.attr("id"))?c:TvrUi.selectorTrackerScan(l,r)}return!1}},toggle_highlighting:function(){window.TvrSharedVars.highlightEnabled?TvrUi.hide_highlighting():TvrUi.show_highlighting()},show_highlighting:function(){window.TvrSharedVars.highlightEnabled=!0,$("#toggle-highlighting").addClass("on"),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.showOverlays()},hide_highlighting:function(){window.TvrSharedVars.highlightEnabled=!1,$("#toggle-highlighting").removeClass("on"),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.hideOverlays()},return_normal_highlighting:function(){window.TvrSharedVars.highlightEnabled&&window.TvrSharedVars.tmpHighlighting&&(window.TvrSharedVars.tmpHighlighting=!1,TvrUi.toggle_highlighting()),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("reg")},tvr_iterate_selectors_v:function(e){var r=TvrUi.get_meta(e,"selector");TvrUi.load_selector(r,"load selector before iterating")||($("#tvr-options").find("li.in-focus").removeClass("in-focus"),r.selector.addClass("in-focus"),TvrUi.update_global_vars(r),TvrUi.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.switch_highlight("reg"),TvrUi.update_visual_controls(e),TvrUi.refresh_comp_css(),TvrUi.default_to_prev_edited_pg_group(r.selector),TvrUi.toolbar_adjusted())},iframe_functions_loaded:function(){return window.frames.viframe&&window.frames.viframe.TvrExportVars&&window.frames.viframe.TvrExportVars.switch_highlight&&window.frames.viframe.TvrExportVars.get_computed_styles&&window.frames.viframe.TvrExportVars.iframe_window_fully_loaded?(window.TvrSharedVars.awaitingIFrame=!1,!0):(window.TvrSharedVars.awaitingIFrame=!0,!1)},default_to_prev_edited_pg_group:function(e){var r=TvrUi.get_meta(e,"selector"),t=r.selector.find(".pg-focus").val();t&&TvrUi.pg_icon_pressed(r.selector.find(".pg-icon-"+t))},quick_nav:function(e){if(e.hasClass("disabled"))return!1;var r=TvrUi.get_meta($("#"+TvrUi.selInFocusID),"selector");if("vb-focus-prev"==e.attr("id"))var t="prev";else var t="next";TvrUi.tvr_iterate_selectors_v(TvrUi.selectorTrackerScan(r.sectionM,t,"selector",r.selectorM))}};TvrUi.init(),window.TvrSharedVars.print_r=TvrCom.print_r,window.TvrSharedVars.extract_str=TvrCom.extract_str,window.TvrSharedVars.custom_to_non_escaped=TvrCom.custom_to_non_escaped,window.TvrSharedVars.jquery_escape_quotes=TvrCom.jquery_escape_quotes,window.TvrSharedVars.hasValue=TvrCom.hasValue,window.TvrSharedVars.sane_decimal=TvrCom.sane_decimal,window.TvrSharedVars.isDomEl=TvrCom.isDomEl,window.TvrSharedVars.analyse_sel_code=TvrUi.analyse_sel_code,window.TvrSharedVars.update_prog_indicator=TvrUi.update_prog_indicator,window.TvrSharedVars.show_wizard=TvrUi.show_wizard,window.TvrSharedVars.update_selector_wizard=TvrUi.update_selector_wizard,window.TvrSharedVars.toggle_highlighting=TvrUi.toggle_highlighting,window.TvrSharedVars.insert_google_font=TvrUi.insert_google_font,window.TvrSharedVars.ajax_save_settings=TvrUi.ajax_save_settings,window.TvrSharedVars.remember_page_viewed=TvrUi.remember_page_viewed,window.TvrSharedVars.refresh_comp_css=TvrUi.refresh_comp_css,window.TvrSharedVars.close_all_expanded=TvrUi.close_all_expanded,window.TvrSharedVars.show_dialog=TvrUi.show_dialog,window.TvrSharedVars.update_packs_obj=TvrUi.update_packs_obj,window.TvrSharedVars.update_full_logs=TvrUi.update_full_logs});